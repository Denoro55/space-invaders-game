!function(e){function t(t){for(var i,o,r=t[0],h=t[1],c=t[2],d=0,u=[];d<r.length;d++)o=r[d],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&u.push(n[o][0]),n[o]=0;for(i in h)Object.prototype.hasOwnProperty.call(h,i)&&(e[i]=h[i]);for(l&&l(t);u.length;)u.shift()();return a.push.apply(a,c||[]),s()}function s(){for(var e,t=0;t<a.length;t++){for(var s=a[t],i=!0,r=1;r<s.length;r++){var h=s[r];0!==n[h]&&(i=!1)}i&&(a.splice(t--,1),e=o(o.s=s[0]))}return e}var i={},n={0:0},a=[];function o(t){if(i[t])return i[t].exports;var s=i[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=e,o.c=i,o.d=function(e,t,s){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(s,i,function(t){return e[t]}.bind(null,i));return s},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var r=window.webpackJsonp=window.webpackJsonp||[],h=r.push.bind(r);r.push=t,r=r.slice();for(var c=0;c<r.length;c++)t(r[c]);var l=h;a.push([31,1]),s()}([function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isMobile=t.isDev=t.START_DEVELOPMENT_TIME=t.ENV=t.getGameConfig=t.LEVELS_CONFIG=t.ENEMIES_CONFIG=t.CONFIG=void 0;const i=s(3);var n=s(39);Object.defineProperty(t,"CONFIG",{enumerable:!0,get:function(){return n.CONFIG}});var a=s(25);Object.defineProperty(t,"ENEMIES_CONFIG",{enumerable:!0,get:function(){return a.ENEMIES_CONFIG}});var o=s(17);Object.defineProperty(t,"LEVELS_CONFIG",{enumerable:!0,get:function(){return o.LEVELS_CONFIG}});var r=s(26);Object.defineProperty(t,"getGameConfig",{enumerable:!0,get:function(){return r.getGameConfig}}),t.ENV={buildTime:1636893299247},t.START_DEVELOPMENT_TIME=new Date(2021,8,5),t.isDev=!1,t.isMobile=i.isMobileDevice()},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Vector=void 0;var i=s(33);Object.defineProperty(t,"Vector",{enumerable:!0,get:function(){return i.Vector}})},function(e,t,s){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,s,i){void 0===i&&(i=s),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,i){void 0===i&&(i=s),e[i]=t[s]}),n=this&&this.__exportStar||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||i(t,e,s)};Object.defineProperty(t,"__esModule",{value:!0}),n(s(41),t),n(s(42),t)},function(e,t,s){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,s,i){void 0===i&&(i=s),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,i){void 0===i&&(i=s),e[i]=t[s]}),n=this&&this.__exportStar||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||i(t,e,s)};Object.defineProperty(t,"__esModule",{value:!0}),n(s(32),t),n(s(8),t),n(s(16),t),n(s(34),t),n(s(35),t),n(s(36),t),n(s(21),t),n(s(37),t),n(s(38),t),n(s(23),t)},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Service=void 0;t.Service=class{constructor(e){this.scene=e}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HEX_COLORS=t.COLORS=void 0,t.COLORS={white:16777215,green:65280,red:16711680,gray:14540253,yellow:16776960,blue:3327,aqua:36863},t.HEX_COLORS={white:"#ffffff",green:"#00ff00"}},function(e,t,s){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,s,i){void 0===i&&(i=s),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,i){void 0===i&&(i=s),e[i]=t[s]}),n=this&&this.__exportStar||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||i(t,e,s)};Object.defineProperty(t,"__esModule",{value:!0}),t.UIRainbowText=t.UICosmons=void 0,n(s(61),t);var a=s(64);Object.defineProperty(t,"UICosmons",{enumerable:!0,get:function(){return a.UICosmons}});var o=s(65);Object.defineProperty(t,"UIRainbowText",{enumerable:!0,get:function(){return o.UIRainbowText}})},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Scene=void 0;const i=s(0),n=s(19),a=s(0);class o extends Phaser.Scene{getData(){return this.game.data}setData(e,t){this.game.data[e]=t,a.isDev&&console.log(`[${e}] was updated in global data:`,this.game.data)}getLastUpdatedGameTime(){return"Last updated: "+new Date(i.ENV.buildTime).toLocaleString()}getGameSize(){return{width:+this.game.config.width,height:+this.game.config.height}}setStorageData(e){n.StorageService.setData(e)}getStorageData(){return n.StorageService.getData()}}t.Scene=o},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.spreadRadians=t.spreadAngle=t.getAngleDiff=t.getOffsetToAngle=t.getNearestAngle=t.angleToRadians=t.angleToDegrees=t.getAngleBetween=void 0;const i=s(1);function n(e){return e*Math.PI/180}t.getAngleBetween=function(e,t){const s=e.x-t.x,i=e.y-t.y;let n=Math.atan2(i,s);return n<0&&(n+=2*Math.PI),n},t.angleToDegrees=function(e){return e/Math.PI*180},t.angleToRadians=n,t.getNearestAngle=function(e,t,s){return Math.abs(e-t)<2?e:(Math.abs(e-t)<180?e<t?e+=s:e-=s:e<t?e-=s:e+=s,(e%360+360)%360)};t.getOffsetToAngle=(e,t)=>new i.Vector(Math.cos(e)*t,Math.sin(e)*t);t.getAngleDiff=(e,t)=>{const s=Math.abs(e-t);return Math.abs((s+180)%360-180)};t.spreadAngle=(e,t)=>e-t+Math.random()*(2*t);t.spreadRadians=(e,s)=>t.spreadAngle(e,n(s))},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Enemy=void 0;const i=s(1);t.Enemy=class{constructor(e,t){this.isOutOfWorld=!1,this.angle=0,this.scene=e,this.name=t}act(e,t){}updateWorldCollisions(e,t){const s=this.scene.getGameSize(),{isOutOfWorld:n}=this;if(this.isOutsideScene(100)){if(!n){const e=250,t=150,n=s.width/2-e+Math.random()*(2*e),a=s.height/2-t+Math.random()*(2*t),o=new i.Vector(n,a);this.onOutOfWorld(o)}this.isOutOfWorld=!0}else this.isOutOfWorld=!1}damage(e){this.hp-=e,this.hp<=0&&this.destroy()}destroy(){const{scene:e,body:t,coinChance:s}=this;e.enemies=e.enemies.filter(e=>e!==this),t.destroy();const n=e.getStats();Math.random()>1-s&&e.utils.spawnCoin({pos:new i.Vector(t.x,t.y),lifeTimeRange:0}),n.kills[this.name]+=1,n.totalKills+=1,e.shakeScreen()}isOutsideScene(e=0){const{body:t}=this,s=this.scene.getGameSize();return t.x<e||t.x>s.width-e||t.y<e||t.y>s.height-e}onOutOfWorld(e){}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SphereBullet=t.Bullet=void 0;var i=s(24);Object.defineProperty(t,"Bullet",{enumerable:!0,get:function(){return i.Bullet}});var n=s(43);Object.defineProperty(t,"SphereBullet",{enumerable:!0,get:function(){return n.Sphere}})},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Effect=void 0;t.Effect=class{constructor(e){this.scene=e}act(){}destroy(){const{body:e}=this;this.scene.effects=this.scene.effects.filter(e=>e!==this),e.destroy()}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BUTTON_X_SPACE=t.BUTTON_Y_SPACE=t.BUTTON_HEIGHT=t.BUTTON_WIDTH=void 0,t.BUTTON_WIDTH=160,t.BUTTON_HEIGHT=46,t.BUTTON_Y_SPACE=20,t.BUTTON_X_SPACE=20},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Flyer=t.UFO=t.Hunter=t.Bot=t.Enemy=void 0;var i=s(9);Object.defineProperty(t,"Enemy",{enumerable:!0,get:function(){return i.Enemy}});var n=s(40);Object.defineProperty(t,"Bot",{enumerable:!0,get:function(){return n.Bot}});var a=s(47);Object.defineProperty(t,"Hunter",{enumerable:!0,get:function(){return a.Hunter}});var o=s(48);Object.defineProperty(t,"UFO",{enumerable:!0,get:function(){return o.UFO}});var r=s(49);Object.defineProperty(t,"Flyer",{enumerable:!0,get:function(){return r.Flyer}})},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Shadow=t.Fire=t.Explode=t.Effect=void 0;var i=s(11);Object.defineProperty(t,"Effect",{enumerable:!0,get:function(){return i.Effect}});var n=s(44);Object.defineProperty(t,"Explode",{enumerable:!0,get:function(){return n.Explode}});var a=s(45);Object.defineProperty(t,"Fire",{enumerable:!0,get:function(){return a.Fire}});var o=s(46);Object.defineProperty(t,"Shadow",{enumerable:!0,get:function(){return o.Shadow}})},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Level=void 0;const i=s(2),n=s(17);t.Level=class{constructor(e,t){this.nextAttemptTime=0,this.levelState=null,this.scene=e,this.mode=n.LEVELS_CONFIG[t].mode,this.mode.type===i.GameMode.waves&&this.setLevelState(0)}setLevelState(e){const{mode:t}=this;if(t.type===i.GameMode.waves){const s=t.target.length;this.levelState=e>=s?{waveNumber:e,enemies:[],maxEnemies:0}:{waveNumber:e,enemies:[...t.target[e].enemies],maxEnemies:t.target[e].maxEnemies}}}update(){const{scene:e,nextAttemptTime:t,nextAttemptTimeInterval:s}=this,i=e.gameTime;i>t&&(this.makeAttempt(),this.nextAttemptTime=i+s),this.updateStatus()}updateStatus(){const{scene:e,mode:t}=this,s=e.getStats(),n=t.type;switch(t.type){case i.GameMode.totalKills:{const e=+t.target;this.status=e-s.totalKills;break}case i.GameMode.enemyKills:{const e=t.target,i=Object.values(e).reduce((e,t)=>e+t,0),n=Object.keys(e).reduce((t,i)=>{const n=e[i];return t+Math.min(n,s.kills[i]||0)},0);this.status=i-n;break}case i.GameMode.time:this.status=Math.ceil(+t.target-e.gameTime/1e3);break;case i.GameMode.waves:{const e=t.target.length;this.status=e-this.levelState.waveNumber;break}default:throw new Error(`Mode "${n}" is not set or not defined!`)}this.status=Math.max(this.status,0)}getTextByMode(){return void 0===this.status?"":this.status.toString()}checkForWin(){const{status:e}=this;return void 0!==e&&e<=0}createEnemy(e){const{scene:t}=this,s=this.scene.getGameSize(),i={x:s.width,y:s.height},n=Math.random()>.5?"y":"x",a=[-50,i[n]+50][Math.floor(2*Math.random())],o=new e(t,{x:"x"===n?a:Math.random()*s.width,y:"y"===n?a:Math.random()*s.height});t.enemies.push(o),this.initMeteorCollisions(o)}makeAttempt(){const{scene:e,mode:t,levelState:s}=this;if(t.type===i.GameMode.waves){const{maxEnemies:i,enemies:n}=s,a=t.target.length,o=e.enemies.length;if(o<i){const e=n.shift();e?this.createEnemy(e):o<=0&&s.waveNumber<a&&this.setLevelState(s.waveNumber+1)}}}initMeteorCollisions(e){const{scene:t}=this;t.dangerMeteors.forEach(s=>{t.physics.add.collider(e.body,s.body,()=>{e.destroy()})})}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDistanceBetweenPoints=t.getRandomInt=void 0;t.getRandomInt=(e,t)=>Math.round(e+Math.random()*(t-e));t.getDistanceBetweenPoints=(e,t)=>{var s=e.x-t.x,i=e.y-t.y;return Math.sqrt(s*s+i*i)}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LEVELS_CONFIG=void 0;const i=s(13),n=s(2),a=s(50);t.LEVELS_CONFIG=[a.getLevelConfig({level:0,title:"Red Alert",text:"Space invaders have attacked our base. Come back and find out the reason for the invasion.\n    \nWarning! A lot of invaders have been detected on our way.",mode:{type:n.GameMode.totalKills,target:20}}),a.getLevelConfig({level:1,title:"Hunters",text:"Hunters in sight. It's the most common units among the enemy ships. Be careful, they follow for their targets.",mode:{type:n.GameMode.enemyKills,target:{hunter:10}}}),a.getLevelConfig({level:2,title:"UFO",text:"Seems like aliens are also against us. Or maybe their ships were hijacked?",mode:{type:n.GameMode.time,target:120}}),a.getLevelConfig({level:3,title:"Defense",text:"Ok, we are on the base. Take the hit and help your allies to protect one.",mode:{type:n.GameMode.waves,target:[{maxEnemies:4,enemies:[i.Bot,i.Bot,i.Bot,i.Hunter,i.Hunter,i.Bot,i.Hunter]},{maxEnemies:4,enemies:[i.Hunter,i.Hunter,i.Hunter,i.Bot,i.Bot,i.Bot,i.Bot,i.Bot,i.Hunter]},{maxEnemies:4,enemies:[i.Hunter,i.Hunter,i.Hunter,i.Bot,i.Hunter,i.Bot,i.Hunter,i.Bot,i.Hunter,i.Bot,i.Hunter,i.Bot,i.Bot,i.Bot]},{maxEnemies:5,enemies:[i.Bot,i.Bot,i.Bot,i.UFO,i.Hunter,i.UFO,i.Bot,i.UFO,i.Hunter,i.Bot,i.Hunter,i.Bot,i.Bot,i.UFO,i.Bot,i.Hunter,i.Bot]},{maxEnemies:5,enemies:[i.Hunter,i.Hunter,i.Hunter,i.UFO,i.UFO,i.Hunter,i.Hunter,i.Bot,i.Bot,i.Bot,i.Bot,i.Bot,i.Hunter,i.UFO,i.Hunter,i.Bot,i.UFO,i.Hunter,i.Bot,i.UFO,i.UFO,i.Hunter]}]}})]},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Bonus=void 0;t.Bonus=class{constructor(e){this.scene=e}act(){}destroy(){const{body:e}=this;this.scene.bonuses=this.scene.bonuses.filter(e=>e!==this),e.destroy()}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Game=t.StorageService=void 0;var i=s(81);Object.defineProperty(t,"StorageService",{enumerable:!0,get:function(){return i.StorageService}});var n=s(82);Object.defineProperty(t,"Game",{enumerable:!0,get:function(){return n.Game}})},,function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRandomHexColor=void 0;t.getRandomHexColor=()=>{let e=65280,t=16711681;return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e)+e)}},function(e,t,s){"use strict";const i=n;function n(e,t){const s=o();return(n=function(e,t){return s[e-=177]})(e,t)}!function(e,t){const s=n,i=e();for(;;)try{if(266715===parseInt(s(181))/1*(parseInt(s(180))/2)+-parseInt(s(194))/3*(-parseInt(s(196))/4)+-parseInt(s(178))/5+parseInt(s(182))/6*(parseInt(s(179))/7)+-parseInt(s(189))/8+-parseInt(s(191))/9+parseInt(s(190))/10)break;i.push(i.shift())}catch(e){i.push(i.shift())}}(o),Object[i(187)](t,i(195),{value:!0}),t[i(185)]=t[i(188)]=t.CRYPTO_LS_DATA_KEY=t[i(177)]=void 0;const a=s(30);function o(){const e=["606915omgWCt","4795PNJIOc","2vqVlyM","231279WFipTA","378ERQtxM","CRYPTO_LS_DATA_KEY","default","CRYPTO_LS_ARRAY","data","defineProperty","LS_DATA_KEY","1478832fJvhgf","1127310zdFCqZ","201609KTJTAN","toString","encrypt","36dMJaXP","__esModule","69396zCcvik","CRYPTO_LS_KEY"];return(o=function(){return e})()}t[i(177)]=i(177),t[i(183)]="CRYPTO_LS_DATA_KEY",t[i(188)]=a[i(184)].AES[i(193)](i(186),t[i(183)])[i(192)]().slice(0,6),t[i(185)]=[["b",0],["F",5],["v",1],["Q",10],["Y",8],["e",2],["P",6],["x",3],["n",7],["w",9],["Z",4]]},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flatten=t.chunk=void 0;t.chunk=(e,t)=>{let s=[];for(let i=0;i<e.length;i+=t)s.push(e.slice(i,i+t));return s};t.flatten=e=>{const t=[e],s=[];for(;t.length;){const e=t.pop();if(Array.isArray(e))for(;e.length;)t.push(e.pop());else s.push(e)}return s}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Bullet=void 0;const i=s(2);t.Bullet=class{constructor(e,t,s,i){this.scene=e,this.pos=t,this.owner=s,this.damage=i}act(e,t){}update(e,t){const{body:s}=this,i=this.scene.getGameSize();(s.x<0||s.x>i.width||s.y<0||s.y>i.height)&&this.destroy()}initCollisions(){const{scene:e,owner:t,damage:s}=this;e.dangerMeteors.forEach(t=>{e.physics.add.collider(this.body,t.body,()=>{this.explode()})}),t===i.Owner.player?(e.enemies.forEach(t=>{e.physics.add.collider(this.body,t.body,()=>{this.explode(),t.damage(s)})}),e.instances.forEach(t=>{e.physics.add.collider(this.body,t.body,()=>{t.damage(),this.explode()})})):(e.physics.add.collider(this.body,e.player.body,()=>{this.explode(),e.player.damage(s)}),e.physics.add.overlap(this.body,e.player.shieldBody,()=>{e.player.hitShield(this)}))}getAngle(){return this.angle}explode(){}destroy(){const{body:e}=this;this.scene.bullets=this.scene.bullets.filter(e=>e!==this),e.destroy()}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ENEMIES_CONFIG=void 0,t.ENEMIES_CONFIG={bot:{pluralName:["bot","bots","bots"]},hunter:{pluralName:["hunter","hunters","hunters"]},ufo:{pluralName:["ufo","ufo","ufo"]},flyer:{pluralName:["flyer","flyers","flyers"]}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.INITIAL_GAME_DATA=t.getGameConfig=void 0;const i=s(0),n=s(52),a=s(89),o=s(90),r=s(91),h=s(92),c=s(93),l=s(3);t.getGameConfig=()=>{const e=i.isMobile?{width:window.innerWidth,height:l.getFullWindowHeight(),scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH}}:{width:1332,height:768,scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH}};return Object.assign(Object.assign({type:Phaser.AUTO,parent:"game-container"},e),{physics:{default:"arcade",arcade:{gravity:{y:0},debug:!1}},scene:[a.MenuScene,n.GameScene,c.PreviewScene,o.FailScene,r.WinScene,h.InfoScene]})},t.INITIAL_GAME_DATA={level:(i.isDev,0),levels:{},score:0}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UIComponent=void 0;t.UIComponent=class{constructor(e){this.scene=e}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Alert=void 0;t.Alert=class{constructor(e,t){this.creationTime=0,this.isFinished=!1,this.scene=e,this.params=t,this.init()}init(){const{scene:e,params:t}=this,{gameTime:s}=e,i=this.scene.getGameSize();this.creationTime=s,this.alertImage=this.scene.add.image(i.width/2,i.height/2,"alert"),this.alertImage.setOrigin(.5,.5),this.alertImage.setAlpha(0),e.setState("isAlertShowing",!0),t.tint&&this.alertImage.setTint(t.tint)}act(){const{isFinished:e}=this;e||this.update()}update(){const{creationTime:e}=this,{gameTime:t}=this.scene,s=t-e;if(s>5500)this.onFinish();else if(s>2e3){const e=Math.floor(s/500)%2==0?.15:0;this.alertImage.setAlpha(e)}else{const e=.15*Math.sin(s/1500);this.alertImage.setAlpha(e)}}onFinish(){const{scene:e,params:t}=this;t.onFinished(),this.hideAlert(),this.isFinished=!0,e.setState("isAlertShowing",!1)}showAlert(){this.alertImage.visible=!0}hideAlert(){this.alertImage.visible=!1}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Booster=t.BOOSTER_MAP=void 0;const i=s(0),n=s(2),a=s(18);t.BOOSTER_MAP={0:n.EBoosterType.speed,1:n.EBoosterType.damage,2:n.EBoosterType.shield,3:n.EBoosterType.regenerator};class o extends a.Bonus{constructor(e,t,s){super(e),this.creationTime=e.gameTime,this.type=s,this.body=this.scene.physics.add.image(t.x,t.y,this.type),this.init()}init(){this.body.setDepth(10),this.body.setSize(32,32),this.initCollisions()}initCollisions(){const{scene:e}=this;e.physics.add.collider(this.body,e.player.body,()=>{e.player.setBooster(this.type),this.destroy()})}act(){this.update()}update(){const{scene:e,body:t}=this,s=e.gameTime;t.scale=1.2+Math.sin(.004*s)/6,s>this.creationTime+i.CONFIG.boosters.lifeTime&&this.destroy()}}t.Booster=o},,function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s(20);const i=s(0),n=s(19),a=s(3);let o,r=!1,h=null;function c(e=120){setTimeout(()=>{const t=a.getCurrentOrientation();t!==h?(h=t,r||(i.isMobile&&a.isLandscapeOrientation()||!i.isMobile?(o=new n.Game(i.getGameConfig()),r=!0,i.isDev?console.log("Game inited",o):console.log("Game inited")):console.log("Game could not be inited as it does not support portrait orientation")),i.isMobile&&a.isLandscapeOrientation()?a.hideOrientationWarning():i.isMobile&&(a.showOrientationWarning(),o&&a.showFullscreen(o.canvas,!1))):e>0&&window.requestAnimationFrame(()=>{c(e-1)})},200)}function l(e){c()}window.addEventListener("load",l),window.addEventListener("orientationchange",l),i.isMobile},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCenterBody=void 0;const i=s(1);t.getCenterBody=(e,t,s,n,a={x:0,y:0})=>{const o=e/s/2-n+a.x,r=t/s/2-n+a.y;return new i.Vector(o,r)}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Vector=void 0;t.Vector=class{constructor(e,t){this.x=e,this.y=t}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluralize=void 0,t.pluralize=function(e,t){switch(function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2}(e)){case 0:return t[0];case 1:return t[1];default:return t[2]}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isMobileDevice=t.getCurrentOrientation=t.isLandscapeOrientation=void 0;t.isLandscapeOrientation=()=>window.innerHeight<window.innerWidth;t.getCurrentOrientation=()=>t.isLandscapeOrientation()?"horizontal":"vertical";t.isMobileDevice=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isFullScreenMode=t.getFullWindowHeight=t.showFullscreen=t.hideOrientationWarning=t.showOrientationWarning=void 0;const i=document.querySelector(".screen-height-detector");t.showOrientationWarning=()=>{document.body.classList.add("portrait-orientation-warning")};t.hideOrientationWarning=()=>{document.body.classList.remove("portrait-orientation-warning")};t.showFullscreen=(e,s=!0)=>{s&&!t.isFullScreenMode()?e.requestFullscreen?e.requestFullscreen({navigationUI:"hide"}):e.webkitRequestFullscreen?e.webkitRequestFullscreen({navigationUI:"hide"}):e.msRequestFullscreen&&e.msRequestFullscreen({navigationUI:"hide"}):!s&&t.isFullScreenMode()&&(document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen())};t.getFullWindowHeight=()=>i.getBoundingClientRect().height;t.isFullScreenMode=()=>!!(document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement)},function(e,t,s){"use strict";function i(e,t){const s=a();return(i=function(e,t){return s[e-=121]})(e,t)}const n=i;function a(){const e=["decrypt","467160AIludm","15QFSyFB","20074gSBODH","10937707ROaRTc","toString","29907cGjHmf","modifyKey","join","CRYPTO_LS_ARRAY","64ppmAiR","push","getDecryptedValue","getCryptedValue","unmodifyKey","defineProperty","CRYPTO_LS_KEY","default","encrypt","5EgRJBn","length","75YWPpLQ","reverse","7825116xlNTYc","4745622LHABrU","12PyKKOK","1640npKhTQ","595763UXYYew","pop","chunk","AES","flatten"];return(a=function(){return e})()}!function(e,t){const s=i,n=e();for(;;)try{if(589337===-parseInt(s(129))/1*(-parseInt(s(143))/2)+parseInt(s(142))/3*(-parseInt(s(141))/4)+parseInt(s(127))/5*(parseInt(s(132))/6)+-parseInt(s(135))/7*(-parseInt(s(150))/8)+parseInt(s(146))/9*(parseInt(s(134))/10)+parseInt(s(144))/11*(-parseInt(s(133))/12)+-parseInt(s(131))/13)break;n.push(n.shift())}catch(e){n.push(n.shift())}}(a),Object[n(123)](t,"__esModule",{value:!0}),t[n(122)]=t[n(147)]=t.getDecryptedValue=t.getCryptedValue=void 0;const o=s(30),r=s(22),h=s(23);t[n(121)]=e=>{const s=n;return t[s(147)](o[s(125)][s(138)][s(126)](e,r[s(124)])[s(145)]())};t[n(152)]=e=>{const s=n;return o[s(125)][s(138)][s(140)](t[s(122)](e),r[s(124)])[s(145)](o[s(125)].enc.Utf8)};t[n(147)]=e=>{const t=n,s=h[t(137)](e.split(""),2);for(let e=0;e<r[t(149)][t(128)];e++){const i=s[r[t(149)][e][1]];i&&i[t(151)](r.CRYPTO_LS_ARRAY[e][0])}return h[t(139)](s)[t(130)]()[t(148)]("")};t.unmodifyKey=e=>{const t=n,s=h.chunk(e.split("")[t(130)](),3);for(let e=0;e<r[t(149)][t(128)];e++){const i=s[r[t(149)][e][1]];i&&i[t(136)]()}return h.flatten(s)[t(148)]("")}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.storage=void 0,t.storage={set:(e,t)=>{try{localStorage.setItem(e,JSON.stringify(t))}catch(e){console.error(e)}},get:e=>{try{return JSON.parse(localStorage.getItem(e))}catch(e){console.error(e)}}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CONFIG=void 0;const i=s(17),n=s(51);t.CONFIG={title:"Space Invaders",subtitle:"The battle for the galaxy",levelsCount:i.LEVELS_CONFIG.length,failTitleText:"MISSION FAILED",failSubtitleText:"Your ship was destroyed.",winTitleText:"MISSION COMPLETED",pointerSize:32,touchAreaSize:27,touchAreaOffset:85,scene:{delta:16,minYPos:100,failTimeoutTime:2e3,winTimeoutTime:2e3},boosters:n.BOOSTERS_CONFIG}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Bot=void 0;const i=s(0),n=s(1),a=s(3),o=s(2),r=s(9),h=s(10);class c extends r.Enemy{constructor(e,t){super(e,o.EnemyName.bot),this.speed=1.5,this.rotateSpeed=2,this.lastChangeTargetTime=0,this.changeTargetInterval=1e3,this.changeTargetIntervalRange=2e3,this.weaponDamage=10,this.lastShootTime=0,this.shootInterval=1200,this.shootIntervalRange=200,this.bulletSpeed=7,this.hp=30,this.bodySize=32,this.depth=50,this.scale=.6,this.coinChance=.9,this.body=e.physics.add.image(t.x,t.y,"enemy-bot-ship"),this.init(),this.defineTarget=this.defineTarget.bind(this),this.defineTarget()}init(){const{scale:e,depth:t,body:s,bodySize:i}=this;s.setScale(e),s.setImmovable(!0),s.setDepth(t);const n=this.speed+Math.random();this.speed=n,this.rotateSpeed=n;const o=a.getCenterBody(s.displayWidth,s.displayHeight,e,i);s.setCircle(i,o.x,o.y)}act(e,t){this.update(e,t)}update(e,t){const{scene:s,lastShootTime:i}=this,a=s.gameTime;if(this.updateWorldCollisions(e,t),this.updateBase(e,t),a>this.lastChangeTargetTime&&this.updateTarget(),a>i){const e=s.player.body;this.shoot(new n.Vector(e.x,e.y))}}updateBase(e,t){const{body:s,angle:n,targetAngle:o,rotateSpeed:r}=this;this.body.angle=n-90;const h=a.angleToRadians(n),c=t/i.CONFIG.scene.delta;s.x+=this.speed*Math.cos(h)*c,s.y+=this.speed*Math.sin(h)*c,this.angle=a.getNearestAngle(n,o,r)}updateTarget(){const{scene:e,changeTargetInterval:t,changeTargetIntervalRange:s}=this,i=e.gameTime;this.defineTarget();const n=t+Math.random()*s;this.lastChangeTargetTime=i+n}defineTarget(){const e=this.scene.getGameSize(),t=new n.Vector(Math.random()*e.width,Math.random()*e.height);this.setTarget(t)}setTarget(e){const{body:t}=this;this.targetAngle=a.angleToDegrees(a.getAngleBetween(e,t))}shoot(e){const{body:t,bulletSpeed:s,shootInterval:i,shootIntervalRange:r,weaponDamage:c}=this,l=a.getAngleBetween(e,new n.Vector(t.x,t.y));this.scene.bullets.push(new h.SphereBullet(this.scene,new n.Vector(t.x,t.y),o.Owner.enemy,{speed:a.getOffsetToAngle(l,s),angle:l,sprite:"laser-red",explodeSprite:"red-explode",damage:c})),this.lastShootTime=this.scene.gameTime+i+Math.random()*r}onOutOfWorld(e){this.setTarget(e)}destroy(){const{scene:e,body:t}=this;e.utils.tripleExplode(t.x,t.y),super.destroy()}}t.Bot=c},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EBoosterType=t.SceneName=t.EnemyName=t.GameMode=t.Owner=void 0,function(e){e.player="player",e.enemy="enemy"}(t.Owner||(t.Owner={})),function(e){e.totalKills="totalKills",e.enemyKills="enemyKill",e.time="time",e.waves="waves"}(t.GameMode||(t.GameMode={})),function(e){e.bot="bot",e.ufo="ufo",e.hunter="hunter",e.flyer="flyer"}(t.EnemyName||(t.EnemyName={})),function(e){e.menu="MenuScene",e.preview="PreviewScene",e.game="GameScene",e.fail="FailScene",e.win="WinScene",e.info="InfoScene"}(t.SceneName||(t.SceneName={})),function(e){e.speed="bonus-speed",e.damage="bonus-damage",e.shield="bonus-shield",e.regenerator="bonus-regenerator"}(t.EBoosterType||(t.EBoosterType={}))},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sphere=void 0;const i=s(1),n=s(0),a=s(3),o=s(14),r=s(24),h={scale:1,bodySize:6};class c extends r.Bullet{constructor(e,t,s,i){super(e,t,s,i.damage),this.depth=10,this.body=e.physics.add.image(t.x,t.y,i.sprite),this.params=Object.assign(Object.assign({},h),i),this.init()}init(){const{body:e,scene:t,params:s,depth:n}=this,{angle:o,scale:r}=s;e.setAngle(a.angleToDegrees(o)+90),e.setDepth(n),e.setOrigin(.5,.5),e.setScale(r),this.initBody(),this.initCollisions();const h=new i.Vector(this.body.x+this.params.speed.x,this.body.y+this.params.speed.y);this.angle=a.angleToDegrees(a.getAngleBetween(h,new i.Vector(this.body.x,this.body.y))),t.add.existing(this.body)}initBody(){const{params:e}=this,{angle:t,scale:s,bodySize:i}=e,n=a.getOffsetToAngle(t,this.body.displayHeight/s/3),o=a.getCenterBody(this.body.displayWidth,this.body.displayHeight,s,i,n);this.body.setCircle(i,o.x,o.y)}act(e,t){this.update(e,t)}draw(){}explode(){const{body:e,scene:t,params:s}=this;t.effects.push(new o.Explode(t,new i.Vector(e.x,e.y),{sprite:s.explodeSprite})),this.destroy()}update(e,t){const{body:s}=this,{speed:i}=this.params;s.x+=i.x*(t/n.CONFIG.scene.delta),s.y+=i.y*(t/n.CONFIG.scene.delta),super.update(e,t)}}t.Sphere=c},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Explode=void 0;const i=s(11);class n extends i.Effect{constructor(e,t,s){super(e),this.body=new Phaser.GameObjects.Image(e,t.x,t.y,s.sprite),this.params=s,this.startTime=e.gameTime,this.body.setScale(0),this.body.setDepth(115),e.add.existing(this.body)}act(){this.update()}update(){const{scene:e,startTime:t}=this,s=e.gameTime-t,i=Math.sin(s/150),n=i;this.body.angle+=3,this.body.setScale(n,n),this.body.setAlpha(i),i<.06&&s>100&&this.destroy()}}t.Explode=n},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Fire=void 0;const i=s(8),n=s(11);class a extends n.Effect{constructor(e,t,s){super(e),this.speed=1.7,this.body=new Phaser.GameObjects.Image(e,t.x,t.y,"fire"),this.params=s,this.body.setDepth(5),this.body.setAngle(i.angleToDegrees(s.angle)+90),this.startTime=e.gameTime,this.params=s,e.add.existing(this.body)}act(){this.update()}update(){const{scene:e,body:t,speed:s,startTime:i,params:n}=this,a=e.gameTime-i;t.alpha=1-a/150,t.x+=s*Math.cos(n.angle),t.y+=s*Math.sin(n.angle),t.alpha<=0&&this.destroy()}}t.Fire=a},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Shadow=void 0;const i=s(11);class n extends i.Effect{constructor(e,t,s){super(e),this.params=s,this.body=new Phaser.GameObjects.Image(e,t.x,t.y,s.sprite),this.body.setScale(s.scale),this.body.setAngle(s.angle),this.body.setAlpha(s.alpha),this.body.setDepth(0),this.destroyTime=s.lifeTime+e.gameTime,e.add.existing(this.body)}act(){this.update()}update(){const{scene:e,body:t,destroyTime:s,params:i}=this,{gameTime:n}=e,a=(s-n)*i.alpha/i.lifeTime;t.setAlpha(a),n>this.destroyTime&&this.destroy()}}t.Shadow=n},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Hunter=void 0;const i=s(0),n=s(1),a=s(3),o=s(2),r=s(9),h=s(10);var c;!function(e){e.moving="moving",e.stop="stop",e.rotate="rotate",e.attack="attack"}(c||(c={}));class l extends r.Enemy{constructor(e,t){super(e,o.EnemyName.hunter),this.weaponDamage=10,this.chanceToShoot=.25,this.lastShootTime=0,this.shootIntervalTime=1200,this.attackEndTime=0,this.attackIntervalTime=3e3,this.attackShootIntervalTime=325,this.attackSpreadRange=15,this.attackHunting=!0,this.lastChangeTargetTime=0,this.changeTargetInterval=1e3,this.changeTargetIntervalRange=2e3,this.rotateSpeed=2,this.currentRotateSpeed=this.rotateSpeed,this.rotateTimer=0,this.rotateIntervalTimer=3e3,this.maxSpeed=2,this.speed=2,this.speedIncrease=.05,this.stopEndTime=0,this.stopIntervalTime=3e3,this.stopIntervalRangeTime=1e3,this.coinChance=.9,this.bodySize=36,this.depth=50,this.scale=.7,this.hp=70,this.bulletSpeed=7,this.behavior=c.moving,this.body=e.physics.add.image(t.x,t.y,"enemy-hunter-ship"),this.init(),this.defineTarget=this.defineTarget.bind(this),this.defineTarget()}init(){const{scale:e,depth:t,body:s,bodySize:i}=this;s.setScale(e),s.setImmovable(!0),s.setDepth(t);const n=a.getCenterBody(s.displayWidth,s.displayHeight,e,i);s.setCircle(i,n.x,n.y),this.setStopEndTime(!0)}act(e,t){this.update(e,t)}update(e,t){const{scene:s,body:i,lastShootTime:o,shootIntervalTime:r,chanceToShoot:h,behavior:l,speedIncrease:d,stopEndTime:u,attackHunting:p,attackIntervalTime:g}=this,m=s.player.body,y=s.gameTime;switch(this.updateBase(y,t),l){case c.moving:this.speed<this.maxSpeed&&(this.speed+=d),y>o&&(Math.random()>1-h&&this.shoot(a.getAngleBetween(new n.Vector(m.x,m.y),new n.Vector(i.x,i.y))),this.lastShootTime=y+r),y>this.lastChangeTargetTime&&this.updateTarget(),y>u&&(this.behavior=c.stop);break;case c.stop:this.speed>0?this.speed-=d:this.setRotateBehavior();break;case c.rotate:this.setTarget(new n.Vector(m.x,m.y)),y>o&&(this.shoot(a.angleToRadians(this.angle),this.attackSpreadRange),this.lastShootTime=y+this.attackShootIntervalTime),a.getAngleDiff(this.targetAngle,this.angle)<=4?this.setAttackBehavior():y>this.rotateTimer&&this.setMovingBehavior();break;case c.attack:(p||y>this.attackEndTime-g/3)&&this.setTarget(new n.Vector(m.x,m.y)),this.speed<this.maxSpeed&&(this.speed+=d),y>o&&(this.shoot(a.angleToRadians(this.angle),this.attackSpreadRange),this.lastShootTime=y+this.attackShootIntervalTime),p&&y>this.attackEndTime-g/1.5&&(this.attackHunting=!1,this.updateTarget()),y>this.attackEndTime&&this.setMovingBehavior()}}updateBase(e,t){const{body:s,angle:o,targetAngle:r,currentRotateSpeed:h}=this,c=this.scene.getGameSize();this.body.angle=o-90;const l=a.angleToRadians(o),d=t/i.CONFIG.scene.delta;s.x+=this.speed*Math.cos(l)*d,s.y+=this.speed*Math.sin(l)*d,this.angle=a.getNearestAngle(o,r,h),(s.x<100||s.y<100||s.x>c.width-100||s.y>c.height-100)&&this.setTarget(new n.Vector(c.width/2,c.height/2))}updateTarget(){const{scene:e,changeTargetInterval:t,changeTargetIntervalRange:s}=this,i=e.gameTime;this.defineTarget();const n=t+Math.random()*s;this.lastChangeTargetTime=i+n}defineTarget(){const e=this.scene.getGameSize(),t=new n.Vector(Math.random()*e.width,Math.random()*e.height);this.setTarget(t)}setTarget(e){const{body:t}=this;this.setTargetAngle(a.angleToDegrees(a.getAngleBetween(e,t)))}setTargetAngle(e){this.targetAngle=e}setAttackBehavior(){const{scene:e,rotateSpeed:t}=this,s=e.gameTime;this.attackEndTime=s+this.attackIntervalTime,this.currentRotateSpeed=t,this.attackHunting=!0,this.behavior=c.attack}setStopEndTime(e=!1){const{scene:t,stopIntervalTime:s,stopIntervalRangeTime:i}=this,n=t.gameTime;this.stopEndTime=e?n+1e3+a.getRandomInt(0,s):n+s+a.getRandomInt(0,i)}setMovingBehavior(){const{scene:e,changeTargetInterval:t,shootIntervalTime:s}=this,i=e.gameTime;this.setStopEndTime(),this.lastChangeTargetTime=i+t,this.lastShootTime=i+s,this.behavior=c.moving}setRotateBehavior(){const{scene:e,rotateIntervalTimer:t,rotateSpeed:s}=this,i=e.gameTime;this.speed=0,this.rotateTimer=i+t,this.currentRotateSpeed=s+1,this.behavior=c.rotate}shoot(e,t=0){const{body:s,bulletSpeed:i,weaponDamage:r}=this,c=a.spreadRadians(e,t);this.scene.bullets.push(new h.SphereBullet(this.scene,new n.Vector(s.x,s.y),o.Owner.enemy,{speed:a.getOffsetToAngle(c,i),angle:c,sprite:"laser-red",explodeSprite:"red-explode",damage:r}))}destroy(){const{scene:e,body:t}=this;e.utils.tripleExplode(t.x,t.y),super.destroy()}}t.Hunter=l},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UFO=void 0;const i=s(0),n=s(1),a=s(3),o=s(2),r=s(9),h=s(10);var c;!function(e){e.moving="moving",e.stop="stop",e.attack="attack"}(c||(c={}));class l extends r.Enemy{constructor(e,t){super(e,o.EnemyName.ufo),this.weaponDamage=10,this.chanceToShoot=.25,this.lastShootTime=0,this.shootIntervalTime=1200,this.attackEndTime=0,this.attackIntervalTime=1e3,this.lastChangeTargetTime=0,this.changeTargetInterval=1e3,this.changeTargetIntervalRange=2e3,this.rotateSpeed=.5,this.maxSpeed=1,this.speed=1,this.speedIncrease=.02,this.stopEndTime=0,this.stopIntervalTime=1500,this.stopIntervalRangeTime=2500,this.coinChance=.9,this.bodySize=36,this.depth=50,this.scale=.7,this.hp=70,this.bulletSpeed=7,this.behavior=c.moving,this.body=e.physics.add.image(t.x,t.y,"enemy-ufo"),this.init(),this.defineTarget=this.defineTarget.bind(this),this.defineTarget()}init(){const{scale:e,depth:t,body:s,bodySize:i}=this;s.setScale(e),s.setImmovable(!0),s.setDepth(t);const n=a.getCenterBody(s.displayWidth,s.displayHeight,e,i);s.setCircle(i,n.x,n.y),this.setStopEndTime(!0)}act(e,t){this.update(e,t)}update(e,t){const{scene:s,body:i,lastShootTime:o,shootIntervalTime:r,chanceToShoot:h,behavior:l,speedIncrease:d,changeTargetInterval:u,changeTargetIntervalRange:p,stopEndTime:g}=this,m=s.player.body,y=s.gameTime;switch(this.updateBase(y,t),l){case c.moving:if(this.speed<this.maxSpeed&&(this.speed+=d),y>o&&(Math.random()>1-h&&this.shoot(a.getAngleBetween(new n.Vector(m.x,m.y),new n.Vector(i.x,i.y)),!1),this.lastShootTime=y+r),y>this.lastChangeTargetTime){this.defineTarget();const e=u+Math.random()*p;this.lastChangeTargetTime=y+e}y>g&&!this.isOutsideScene()&&(this.behavior=c.stop);break;case c.stop:this.speed>0?this.speed-=d:(this.attackEndTime=y+this.attackIntervalTime,this.behavior=c.attack);break;case c.attack:y>this.attackEndTime&&(this.circleAttack(),this.setMovingBehavior())}}updateBase(e,t){const{body:s,angle:o,targetAngle:r,rotateSpeed:h}=this,c=this.scene.getGameSize();this.body.angle+=this.speed;const l=a.angleToRadians(o),d=t/i.CONFIG.scene.delta;s.x+=this.speed*Math.cos(l)*d,s.y+=this.speed*Math.sin(l)*d,this.angle=a.getNearestAngle(o,r,h),(s.x<100||s.y<100||s.x>c.width-100||s.y>c.height-100)&&this.setTarget(new n.Vector(c.width/2,c.height/2))}defineTarget(){const e=this.scene.getGameSize(),t=new n.Vector(Math.random()*e.width,Math.random()*e.height);this.setTarget(t)}setTarget(e){const{body:t}=this;this.targetPos=e,this.targetAngle=a.angleToDegrees(a.getAngleBetween(this.targetPos,t))}setStopEndTime(e=!1){const{scene:t,stopIntervalTime:s,stopIntervalRangeTime:i}=this,n=t.gameTime;this.stopEndTime=n+s+a.getRandomInt(0,i)}setMovingBehavior(){const{scene:e,changeTargetInterval:t,shootIntervalTime:s}=this,i=e.gameTime;this.setStopEndTime(),this.lastChangeTargetTime=i+t,this.lastShootTime=i+s,this.behavior=c.moving}circleAttack(){const e=45*Math.random();for(let t=0;t<8;t++)this.shoot(a.angleToRadians(e+45*t),!0)}shoot(e,t=!0){const{body:s,bulletSpeed:i,weaponDamage:r}=this;this.scene.bullets.push(new h.SphereBullet(this.scene,new n.Vector(s.x,s.y),o.Owner.enemy,{speed:a.getOffsetToAngle(e,i),angle:e,sprite:t?"sphere-bullet":"laser-red",explodeSprite:"red-explode",damage:r,scale:t?.35:1,bodySize:t?32:12}))}destroy(){const{scene:e,body:t}=this;e.utils.tripleExplode(t.x,t.y),this.circleAttack(),super.destroy()}}t.UFO=l},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Flyer=void 0;const i=s(0),n=s(1),a=s(3),o=s(14),r=s(2),h=s(9),c=s(10);class l extends h.Enemy{constructor(e,t){super(e,r.EnemyName.flyer),this.maxSpeed=4,this.minSpeed=1,this.speed=2,this.speedChange=.1,this.rotateSpeed=2,this.bulletSpeed=7,this.lastShootTime=0,this.shootTime=1200,this.shootTimeInterval=200,this.weaponDamage=10,this.lastShadowTime=0,this.shadowTime=50,this.hp=50,this.coinChance=.9,this.bodySize=32,this.depth=50,this.scale=.6,this.body=e.physics.add.image(t.x,t.y,"enemy-flyer"),this.init(),this.defineRandomTargetPoint=this.defineRandomTargetPoint.bind(this),this.defineRandomTargetPoint()}init(){const{scale:e,depth:t,body:s,bodySize:i}=this;s.setScale(e),s.setImmovable(!0),s.setDepth(t);const n=a.getCenterBody(s.displayWidth,s.displayHeight,e,i);s.setCircle(i,n.x,n.y)}act(e,t){this.update(e,t)}update(e,t){this.updateWorldCollisions(e,t),this.updateBase(e,t),this.updateMovement(e,t),this.updateAttack(e,t),this.updateShadows()}updateBase(e,t){const{body:s,angle:n,targetAngle:o,rotateSpeed:r}=this;this.body.angle=n-90;const h=a.angleToRadians(n),c=t/i.CONFIG.scene.delta;s.x+=this.speed*Math.cos(h)*c,s.y+=this.speed*Math.sin(h)*c,this.angle=a.getNearestAngle(n,o,r)}updateMovement(e,t){const{speedChange:s,angle:i,targetAngle:n}=this;a.getAngleDiff(i,n)<3?this.speed<this.maxSpeed&&(this.speed+=s):this.speed>this.minSpeed&&(this.speed-=s)}updateAttack(e,t){const{scene:s,body:i,shootTime:o,shootTimeInterval:r}=this,h=s.gameTime;if(h>this.lastShootTime){const e=s.player.body,t=new n.Vector(e.x,e.y),c=a.getAngleBetween(t,new n.Vector(i.x,i.y));if(Math.random()>.1){const e=.25+.3*Math.random();this.shoot(c+e),this.shoot(c-e)}else this.shoot(c);this.lastShootTime=h+o+Math.random()*r}}updateShadows(){const{scene:e,lastShadowTime:t,shadowTime:s}=this,i=e.gameTime;i>t&&(this.lastShadowTime=i+s,this.createShadow())}createShadow(){const{scene:e,body:t,scale:s,angle:i}=this,a=.25*Math.max(this.maxSpeed-this.speed,0);e.effects.push(new o.Shadow(e,new n.Vector(t.x,t.y),{sprite:"enemy-flyer",lifeTime:250,scale:s,angle:i-90,alpha:.4-a}))}defineRandomTargetPoint(){const e=this.scene.getGameSize(),t=new n.Vector(Math.random()*e.width,Math.random()*e.height);this.setTarget(t)}setTarget(e){this.targetAngle=a.angleToDegrees(a.getAngleBetween(e,this.body))}shoot(e){const{body:t,bulletSpeed:s,weaponDamage:i}=this;this.scene.bullets.push(new c.SphereBullet(this.scene,new n.Vector(t.x,t.y),r.Owner.enemy,{speed:a.getOffsetToAngle(e,s),angle:e,sprite:"laser-red",explodeSprite:"red-explode",damage:i}))}onOutOfWorld(e){this.setTarget(e)}destroy(){const{scene:e,body:t}=this;e.utils.tripleExplode(t.x,t.y),super.destroy()}}t.Flyer=l},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLevelConfig=void 0;const i=s(25),n=s(2),a=s(3),o=e=>{switch(e.type){case n.GameMode.totalKills:{const t=e.target;return`Mission: kill ${t} ${a.pluralize(t,["invader","invaders","invaders"])}`}case n.GameMode.enemyKills:{const t=e.target;return"Mission: kill "+Object.keys(t).map(e=>{const s=t[e];return`${s} ${a.pluralize(s,i.ENEMIES_CONFIG[e].pluralName)}`}).join(" / ")}case n.GameMode.time:{const t=e.target;return`Mission: stay alive for ${t} ${a.pluralize(t,["second","seconds","seconds"])}`}case n.GameMode.waves:return`Mission: Defeat ${e.target.length} waves of enemies`}};t.getLevelConfig=e=>Object.assign(Object.assign({},e),{mission:o(e.mode)})},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BOOSTERS_CONFIG=void 0,t.BOOSTERS_CONFIG={spawnIntervalTime:12e3,spawnIntervalRangeTime:1e4,lifeTime:7e3,actionTime:1e4,types:{speed:{additionalSpeed:1},damage:{additionalXDamage:2},regenerator:{hpPerSecond:5}}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GameScene=void 0;var i=s(53);Object.defineProperty(t,"GameScene",{enumerable:!0,get:function(){return i.GameScene}})},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GameScene=void 0;const i=s(0),n=s(54),a=s(7),o=s(84),r=s(21),h=s(2),c=s(85),l=s(86),d=s(88);let u,p=!1;class g extends a.Scene{constructor(){super({key:h.SceneName.game}),this.enemies=[],this.bullets=[],this.effects=[],this.bonuses=[],this.dangerMeteors=[],this.instances=[],this.score=0,this.services=[],this.stats=d.getInitialGameData(),this.state={},this.isWon=!1,this.isFail=!1,this.gameTime=0}preload(){}init(e){this.params=e}create(){this.resetState();const e=this.getGameSize(),t=Math.random()>.5?"background-1":"background-2";this.physics.world.setBounds(0,0,e.width,e.height),this.background=this.add.image(0,0,t).setOrigin(0,0).setAlpha(.2),this.updateBackgroundColor(),u=this.add.graphics({lineStyle:{width:2,color:65280},fillStyle:{color:16711680}}),this.player=new o.Player(this),this.utils=new l.Utils(this),this.initListeners(),this.initServices(),this.initTimer(),i.isMobile&&this.initPointers(),this.shakeCamera=this.cameras.add(0,0,e.width,e.height),p=!0}initPointers(){const e=this.getGameSize();p||this.input.addPointer(1),this.input.on("pointerdown",t=>{const s=new Phaser.Geom.Circle(i.CONFIG.touchAreaOffset,e.height-i.CONFIG.touchAreaOffset,i.CONFIG.touchAreaSize),n=new Phaser.Geom.Circle(e.width-i.CONFIG.touchAreaOffset,e.height-i.CONFIG.touchAreaOffset,i.CONFIG.touchAreaSize),a=new Phaser.Geom.Circle(t.x,t.y,i.CONFIG.pointerSize);Phaser.Geom.Intersects.CircleToCircle(s,a)&&this.player.setPointer("left",t),Phaser.Geom.Intersects.CircleToCircle(n,a)&&this.player.setPointer("right",t)},this),this.input.on("pointerup",e=>{this.player.pointers.left===e&&(this.player.pointers.left=null),this.player.pointers.right===e&&(this.player.pointers.right=null)},this)}initTimer(){}onClockEvent(){}initListeners(){this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.M).on("down",()=>{this.player.body.active&&this.scene.start(h.SceneName.menu)})}initServices(){this.addService(n.StarsService,{count:20}),this.addService(n.MeteorsService,{}),this.addService(n.InterfaceService,{}),this.addService(n.LevelService,{}),this.addService(n.CometsService,{}),this.addService(n.BonusesService,{}),this.addService(n.DangerMeteorsService,{}),this.addService(n.FireflyService,{})}addService(e,t){this.services.push(new e(this,t))}update(e,t){u.clear(),this.gameTime+=t/i.CONFIG.scene.delta*15,i.isDev&&this.gameTime%2e3<15&&(console.group(),console.log("Game: ",this),console.log("Enemies count: ",this.enemies.length),console.log("Bullets count: ",this.bullets.length),console.log("Effects count: ",this.effects.length),console.log("Services count: ",this.services.length),console.log("Bonuses count: ",this.bonuses.length),console.log("Danger meteors count: ",this.dangerMeteors.length),console.log("Instances count: ",this.instances.length),console.groupEnd()),this.enemies.forEach(s=>{s.act(e,t)}),this.bullets.forEach(s=>{s.act(e,t)}),this.effects.forEach(e=>{e.act()}),this.services.forEach(s=>{s.act(e,t)}),this.bonuses.forEach(e=>{e.act()}),this.dangerMeteors.forEach(s=>{s.act(e,t)}),this.instances.forEach(s=>{s.act(e,t)}),this.player.act(e,t)}resetState(){this.bullets=[],this.enemies=[],this.effects=[],this.bonuses=[],this.dangerMeteors=[],this.instances=[],this.state={},this.score=0,this.text="",this.services=[],this.stats=d.getInitialGameData(),this.isWon=!1,this.isFail=!1,this.gameTime=0}onFail(){this.isFail=!0,setTimeout(()=>{this.scene.start(h.SceneName.fail)},i.CONFIG.scene.failTimeoutTime)}onWin(){this.isWon||this.isFail||(this.isWon=!0,setTimeout(()=>{this.isFail||this.scene.start(h.SceneName.win,{score:this.score,isFlawlessVictory:this.player.hp===this.player.maxHp})},i.CONFIG.scene.winTimeoutTime))}shakeScreen(){this.shakeCamera.shake(500,.003)}updateBackgroundColor(){this.background.setTint(r.getRandomHexColor(),r.getRandomHexColor(),r.getRandomHexColor(),r.getRandomHexColor())}isBoosterActive(){return null!==this.player.currentBooster}getActiveBooster(){return this.player.currentBooster}getStats(){return this.stats}setState(e,t){this.state[e]=t}}t.GameScene=g,g.prototype.preload=c.preload},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Service=t.FireflyService=t.DangerMeteorsService=t.BonusesService=t.CometsService=t.LevelService=t.InterfaceService=t.LoggerService=t.MeteorsService=t.StarsService=void 0;var i=s(55);Object.defineProperty(t,"StarsService",{enumerable:!0,get:function(){return i.StarsService}});var n=s(57);Object.defineProperty(t,"MeteorsService",{enumerable:!0,get:function(){return n.MeteorsService}});var a=s(59);Object.defineProperty(t,"LoggerService",{enumerable:!0,get:function(){return a.LoggerService}});var o=s(60);Object.defineProperty(t,"InterfaceService",{enumerable:!0,get:function(){return o.InterfaceService}});var r=s(66);Object.defineProperty(t,"LevelService",{enumerable:!0,get:function(){return r.LevelService}});var h=s(72);Object.defineProperty(t,"CometsService",{enumerable:!0,get:function(){return h.CometsService}});var c=s(74);Object.defineProperty(t,"BonusesService",{enumerable:!0,get:function(){return c.BonusesService}});var l=s(76);Object.defineProperty(t,"DangerMeteorsService",{enumerable:!0,get:function(){return l.DangerMeteorsService}});var d=s(78);Object.defineProperty(t,"FireflyService",{enumerable:!0,get:function(){return d.FireflyService}});var u=s(4);Object.defineProperty(t,"Service",{enumerable:!0,get:function(){return u.Service}})},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StarsService=void 0;const i=s(56),n=s(4);class a extends n.Service{constructor(e,t){super(e),this.stars=[],this.params=t,this.init()}init(){const{scene:e}=this,{count:t}=this.params;for(let s=0;s<t;s++)this.stars.push(new i.Star(e,{initialAlphaCoef:500*s}))}act(e,t){this.update(e,t)}update(e,t){this.stars.forEach(s=>{s.act(e,t)})}}t.StarsService=a},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Star=void 0;t.Star=class{constructor(e,t){const s=e.getGameSize();this.scene=e,this.body=e.add.sprite(Math.random()*s.width,Math.random()*s.height,"star"),this.initialCoef=t.initialAlphaCoef,this.body.setDepth(0),this.body.setScale(.25+.25*Math.random())}act(e,t){this.update(e,t)}update(e,t){const{scene:s,body:i,initialCoef:n,lastRelocationTime:a}=this,o=s.gameTime;i.angle+=4,i.alpha=Math.sin((o+n)/1500);const r=this.scene.getGameSize();o>a&&i.alpha<=.5&&(i.x=Math.random()*r.width,i.y=Math.random()*r.height,this.lastRelocationTime=o+1e3)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MeteorsService=void 0;const i=s(0),n=s(1),a=s(58),o=s(8),r=s(3),h=s(4);class c extends h.Service{constructor(e,t){super(e),this.meteors=[],this.meteorIntervalTime=1e3,this.meteorIntervalTimeRange=1e3,this.lastMeteorTime=0,this.maxCount=25,this.params=t,this.init()}init(){for(let e=0;e<r.getRandomInt(5,8);e++)this.spawnMeteor({outside:!1});for(let e=0;e<r.getRandomInt(3,5);e++)this.spawnMeteor({outside:!0})}act(e,t){this.update(e,t)}update(e,t){const s=this.scene.getGameSize(),{scene:n,maxCount:a}=this,o=t/i.CONFIG.scene.delta;n.gameTime>this.lastMeteorTime&&this.meteors.length<a&&this.spawnMeteor({outside:!0}),this.meteors.forEach(e=>{const{body:t,speed:i}=e;t.angle+=.5*i.x*o,t.x+=i.x*o,t.y+=i.y*o,(t.x>s.width+200||t.y>s.height+200)&&(this.meteors=this.meteors.filter(t=>t!==e),t.destroy())})}spawnMeteor({outside:e}){const{scene:t,meteorIntervalTime:s,meteorIntervalTimeRange:i}=this,r=t.gameTime,h=.5+1*Math.random(),c=this.scene.getGameSize(),l=o.angleToRadians(45),d=.25+2.5*Math.random(),u=new n.Vector(d*Math.cos(l),d*Math.sin(l)),p=Math.random()>.5?"x":"y",g=e?{x:"x"===p?Math.random()*(.75*c.width)-200:-200,y:"y"===p?Math.random()*(.75*c.height)-200:-200}:{x:c.width*Math.random(),y:c.height*Math.random()};this.meteors.push(new a.Meteor(t,g,u,{spriteIndex:1+Math.floor(4*Math.random()),alpha:.15+.4*Math.random(),scale:h})),this.lastMeteorTime=Math.random()*i+r+s*h}}t.MeteorsService=c},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Meteor=void 0;t.Meteor=class{constructor(e,t,s,i){this.scene=e,this.body=e.add.sprite(t.x,t.y,"meteor-"+i.spriteIndex),this.speed=s,this.body.setAlpha(i.alpha),this.body.setDepth(5),this.body.setScale(i.scale,i.scale)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoggerService=void 0;const i=s(4);class n extends i.Service{constructor(e,t){super(e),this.lastLogTime=0,this.params=t,this.init()}init(){}act(){this.update()}update(){const e=this.scene,t=e.gameTime;t>this.lastLogTime&&(console.group("Stats"),console.log("effects: "+e.effects.length),console.log("enemies: "+e.enemies.length),console.log("bullets: "+e.bullets.length),console.groupEnd(),this.lastLogTime=t+2e3)}}t.LoggerService=n},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InterfaceService=void 0;const i=s(0),n=s(1),a=s(2),o=s(6),r=s(5),h=s(4),c={[a.EBoosterType.damage]:r.COLORS.red,[a.EBoosterType.speed]:r.COLORS.yellow,[a.EBoosterType.regenerator]:r.COLORS.green,[a.EBoosterType.shield]:r.COLORS.aqua};class l extends h.Service{constructor(e,t){super(e),this.innerTime=0,this.booster={},this.backgroundParams={initialAlpha:0,changeTime:15e3,canChangeColor:!1},this.params=t,this.init()}init(){const{scene:e}=this,t=this.scene.getGameSize();this.innerTime=e.gameTime,this.graphics=e.add.graphics({lineStyle:{width:2,color:65280},fillStyle:{color:16775926}}),this.counterText=e.add.bitmapText(t.width-17,30,"atari","0",24).setOrigin(1,.5).setDepth(500),this.scoreText=new o.UICosmons(e,{pos:new n.Vector(243,30),value:0,isCentered:!1,depth:100}),this.playerHealthbar=new Phaser.Geom.Rectangle(20,27,t.width,11),this.graphics.setDepth(500),this.initBooster(),this.backgroundParams.initialAlpha=Math.random()*(5*this.backgroundParams.changeTime),i.isMobile&&this.initTouchAreas()}initBooster(){this.booster.graphics=this.scene.add.graphics({lineStyle:{width:2,color:16763904}}).setDepth(500),this.booster.image=this.scene.add.image(261,32,"bonus-speed").setScale(.6).setDepth(500),this.booster.progressCircle=new Phaser.Geom.Circle(400,300,50)}initTouchAreas(){const e=this.scene.getGameSize();this.scene.add.image(i.CONFIG.touchAreaOffset,e.height-i.CONFIG.touchAreaOffset,"touch-area").setScale(.022*i.CONFIG.touchAreaSize),this.scene.add.image(e.width-i.CONFIG.touchAreaOffset,e.height-i.CONFIG.touchAreaOffset,"touch-area").setScale(.022*i.CONFIG.touchAreaSize)}act(e,t){this.draw(),this.update(e,t)}draw(){const{graphics:e}=this;e.clear(),this.booster.graphics.clear(),this.drawHealthbar(),this.drawCosmons(),this.drawBoosters(),i.isMobile&&this.drawPointers()}update(e,t){this.updateBackground(e,t)}updateBackground(e,t){const{scene:s,innerTime:n,backgroundParams:a}=this;if(s.state.isBloodyNight)return;this.innerTime+=t/i.CONFIG.scene.delta*15;const o=.25*(1+Math.sin((a.initialAlpha+n)/a.changeTime));o>.4?this.backgroundParams.canChangeColor=!0:this.backgroundParams.canChangeColor&&o<.01&&(this.backgroundParams.canChangeColor=!1,s.updateBackgroundColor()),s.background.setAlpha(o)}drawHealthbar(){const{graphics:e,scene:t,playerHealthbar:s}=this,{player:i}=t;e.fillStyle(r.COLORS.red),s.width=200,e.fillRectShape(s),e.fillStyle(r.COLORS.green),s.width=Math.max(i.hp/i.maxHp*200,0),e.fillRectShape(s),e.lineStyle(2,r.COLORS.white),s.width=200,e.strokeRectShape(s)}drawCosmons(){const{scene:e,counterText:t,scoreText:s}=this;t.setText(e.text),s.updateValue(e.score),e.isBoosterActive()?s.updatePosition(new n.Vector(295,30)):s.updatePosition(new n.Vector(243,30))}drawBoosters(){const{scene:e,booster:t}=this,{gameTime:s,player:n}=e,{graphics:a}=t;if(e.isBoosterActive()){t.image.visible=!0;const o=e.getActiveBooster();t.image.setTexture(o);const r=(n.boosterParams.endTime-s)/i.CONFIG.boosters.actionTime,h=(270+Math.min(360-360*r,360))%360,l=270;a.lineStyle(2,c[o]),a.beginPath(),a.arc(261,32,20,Phaser.Math.DegToRad(h),Phaser.Math.DegToRad(l),!1),a.strokePath()}else t.image.visible=!1}drawPointers(){const{graphics:e,scene:t}=this,s=t.player.pointers,n=this.scene.input.pointer1,a=this.scene.input.pointer2;!n.isDown||s.left!==n&&s.right!==n||e.strokeCircle(n.x,n.y,i.CONFIG.pointerSize),!a.isDown||s.left!==a&&s.right!==a||e.strokeCircle(a.x,a.y,i.CONFIG.pointerSize)}}t.InterfaceService=l},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UIRectButton=t.UIArcButton=void 0;var i=s(62);Object.defineProperty(t,"UIArcButton",{enumerable:!0,get:function(){return i.UIArcButton}});var n=s(63);Object.defineProperty(t,"UIRectButton",{enumerable:!0,get:function(){return n.UIRectButton}})},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UIArcButton=void 0;const i=s(5);t.UIArcButton=class{constructor(e,t){this.scene=e,this.params=t,this.init()}init(){const{scene:e,params:t}=this,s=new Phaser.Geom.Circle(t.x,t.y,t.arc),n=e.add.graphics({lineStyle:{width:2,color:i.COLORS.white},fillStyle:{color:i.COLORS.white}}).setInteractive(s,Phaser.Geom.Circle.Contains);n.on("pointerdown",()=>{var e,s;null===(s=null===(e=t.callbacks)||void 0===e?void 0:e.onPointerDown)||void 0===s||s.call(e)}),n.strokeCircleShape(s),t.render()}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UIRectButton=void 0;const i=s(5);t.UIRectButton=class{constructor(e,t){this.scene=e,this.params=t,this.init()}init(){const{scene:e,params:t}=this,s=t.x-t.width/2,n=t.y-t.height/2,a=new Phaser.Geom.Rectangle(s,n,t.width,t.height),o=t.disabled?.5:1;this.graphics=e.add.graphics({lineStyle:{width:2,color:i.COLORS.white},fillStyle:{color:i.COLORS.white}}).setInteractive(a,Phaser.Geom.Rectangle.Contains).setAlpha(o),this.graphics.strokeRectShape(a),this.text=e.add.bitmapText(t.x,t.y,"atari",t.text,16).setOrigin(.5).setCenterAlign().setAlpha(o),this.initListeners(a)}initListeners(e){const{graphics:t,params:s,text:n}=this;t.on("pointerdown",()=>{var e,t;s.disabled||null===(t=null===(e=s.callbacks)||void 0===e?void 0:e.onPointerDown)||void 0===t||t.call(e)}),t.on("pointerover",()=>{s.disabled||(t.lineStyle(2,i.COLORS.green),n.tint=i.COLORS.green,document.body.style.cursor="pointer",t.strokeRectShape(e))}),t.on("pointerout",()=>{s.disabled||(t.lineStyle(2,i.COLORS.white),n.tint=i.COLORS.white,document.body.style.cursor="default",t.strokeRectShape(e))}),t.on("pointerdown",()=>{document.body.style.cursor="default"})}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UICosmons=void 0;const i=s(27);class n extends i.UIComponent{constructor(e,t){super(e),this.params=t,this.init()}init(){const{scene:e,params:t}=this,{value:s,pos:i,depth:n,prefix:a}=t;this.starImage=e.add.image(0,0,"coin-gold").setOrigin(0,.5).setDepth(n),this.prefixBitmapText=new Phaser.GameObjects.BitmapText(e,0,0,"atari",a,22).setOrigin(0,.5).setDepth(n),a&&e.add.existing(this.prefixBitmapText),this.valueText=e.add.bitmapText(0,0,"atari",s.toString(),22).setOrigin(0,.5).setDepth(n),this.updatePosition(i)}centerComponentPosition(){const{params:e}=this,{prefix:t}=e,s=t?12:0,i=(this.starImage.width+12+this.valueText.width+s)/2;this.starImage.x-=i,this.valueText.x-=i,this.prefixBitmapText.x-=i}updatePosition(e){const{params:t}=this,{isCentered:s,prefix:i}=t,n=i?12:0;this.starImage.x===e.x&&this.starImage.y===e.y||(this.starImage.x=e.x,this.starImage.y=e.y,this.prefixBitmapText.x=e.x+this.starImage.width+12-4,this.prefixBitmapText.y=e.y+4+1,this.valueText.x=e.x+this.starImage.width+12+n,this.valueText.y=e.y+4,s&&this.centerComponentPosition())}updateValue(e){this.valueText.setText(e.toString())}}t.UICosmons=n},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UIRainbowText=void 0;const i=s(5),n=s(27),a={fontSize:23,color:i.COLORS.green};class o extends n.UIComponent{constructor(e,t){super(e),this.rainbowColorIdx=0,this.rainbowColorOffset=0,this.delay=0,this.rainbowWave=0,this.params=Object.assign(Object.assign({},a),t),this.init()}init(){const{scene:e}=this,{text:t,pos:s,color:i,fontSize:n}=this.params;this.rainbowCallback=this.rainbowCallback.bind(this);const a=e.add.dynamicBitmapText(s.x,s.y,"atari",t,n).setOrigin(.5).setCenterAlign();a.setDisplayCallback(this.rainbowCallback),a.tint=i}update(){this.updateRainbow()}updateRainbow(){this.rainbowColorIdx=0,6==this.delay++&&(this.rainbowColorOffset=(this.rainbowColorOffset+1)%4,this.delay=0)}rainbowCallback(e){const{color:t}=this.params;return e.color=t,this.rainbowColorIdx=(this.rainbowColorIdx+1)%4,e.y=2*Math.cos(this.rainbowWave+this.rainbowColorIdx),this.rainbowWave+=.005,e}}t.UIRainbowText=o},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LevelService=void 0;const i=s(67),n=s(4);class a extends n.Service{constructor(e,t){super(e),this.params=t,this.init()}init(){const{scene:e}=this,t=e.params.level;this.currentLevel=new i.levels[t](e)}act(){this.update()}update(){const{scene:e,currentLevel:t}=this,s=t.checkForWin();e.text=t.getTextByMode(),t.update(),s&&e.onWin()}}t.LevelService=a},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.levels=void 0;const i=s(68),n=s(69),a=s(70),o=s(71);t.levels=[i.Level1,n.Level2,a.Level3,o.Level4]},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Level1=void 0;const i=s(13),n=s(15);class a extends n.Level{constructor(e){super(e,0),this.nextAttemptTimeInterval=1500}makeAttempt(){const{scene:e}=this,{enemies:t}=e,s=e.getStats(),n=this.mode,a=s.totalKills>Math.ceil(.66*n.target)?5:4;(t.length<3||t.length<a&&Math.random()>.8)&&this.createEnemy(i.Bot)}}t.Level1=a},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Level2=void 0;const i=s(13),n=s(2),a=s(15);class o extends a.Level{constructor(e){super(e,1),this.nextAttemptTimeInterval=1500}makeAttempt(){const{scene:e}=this,{enemies:t}=e,s=e.getStats(),i=this.mode,n=s.kills.hunter>Math.ceil(i.target.hunter/2)?.4:0;(t.length<3||t.length<4&&Math.random()>.75-n)&&this.spawnEnemy()}spawnEnemy(){const{scene:e}=this,t=e.getStats(),s=e.enemies.filter(e=>e.name===n.EnemyName.hunter).length,a=Math.floor(t.kills.bot/3)>t.kills.hunter+s;Math.random()>.3&&!a||s>=2?this.createEnemy(i.Bot):this.createEnemy(i.Hunter)}}t.Level2=o},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Level3=void 0;const i=s(13),n=s(2),a=s(15);class o extends a.Level{constructor(e){super(e,2),this.nextAttemptTimeInterval=1200,this.additionalTime=0,this.additionalTimeInterval=5e3,this.additionalTime=e.gameTime+this.additionalTimeInterval}update(){const{scene:e,additionalTime:t,additionalTimeInterval:s}=this;e.gameTime>t&&(this.spawnEnemy(!0),this.additionalTime=e.gameTime+s),super.update()}makeAttempt(){const{scene:e}=this,{enemies:t}=e;t.length<3&&this.spawnEnemy()}spawnEnemy(e=!1){const{scene:t}=this,s=Math.random(),a=t.enemies.filter(e=>e.name===n.EnemyName.hunter).length+t.enemies.filter(e=>e.name===n.EnemyName.ufo).length;s>.7&&(a<2||e)?this.createEnemy(i.UFO):s>.3&&(a<2||e)?this.createEnemy(i.Hunter):this.createEnemy(i.Bot)}}t.Level3=o},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Level4=void 0;const i=s(15);class n extends i.Level{constructor(e){super(e,3),this.nextAttemptTimeInterval=1500}update(){super.update()}}t.Level4=n},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CometsService=void 0;const i=s(0),n=s(73),a=s(28),o=s(5),r=s(4);class h extends r.Service{constructor(e,t){super(e),this.comets=[],this.state="waiting",this.isBloodyNight=!1,this.endSpawningTime=0,this.nextSpawningTime=0,this.params=t,this.handleAlertShowed=this.handleAlertShowed.bind(this),this.init()}init(){const{scene:e}=this;for(let t=0;t<15;t++)this.comets.push(new n.Comet(e,{}))}act(e,t){this.update(e,t),this.updateAlert()}update(e,t){const{scene:s,state:n}=this,{gameTime:a}=s,o=s.getGameSize(),r=t/i.CONFIG.scene.delta;switch(this.comets.forEach(e=>{const{body:t}=e;t.y+=e.speed*r,t.y>o.height+100&&(e.updateParams(this.isBloodyNight),e.refreshPosition())}),n){case"waiting":a>this.nextSpawningTime&&s.background.alpha<.03&&!s.state.isAlertShowing&&(this.state="checked",Math.random()>.5?this.showAlert():(this.state="waiting",this.nextSpawningTime=a+3e4));break;case"spawning":a>this.endSpawningTime&&(this.state="waiting",this.alert=null,s.setState("isBloodyNight",!1),this.nextSpawningTime=a+3e4,this.isBloodyNight=!1)}}updateAlert(){var e;null===(e=this.alert)||void 0===e||e.act()}handleAlertShowed(){const{scene:e}=this;this.isBloodyNight=!0,this.endSpawningTime=e.gameTime+2e4+1e4*Math.random(),this.state="spawning",e.setState("isBloodyNight",!0)}showAlert(){const{scene:e}=this;this.alert=new a.Alert(e,{onFinished:this.handleAlertShowed,tint:o.COLORS.red})}}t.CometsService=h},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Comet=void 0;const i=s(5),n=s(3);t.Comet=class{constructor(e,t){this.speed=3,this.isBloody=!1;const s=e.getGameSize();this.scene=e,this.body=this.scene.physics.add.image(n.getRandomInt(0,s.width),n.getRandomInt(0,s.height),"comet"),this.body.setImmovable(!0),this.updateParams(!1),this.initCollisions()}initCollisions(){const{scene:e}=this;e.physics.add.collider(this.body,e.player.body,()=>{this.isBloody&&e.player.destroy()})}updateParams(e){const{body:t}=this,s=.75+.5*Math.random();this.speed=n.getRandomInt(3,7),this.body.setCircle(16,-8,110+20*s),e?(t.setTint(i.COLORS.red),t.setScale(.3,.75+.5*Math.random()),t.setAlpha(1),this.isBloody=!0):(t.setAlpha(.03+.1*Math.random()),t.setScale(.2,s),this.isBloody=!1,t.setTint(i.COLORS.white))}refreshPosition(){const{body:e}=this,t=this.scene.getGameSize();e.x=n.getRandomInt(0,t.width),e.y=-100}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BonusesService=void 0;const i=s(0),n=s(1),a=s(75),o=s(29),r=s(16),h=s(4);class c extends h.Service{constructor(e,t){super(e),this.nextSpawnTime=0,this.params=t,this.init()}init(){this.updateNextSpawnTime()}act(e,t){this.update(e,t)}update(e,t){const{scene:s}=this,{gameTime:i}=s;i>=this.nextSpawnTime&&(this.spawnBonus(),this.updateNextSpawnTime())}spawnBonus(){const{scene:e}=this,t=e.getGameSize(),s=o.BOOSTER_MAP[r.getRandomInt(0,3)];e.bonuses.push(new a.Booster(e,new n.Vector(r.getRandomInt(50,t.width-50),r.getRandomInt(100,t.height-50)),s))}updateNextSpawnTime(){const{scene:e}=this,{gameTime:t}=e,{spawnIntervalTime:s,spawnIntervalRangeTime:n}=i.CONFIG.boosters;this.nextSpawnTime=t+s+Math.random()*n}}t.BonusesService=c},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Booster=t.Bonus=void 0;var i=s(18);Object.defineProperty(t,"Bonus",{enumerable:!0,get:function(){return i.Bonus}});var n=s(29);Object.defineProperty(t,"Booster",{enumerable:!0,get:function(){return n.Booster}})},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DangerMeteorsService=void 0;const i=s(28),n=s(77),a=s(16),o=s(4);class r extends o.Service{constructor(e,t){super(e),this.nextModeTime=0,this.meteorsSpawnTime=[],this.state="initial",this.params=t,this.handleAlertShowed=this.handleAlertShowed.bind(this),this.init()}init(){this.updateNextModeTime(1e4,6e4)}act(){const{scene:e,state:t,nextModeTime:s}=this,{gameTime:i}=this.scene;switch(t){case"initial":i>=s&&!e.state.isAlertShowing&&this.setState("alert");break;case"spawn":this.updateMeteors()}this.updateAlert()}updateNextModeTime(e=3e4,t=3e4){const{scene:s}=this,{gameTime:i}=s;this.nextModeTime=i+e+t*Math.random()}updateMeteors(){const{nextModeTime:e,meteorsSpawnTime:t}=this,{gameTime:s}=this.scene,i=s-e;t.length<=0?this.setState("initial"):i>t[t.length-1]&&(t.pop(),this.spawnMeteor())}prepareMeteors(){const{nextModeTime:e}=this,{gameTime:t}=this.scene,s=t-e,i=10+a.getRandomInt(0,10);let n=s;for(let e=0;e<i;e++)this.meteorsSpawnTime.push(n),n+=2e3;this.meteorsSpawnTime=this.meteorsSpawnTime.reverse()}spawnMeteor(){this.scene.dangerMeteors.push(new n.DangerMeteor(this.scene))}setState(e){switch(e){case"initial":this.updateNextModeTime(),this.alert=null;break;case"alert":this.showAlert();break;case"spawn":this.prepareMeteors()}this.state=e}updateAlert(){var e;null===(e=this.alert)||void 0===e||e.act()}handleAlertShowed(){this.setState("spawn")}showAlert(){const{scene:e}=this;this.alert=new i.Alert(e,{onFinished:this.handleAlertShowed})}}t.DangerMeteorsService=r},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DangerMeteor=void 0;const i=s(0),n=s(1),a=s(3);t.DangerMeteor=class{constructor(e){this.scene=e,this.init()}init(){const{scene:e}=this,t=this.getSpawnPoint(),s=1+Math.floor(4*Math.random()),i=.5+1*Math.random(),o=.8+.4*Math.random();this.speed=new n.Vector(o,o),this.body=e.physics.add.image(t.x,t.y,"meteor-"+s),this.body.setDepth(5),this.body.setImmovable(!0),this.body.setScale(i,i);const r=20+16*i,h=a.getCenterBody(this.body.displayWidth,this.body.displayHeight,i,r);this.body.setCircle(r,h.x,h.y),this.initCollisions()}initCollisions(){const{scene:e}=this;e.physics.add.collider(this.body,e.player.body,()=>{e.player.destroy()}),e.enemies.forEach(t=>{e.physics.add.collider(this.body,t.body,()=>{t.destroy()})}),e.bullets.forEach(t=>{e.physics.add.collider(this.body,t.body,()=>{t.explode()})})}act(e,t){const{body:s,speed:n}=this,a=this.scene.getGameSize(),o=t/i.CONFIG.scene.delta;s.angle+=.5*n.x*o,s.x+=n.x*o,s.y+=n.y*o,(s.x>a.width+200||s.y>a.height+200)&&this.destroy()}getSpawnPoint(){const e=this.scene.getGameSize(),t=Math.random()>.5?"x":"y";return new n.Vector("x"===t?Math.random()*(.75*e.width)-200:-200,"y"===t?Math.random()*(.75*e.height)-200:-200)}destroy(){const{body:e}=this;this.scene.dangerMeteors=this.scene.dangerMeteors.filter(e=>e!==this),e.destroy()}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FireflyService=void 0;const i=s(1),n=s(79),a=s(4);class o extends a.Service{constructor(e,t){super(e),this.nextSpawnTime=0,this.params=t,this.updateNextSpawnTime()}act(e,t){this.update(e,t)}update(e,t){const{scene:s}=this,{gameTime:i}=s;this.scene.getStats().firefliersKilled<3&&i>=this.nextSpawnTime&&(this.spawnFirefly(),this.updateNextSpawnTime())}updateNextSpawnTime(e=2e4,t=4e4){const{scene:s}=this,{gameTime:i}=s;this.nextSpawnTime=i+e+t*Math.random()}spawnFirefly(){const{scene:e}=this,t=this.scene.getGameSize(),s=this.scene.getStats(),a=new n.Firefly(e,{pos:new i.Vector(t.width*Math.random(),t.height*Math.random())});s.firefliersKilled+=1,this.scene.instances.push(a)}}t.FireflyService=o},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Firefly=void 0;const i=s(0),n=s(1),a=s(3),o=s(2),r=s(80);t.Firefly=class{constructor(e,t){this.lastChangeTargetTime=0,this.changeTargetInterval=500,this.changeTargetIntervalRange=500,this.hp=4,this.scale=.5,this.bodySize=28,this.speed=3,this.rotateSpeed=2,this.angle=0,this.targetAngle=0,this.scene=e,this.params=t,this.init()}init(){const{scene:e,params:t,scale:s}=this,i=e.gameTime;this.body=e.physics.add.image(t.pos.x,t.pos.y,"firefly"),this.body.setScale(s),this.body.setDepth(10),this.body.setImmovable(!0),this.body.setAlpha(0),this.lifeTime=i+5e3+5e3*Math.random(),this.initCollisions()}initCollisions(){const{scene:e}=this;e.bullets.forEach(t=>{e.physics.add.collider(this.body,t.body,()=>{t.owner===o.Owner.player&&this.damage()})})}act(e,t){this.update(e,t)}update(e,t){const{scene:s,lifeTime:i}=this,n=s.gameTime;n>this.lastChangeTargetTime&&this.updateTarget(),this.updateBase(e,t),this.updateBodySize(),n>=i?this.body.alpha>.008?this.body.setAlpha(this.body.alpha-.008):this.destroy():this.body.alpha<1&&this.body.setAlpha(this.body.alpha+.008)}updateBase(e,t){const{body:s,angle:n,targetAngle:o,rotateSpeed:r}=this;this.body.angle=n-90;const h=a.angleToRadians(n),c=t/i.CONFIG.scene.delta;s.x+=this.speed*Math.cos(h)*c,s.y+=this.speed*Math.sin(h)*c,this.angle=a.getNearestAngle(n,o,r)}updateBodySize(){const{scene:e,scale:t,bodySize:s}=this,{gameTime:i}=e,n=t+.02*Math.sin(i/200);this.body.setScale(n);const o=a.getCenterBody(this.body.displayWidth,this.body.displayHeight,n,s);this.body.setCircle(s,o.x,o.y)}updateTarget(){const{scene:e,changeTargetInterval:t,changeTargetIntervalRange:s}=this,i=e.gameTime;this.defineTarget();const n=t+Math.random()*s;this.lastChangeTargetTime=i+n}defineTarget(){const e=this.scene.getGameSize(),t=new n.Vector(Math.random()*e.width,Math.random()*e.height);this.setTarget(t)}setTarget(e){const{body:t}=this;this.targetAngle=a.angleToDegrees(a.getAngleBetween(e,t))}onDamage(){this.speed+=1,this.changeTargetInterval-=100,this.changeTargetIntervalRange-=100,this.updateTarget()}damage(){const{scene:e,body:t}=this;this.hp-=1,this.onDamage(),this.hp<=0&&(this.destroy(),e.effects.push(new r.FireflyExplode(e,{pos:new n.Vector(t.x,t.y),scale:t.scale})))}destroy(){const{body:e}=this;this.scene.instances=this.scene.instances.filter(e=>e!==this),e.destroy()}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FireflyExplode=void 0;const i=s(1),n=s(3),a=s(11);class o extends a.Effect{constructor(e,t){super(e),this.body=new Phaser.GameObjects.Image(e,t.pos.x,t.pos.y,"firefly"),this.params=t,this.init()}init(){const{scene:e,params:t}=this;this.startTime=e.gameTime,this.body.setScale(t.scale),e.add.existing(this.body),this.spawnCoins(),e.cameras.main.flash(3e3)}act(){this.update()}update(){const{scene:e,params:t,startTime:s}=this,i=e.gameTime-s,n=t.scale+i/100;this.body.setScale(n,n),this.body.setAlpha(Math.max(0,1-i/500)),this.body.alpha<=0&&this.destroy()}spawnCoins(){const{scene:e}=this,t=e.getGameSize();for(let s=0;s<10;s++)e.utils.spawnCoin({pos:new i.Vector(n.getRandomInt(50,t.width-50),n.getRandomInt(100,t.height-50)),lifeTimeRange:3e3})}}t.FireflyExplode=o},function(e,t,s){"use strict";const i=r;!function(e,t){const s=r,i=e();for(;;)try{if(841059===-parseInt(s(298))/1*(parseInt(s(304))/2)+parseInt(s(296))/3+-parseInt(s(307))/4*(-parseInt(s(310))/5)+parseInt(s(311))/6*(-parseInt(s(312))/7)+-parseInt(s(305))/8+-parseInt(s(313))/9+parseInt(s(301))/10)break;i.push(i.shift())}catch(e){i.push(i.shift())}}(h),Object[i(306)](t,i(295),{value:!0}),t.StorageService=void 0;const n=s(3),a=s(22);class o{static[i(308)](e){const t=i;try{n.storage[t(300)](a[t(293)],n.getCryptedValue(JSON[t(294)](e)))}catch(e){}}static[i(297)](){const e=i;try{const t=n[e(302)][e(309)](a[e(293)]);if(t)return JSON.parse(n[e(303)](t))}catch(e){}}}function r(e,t){const s=h();return(r=function(e,t){return s[e-=293]})(e,t)}function h(){const e=["StorageService","set","41851500AKRaiM","storage","getDecryptedValue","38312rAiCxh","7817744aDDQJD","defineProperty","4wmGisn","setData","get","1355845ljGScL","4373514sWGslg","7vRilVc","13438764DHOIHs","LS_DATA_KEY","stringify","__esModule","2142831HzUKtv","getData","59FkXZaX"];return(h=function(){return e})()}t[i(299)]=o},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Game=void 0;const i=s(19),n=s(26),a=s(83);class o extends Phaser.Game{constructor(e){super(e),this.data=n.INITIAL_GAME_DATA,a.default.call(this,i.StorageService)}}t.Game=o},function(e,t,s){"use strict";const i=a;function n(){const e=["635106RWWSKp","score","default","4732672JNqyQb","getData","9284693kMrQrj","529196GdKRAP","49QGpwvO","defineProperty","1319388sNwAtH","20QaRWVJ","data","26065NUaNBG","564qlXpCL","level","3mxrbkA","590157oyMEIV"];return(n=function(){return e})()}function a(e,t){const s=n();return(a=function(e,t){return s[e-=500]})(e,t)}!function(e,t){const s=a,i=e();for(;;)try{if(682895===parseInt(s(510))/1*(-parseInt(s(501))/2)+parseInt(s(504))/3+-parseInt(s(508))/4*(parseInt(s(507))/5)+-parseInt(s(512))/6*(-parseInt(s(502))/7)+-parseInt(s(515))/8+-parseInt(s(511))/9+parseInt(s(505))/10*(parseInt(s(500))/11))break;i.push(i.shift())}catch(e){i.push(i.shift())}}(n),Object[i(503)](t,"__esModule",{value:!0}),t[i(514)]=function(e){const t=i,s=e[t(516)]();if(s&&s.score&&s[t(509)]){const e=this[t(506)];e[t(509)]=s[t(509)],e[t(513)]=s.score}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Player=void 0;const i=s(8),n=s(8),a=s(0),o=s(1),r=s(14),h=s(2),c=s(3),l=s(10);let d,u,p,g;t.Player=class{constructor(e){this.scale=.6,this.bodySize=26,this.hp=100,this.maxHp=100,this.speed=5,this.maxSpeed=5,this.bulletSpeed=10,this.lastShootTime=0,this.shootTime=320,this.weaponDamage=10,this.pointers={left:null,right:null},this.prevPointersPos={left:{x:0,y:0},right:{x:0,y:0}},this.pointerValues={isLeftTouched:!1,isRightTouched:!1,left:{x:0,y:0},right:{x:0,y:0}},this.angle=0,this.targetAngle=0,this.rotateSpeed=5,this.currentBooster=null,this.boosterParams={endTime:0,nextShadowTime:0,nextRegenerationTime:0},this.shieldBodySize=80,this.touchSpeedValue=4,this.touchRotateValue=5,this.scene=e;const t=this.scene.getGameSize();this.body=this.scene.physics.add.image(t.width/2,t.height/2,"player-ship"),this.lastShootTime=e.gameTime+100,this.init()}init(){const{scene:e,scale:t}=this;this.body.setScale(t),this.body.setDepth(100),this.body.setImmovable(!0),this.initShield(),e.add.existing(this.body),d=e.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.A),u=e.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.S),p=e.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.D),g=e.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.W)}initShield(){this.shieldBody=this.scene.physics.add.image(300,300,"shield"),this.shieldBody.setImmovable(!0)}act(e,t){this.update(e,t)}update(e,t){this.body.active&&(this.updateBody(e,t),this.updateShooting(e,t),this.updateMovement(e,t),this.updateAngle(e,t),this.updateBoosters(e,t))}updateBody(e,t){const{scale:s,bodySize:i}=this,n=c.getOffsetToAngle(this.angle+Math.PI,10),a=c.getCenterBody(this.body.displayWidth,this.body.displayHeight,s,i,n);this.body.setCircle(i,a.x,a.y)}updateShooting(e,t){const{scene:s,lastShootTime:i,body:r}=this,{gameTime:h}=s;if(a.isMobile)h>i&&this.shoot(n.angleToRadians(this.body.angle-90));else{const e=s.input.activePointer;if(e.isDown){const t=c.getAngleBetween(new o.Vector(e.x,e.y),new o.Vector(r.x,r.y));this.shoot(t)}}}updateMovement(e,t){const{scene:s,body:i,maxSpeed:n,pointerValues:r,prevPointersPos:h,touchSpeedValue:c}=this,l=this.scene.getGameSize(),m=t/a.CONFIG.scene.delta;let y=this.speed*m;if(a.isMobile){if(this.pointers.left||(r.isLeftTouched=!1,r.left={x:0,y:0}),this.pointers.left&&this.pointers.left.isDown){const e=this.pointers.left,t=new o.Vector(e.x,e.y);r.isLeftTouched||(this.prevPointersPos.left={x:t.x,y:t.y},r.isLeftTouched=!0);const s=h.left;this.pointerValues.left.x=Math.max(Math.min(this.pointerValues.left.x+(e.x-s.x)/c,n),-n),this.pointerValues.left.y=Math.max(Math.min(this.pointerValues.left.y+(e.y-s.y)/c,n),-n),this.prevPointersPos.left={x:t.x,y:t.y},i.x+=this.pointerValues.left.x,i.y+=this.pointerValues.left.y}}else{const e=s.input.keyboard.createCursorKeys(),t=g.isDown||e.up.isDown,n=u.isDown||e.down.isDown,a=p.isDown||e.right.isDown,o=d.isDown||e.left.isDown;(t||n)&&(a||o)&&(y*=.8),t?i.y-=y:n&&(i.y+=y),a?i.x+=y:o&&(i.x-=y)}i.x<0&&(i.x=0),i.y<a.CONFIG.scene.minYPos&&(i.y=a.CONFIG.scene.minYPos),i.x>l.width&&(i.x=l.width),i.y>l.height&&(i.y=l.height)}updateAngle(e,t){const{scene:s,body:i,rotateSpeed:r,pointerValues:h,prevPointersPos:l,touchRotateValue:d}=this,u=s.input.activePointer;if(a.isMobile){if(this.pointers.right||(h.isRightTouched=!1,h.right={x:0,y:0}),this.pointers.right&&this.pointers.right.isDown){const e=this.pointers.right,t=new o.Vector(e.x,e.y);h.isRightTouched||(this.prevPointersPos.right={x:t.x,y:t.y},h.isRightTouched=!0);const s=l.right;this.pointerValues.right.x=Math.max(Math.min(this.pointerValues.right.x+(e.x-s.x)/d,5),-5),this.pointerValues.right.y=Math.max(Math.min(this.pointerValues.right.y+(e.y-s.y)/d,5),-5);const i=new o.Vector(this.pointerValues.right.x,this.pointerValues.right.y);this.targetAngle=c.getAngleBetween(i,new o.Vector(0,0)),this.prevPointersPos.right={x:t.x,y:t.y}}this.angle=n.angleToRadians(c.getNearestAngle(c.angleToDegrees(this.angle),c.angleToDegrees(this.targetAngle),r))}else this.angle=c.getAngleBetween(new o.Vector(u.x,u.y),new o.Vector(i.x,i.y));this.body.angle=c.angleToDegrees(this.angle)+90}updateBoosters(e,t){const{scene:s,boosterParams:i}=this,{gameTime:n}=s;this.currentBooster===h.EBoosterType.speed&&n>i.nextShadowTime&&(this.createShadow(),this.boosterParams.nextShadowTime=n+50),this.currentBooster===h.EBoosterType.regenerator&&n>i.nextRegenerationTime&&(i.nextRegenerationTime=n+1e3,this.updateHp(a.CONFIG.boosters.types.regenerator.hpPerSecond),this.hp>=this.maxHp&&this.destroyBooster()),this.updateShieldBooster(),n>i.endTime&&this.destroyBooster()}updateShieldBooster(){const{shieldBodySize:e}=this;this.shieldBody.x=this.body.x,this.shieldBody.y=this.body.y,this.shieldBody.angle=this.body.angle;const t=c.getOffsetToAngle(this.angle+Math.PI,25),s=c.getCenterBody(this.shieldBody.displayWidth,this.shieldBody.displayHeight,1,e,t);this.shieldBody.setCircle(e,s.x,s.y),this.shieldBody.visible=this.currentBooster===h.EBoosterType.shield}shoot(e){const{scene:t,body:s,bulletSpeed:i,weaponDamage:n}=this,{gameTime:a}=t;a>this.lastShootTime&&(this.scene.bullets.push(new l.SphereBullet(this.scene,new o.Vector(s.x,s.y),h.Owner.player,{speed:c.getOffsetToAngle(e,i),angle:e,sprite:"laser-green",explodeSprite:"green-explode",damage:n})),this.lastShootTime=a+this.shootTime)}damage(e){this.updateHp(-e),this.hp<=0&&this.destroy()}createShadow(){const{scene:e,body:t,scale:s,angle:i}=this;e.effects.push(new r.Shadow(e,new o.Vector(t.x,t.y),{sprite:"player-ship",lifeTime:250,scale:s,angle:c.angleToDegrees(i)+90,alpha:.4}))}setPointer(e,t){this.pointers[e]=t}setBooster(e){const{gameTime:t}=this.scene;switch(this.destroyBooster(),this.currentBooster=e,this.boosterParams.endTime=t+a.CONFIG.boosters.actionTime,e){case h.EBoosterType.speed:this.speed+=a.CONFIG.boosters.types.speed.additionalSpeed;break;case h.EBoosterType.damage:this.weaponDamage*=a.CONFIG.boosters.types.damage.additionalXDamage;break;case h.EBoosterType.regenerator:this.boosterParams.nextRegenerationTime=t+1e3}}updateHp(e){this.hp=Math.max(Math.min(this.maxHp,this.hp+e),0)}hitShield(e){if(this.currentBooster===h.EBoosterType.shield){const t=new o.Vector(e.body.x,e.body.y),s=new o.Vector(this.body.x,this.body.y),n=c.getDistanceBetweenPoints(t,s),a=i.getAngleDiff(c.angleToDegrees(this.angle),e.getAngle());n>50&&n<70&&a>45&&e.explode()}}destroyBooster(){const{currentBooster:e}=this;switch(e){case h.EBoosterType.speed:this.speed-=a.CONFIG.boosters.types.speed.additionalSpeed;break;case h.EBoosterType.damage:this.weaponDamage/=a.CONFIG.boosters.types.damage.additionalXDamage}this.shieldBody.visible=!1,this.currentBooster=null}destroy(){const{scene:e,body:t}=this;this.hp=0,this.destroyBooster(),e.utils.tripleExplode(t.x,t.y),t.destroy(),e.onFail(),e.shakeScreen()}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.preload=void 0,t.preload=function(){this.load.image("background-1","assets/images/background/bg-gray.jpg"),this.load.image("background-2","assets/images/background/bg-planet.jpg"),this.load.image("player-ship","assets/images/ships/player-ship.png"),this.load.image("enemy-bot-ship","assets/images/ships/enemy-ship-2.png"),this.load.image("enemy-hunter-ship","assets/images/ships/enemy-hunter.png"),this.load.image("enemy-ufo","assets/images/ships/enemy-ufo.png"),this.load.image("enemy-flyer","assets/images/ships/enemy-flyer.png"),this.load.image("laser-green","assets/images/bullets/laser-green-3.png"),this.load.image("laser-red","assets/images/bullets/laser-red-2.png"),this.load.image("sphere-bullet","assets/images/bullets/sphere-bullet.png"),this.load.image("green-explode","assets/images/effects/green-explode.png"),this.load.image("red-explode","assets/images/effects/red-explode.png"),this.load.image("orange-explode","assets/images/effects/orange-explode.png"),this.load.image("star","assets/images/effects/star-4.png"),this.load.image("fire","assets/images/effects/fire-3.png"),this.load.image("comet","assets/images/effects/comet.png"),this.load.image("meteor-1","assets/images/effects/meteor-gray-1.png"),this.load.image("meteor-2","assets/images/effects/meteor-gray-2.png"),this.load.image("meteor-3","assets/images/effects/meteor-gray-3.png"),this.load.image("meteor-4","assets/images/effects/meteor-gray-4.png"),this.load.image("shield","assets/images/effects/shield.png"),this.load.audio("laser-1",["assets/audio/sfx_laser1.ogg"]),this.load.audio("laser-2",["assets/audio/sfx_laser2.ogg"]),this.load.image("touch-area","assets/images/controls/touch-area.png"),this.load.image("coin-bronze","assets/images/bonus/star-bronze.png"),this.load.image("coin-silver","assets/images/bonus/star-silver.png"),this.load.image("bonus-speed","assets/images/bonus/bonus-speed.png"),this.load.image("bonus-shield","assets/images/bonus/bonus-shield.png"),this.load.image("bonus-damage","assets/images/bonus/bonus-damage.png"),this.load.image("bonus-regenerator","assets/images/bonus/bonus-regenerator.png"),this.load.image("alert","assets/images/interface/alert.png"),this.load.image("firefly","assets/images/other/firefly.png")}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Utils=void 0;const i=s(1),n=s(87),a=s(14),o=s(3);t.Utils=class{constructor(e){this.scene=e}explode(e,t){const{scene:s}=this;s.effects.push(new a.Explode(s,new i.Vector(e,t),{sprite:"orange-explode"}))}tripleExplode(e,t){const s=360*Math.random()/3;for(let i=0;i<3;i++){const n=o.angleToRadians(120*i+s);this.explode(e+30*Math.cos(n),t+30*Math.sin(n))}}spawnCoin(e){const{scene:t}=this;t.bonuses.push(new n.Coin(t,e))}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Coin=void 0;const i=s(18),n={0:{sprite:"coin-bronze",cost:5},1:{sprite:"coin-silver",cost:7},2:{sprite:"coin-gold",cost:10}};class a extends i.Bonus{constructor(e,t){super(e),this.params=t,this.init()}init(){const{scene:e,params:t}=this,s=n[(()=>{const e=Math.random();return e>.5?0:e>.2?1:2})()];this.lifeTime=5e3+Math.random()*t.lifeTimeRange,this.cost=s.cost,this.body=this.scene.physics.add.image(t.pos.x,t.pos.y,s.sprite),this.creationTime=e.gameTime,this.body.setDepth(10),this.body.setCircle(16),this.initCollisions()}initCollisions(){const{scene:e}=this;e.physics.add.collider(this.body,e.player.body,()=>{e.score+=this.cost,this.destroy()})}act(){this.update()}update(){const{scene:e,body:t,lifeTime:s}=this,i=e.gameTime;t.angle+=3*Math.sin(.003*i),i>this.creationTime+s&&this.destroy()}}t.Coin=a},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getInitialGameData=void 0;t.getInitialGameData=()=>({totalKills:0,kills:{bot:0,hunter:0,flyer:0,ufo:0},firefliersKilled:0})},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MenuScene=void 0;const i=s(1),n=s(0),a=s(6),o=s(2),r=s(12),h=s(5),c=s(7),l=s(3);let d=!1;class u extends c.Scene{constructor(){super({key:o.SceneName.menu})}preload(){this.load.image("coin-gold","assets/images/bonus/star-gold.png"),this.load.image("question-mark","assets/images/interface/question-mark.png"),d||(this.load.bitmapFont("atari","assets/fonts/atari/bitmap/gem.png","assets/fonts/atari/bitmap/gem.xml"),d=!0)}create(){const e=this.getGameSize(),t=e.width/2,s=e.height/2,o=n.isMobile?[45,45,55,60,30]:[45,60,65,70,70];let r=s-(n.isMobile?105:140);this.graphics=this.add.graphics({lineStyle:{width:2,color:h.COLORS.white},fillStyle:{color:h.COLORS.white}}),this.createTitle(t,r),r+=o[0],this.createSubtitle(t,r),r+=o[1],new a.UICosmons(this,{pos:new i.Vector(t,r),value:this.getData().score,isCentered:!0,depth:100}),r+=o[2],this.createLevelText(t,r),r+=o[3],this.createStartButton(t,r),n.isMobile?this.createInfoButton(e.width-50,e.height-50):this.createLastUpdatedText(t,e.height-30)}update(){this.rainbowText.update()}createTitle(e,t){this.add.bitmapText(e,t,"atari",n.CONFIG.title,32).setOrigin(.5)}createSubtitle(e,t){this.rainbowText=new a.UIRainbowText(this,{pos:new i.Vector(e,t),text:n.CONFIG.subtitle})}createLevelText(e,t){const s=this.getData().level,i=`Next level: ${s+1}. ${n.LEVELS_CONFIG[s].title}`;this.add.dynamicBitmapText(e,t,"atari",i,19).setOrigin(.5)}createStartButton(e,t){new a.UIRectButton(this,{x:e,y:t,width:r.BUTTON_WIDTH,height:r.BUTTON_HEIGHT,text:"Start game",callbacks:{onPointerDown:()=>{this.scene.start(o.SceneName.preview,{level:this.getData().level}),n.isMobile&&setTimeout(()=>{l.showFullscreen(this.game.canvas)},200)}}})}createLabButton(e,t){}createLastUpdatedText(e,t){const s=this.getLastUpdatedGameTime(),i=n.isMobile?14:16;this.add.dynamicBitmapText(e,t,"atari",s,i).setOrigin(.5)}createInfoButton(e,t){new a.UIArcButton(this,{x:e,y:t,arc:20,render:()=>{this.add.text(e,t,"?",{font:"22px Arial",fill:"#fff"}).setOrigin(.5)},callbacks:{onPointerDown:()=>{this.scene.start(o.SceneName.info,{})}}})}}t.MenuScene=u},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FailScene=void 0;const i=s(1),n=s(0),a=s(6),o=s(2),r=s(12),h=s(5),c=s(7);class l extends c.Scene{constructor(){super({key:o.SceneName.fail})}preload(){}init(e){this.params=e}create(){const e=this.getGameSize(),t=[25,82,67];let s=e.height/2-87;const o=e.width/2;this.rainbowTitle=new a.UIRainbowText(this,{pos:new i.Vector(e.width/2,s),text:n.CONFIG.failTitleText,fontSize:28,color:h.COLORS.red}),s+=t[0];const r=new Phaser.GameObjects.BitmapText(this,e.width/2,s,"atari",n.CONFIG.failSubtitleText,19);r.setOrigin(.5,0).setCenterAlign().setTint(h.COLORS.white),this.add.existing(r),s+=t[1],this.createTryAgainButton(o,s),s+=t[2],this.createMenuButton(o,s)}update(){this.rainbowTitle.update()}createMenuButton(e,t){new a.UIRectButton(this,{x:e,y:t,width:r.BUTTON_WIDTH,height:r.BUTTON_HEIGHT,text:"Go to menu",callbacks:{onPointerDown:()=>{this.scene.start(o.SceneName.menu)}}})}createTryAgainButton(e,t){const s={level:this.getData().level};new a.UIRectButton(this,{x:e,y:t,width:r.BUTTON_WIDTH,height:r.BUTTON_HEIGHT,text:"Try again",callbacks:{onPointerDown:()=>{this.scene.start(o.SceneName.game,s)}}})}}t.FailScene=l},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WinScene=void 0;const i=s(0),n=s(1),a=s(6),o=s(2),r=s(12),h=s(7);class c extends h.Scene{constructor(){super({key:o.SceneName.win})}preload(){}init(e){this.params=e}create(){var e;const t=this.getGameSize(),s=t.width/2,o=t.height/2;let h=i.isMobile?o-112:o-130;const c=i.isMobile?[35,120,70]:[45,130,80],l=this.getData(),{score:d,isFlawlessVictory:u}=this.params,p=(null===(e=l.levels[l.level])||void 0===e?void 0:e.score)||0,g=u?Math.ceil(.25*d):0,m=d+g,y=p<m?m-p:0,f={currentLevel:l.level,score:d,totalScore:m,bestLevelScore:p,flawlessVictoryScores:g,plusScore:y};this.createTitle(s,h),h+=c[0],this.createScores(s,h,f),h+=c[1],new a.UICosmons(this,{pos:new n.Vector(s,h),isCentered:!0,value:f.plusScore,prefix:"+",depth:100}),h+=c[2],this.createNextButton(s+r.BUTTON_WIDTH+r.BUTTON_X_SPACE,h),this.createTryAgainButton(s-r.BUTTON_WIDTH-r.BUTTON_X_SPACE,h),this.createMenuButton(s,h),this.updateGlobalData(f)}update(){this.rainbowTitle.update()}createTitle(e,t){this.rainbowTitle=new a.UIRainbowText(this,{pos:new n.Vector(e,t),text:i.CONFIG.winTitleText,fontSize:28})}createScores(e,t,s){const i=`Score: ${s.score}\nFlawless victory: ${s.flawlessVictoryScores}\nBest score: ${s.bestLevelScore}\nTotal score: ${s.totalScore}`,n=new Phaser.GameObjects.BitmapText(this,e,t,"atari",i,18).setOrigin(.5,0).setCenterAlign();this.add.existing(n)}createNextButton(e,t){const s=this.getData(),{level:n}=s;new a.UIRectButton(this,{x:e,y:t,width:r.BUTTON_WIDTH,height:46,text:"Next level",disabled:i.CONFIG.levelsCount<=n+1,callbacks:{onPointerDown:()=>{const{score:e}=s,t=n+1;this.setData("level",t),this.setStorageData({level:t,score:e,date:Date.now()});const i={level:this.getData().level};this.scene.start(o.SceneName.preview,i)}}})}createTryAgainButton(e,t){const s={level:this.getData().level};new a.UIRectButton(this,{x:e,y:t,width:r.BUTTON_WIDTH,height:46,text:"Try again",callbacks:{onPointerDown:()=>{this.scene.start(o.SceneName.game,s)}}})}createMenuButton(e,t){const s=this.getData(),{level:n}=s;new a.UIRectButton(this,{x:e,y:t,width:r.BUTTON_WIDTH,height:46,text:"Go to menu",callbacks:{onPointerDown:()=>{const{score:e}=s,t=n+1;t<i.CONFIG.levelsCount&&(this.setData("level",t),this.setStorageData({level:t,score:e,date:Date.now()})),this.scene.start(o.SceneName.menu)}}})}updateGlobalData(e){const t=this.getData();e.bestLevelScore<e.totalScore&&(this.setData("levels",Object.assign(Object.assign({},t.levels),{[e.currentLevel]:{score:e.totalScore}})),this.setData("score",t.score+e.plusScore))}}t.WinScene=c},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InfoScene=void 0;const i=s(6),n=s(2),a=s(12),o=s(0),r=s(7);class h extends r.Scene{constructor(){super({key:n.SceneName.info})}init(e){this.params=e}create(){const e=this.getGameSize(),t=this.getLastUpdatedGameTime(),s=`Start of development: ${o.START_DEVELOPMENT_TIME.toLocaleDateString()}\n${t}\n\nTotal levels: ${o.LEVELS_CONFIG.length}`;this.add.dynamicBitmapText(30,30,"atari",s,19),new i.UIRectButton(this,{x:e.width-a.BUTTON_WIDTH/2-30,y:e.height-a.BUTTON_HEIGHT/2-30,width:a.BUTTON_WIDTH,height:a.BUTTON_HEIGHT,text:"Back",callbacks:{onPointerDown:()=>{this.scene.start(n.SceneName.menu)}}})}}t.InfoScene=h},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PreviewScene=void 0;const i=s(5),n=s(12),a=s(0),o=s(6),r=s(2),h=s(7);class c extends h.Scene{constructor(){super({key:r.SceneName.preview})}init(e){this.params=e}create(){const{params:e}=this,{level:t}=e,{title:s,text:n,mission:o}=a.LEVELS_CONFIG[t],r=this.getGameSize(),h=r.height/2,c=new Phaser.GameObjects.BitmapText(this,r.width/2,0,"atari",`${t+1}. ${s}`,32);c.setOrigin(.5,0).setCenterAlign();const l=new Phaser.GameObjects.BitmapText(this,r.width/2,0,"atari",n,18);l.setMaxWidth(450).setOrigin(.5,0).setCenterAlign();const d=new Phaser.GameObjects.BitmapText(this,r.width/2,0,"atari",o,18);d.setMaxWidth(450).setOrigin(.5,0).setCenterAlign().setTint(i.COLORS.green);const u=h-(c.height+l.height+d.height+100)/2+5;c.y=u-25,l.y=c.y+65,d.y=l.y+l.height+25,this.add.existing(c),this.add.existing(l),this.add.existing(d),this.drawButton(d.y+d.height+60)}drawButton(e){const t=this.getGameSize(),s={level:this.params.level};new o.UIRectButton(this,{x:t.width/2,y:e,width:120,height:n.BUTTON_HEIGHT,text:"Go",callbacks:{onPointerDown:()=>{this.scene.start(r.SceneName.game,s)}}})}}t.PreviewScene=c}]);