!function(e){function t(t){for(var i,o,r=t[0],c=t[1],l=t[2],d=0,u=[];d<r.length;d++)o=r[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&u.push(a[o][0]),a[o]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);for(h&&h(t);u.length;)u.shift()();return n.push.apply(n,l||[]),s()}function s(){for(var e,t=0;t<n.length;t++){for(var s=n[t],i=!0,r=1;r<s.length;r++){var c=s[r];0!==a[c]&&(i=!1)}i&&(n.splice(t--,1),e=o(o.s=s[0]))}return e}var i={},a={0:0},n=[];function o(t){if(i[t])return i[t].exports;var s=i[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=e,o.c=i,o.d=function(e,t,s){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(s,i,function(t){return e[t]}.bind(null,i));return s},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var r=window.webpackJsonp=window.webpackJsonp||[],c=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var h=c;n.push([36,1]),s()}([,function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(7);i.__exportStar(s(84),t),i.__exportStar(s(85),t),i.__exportStar(s(86),t)},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(7);i.__exportStar(s(42),t),i.__exportStar(s(26),t),i.__exportStar(s(43),t),i.__exportStar(s(44),t),i.__exportStar(s(45),t),i.__exportStar(s(46),t),i.__exportStar(s(47),t),i.__exportStar(s(48),t),i.__exportStar(s(49),t),i.__exportStar(s(77),t),i.__exportStar(s(78),t),i.__exportStar(s(79),t),i.__exportStar(s(80),t),i.__exportStar(s(81),t),i.__exportStar(s(82),t)},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.START_DEVELOPMENT_TIME=t.CRYPTO_TOKEN=t.IS_DEV=t.env=t.boostersConfig=t.levelsConfig=t.enemiesConfig=t.mainConfig=void 0;const i=s(7);var a=s(37);Object.defineProperty(t,"mainConfig",{enumerable:!0,get:function(){return a.mainConfig}});var n=s(93);Object.defineProperty(t,"enemiesConfig",{enumerable:!0,get:function(){return n.enemiesConfig}});var o=s(25);Object.defineProperty(t,"levelsConfig",{enumerable:!0,get:function(){return o.levelsConfig}});var r=s(94);Object.defineProperty(t,"boostersConfig",{enumerable:!0,get:function(){return r.boostersConfig}}),i.__exportStar(s(30),t),t.env={buildTime:1652202499211},t.IS_DEV=!1,t.CRYPTO_TOKEN="space-invaders",t.START_DEVELOPMENT_TIME=new Date(2021,8,5)},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Vector=void 0;var i=s(38);Object.defineProperty(t,"Vector",{enumerable:!0,get:function(){return i.Vector}})},,function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_BUTTON_SPACE=t.SECONDARY_FONT=t.DEFAULT_FONT=t.defaultButtonSize=t.FULLSCREEN_TIMEOUT_DELAY=t.ORIENTATION_UPDATE_TIMEOUT_DELAY=void 0;s(7).__exportStar(s(96),t),t.ORIENTATION_UPDATE_TIMEOUT_DELAY=200,t.FULLSCREEN_TIMEOUT_DELAY=200,t.defaultButtonSize={width:180,height:46},t.DEFAULT_FONT="Roboto",t.SECONDARY_FONT="atari",t.DEFAULT_BUTTON_SPACE=20},,function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Service=void 0;t.Service=class{constructor(e){this.scene=e}}},,function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Scene=void 0;const i=s(3),a=s(2),n=s(95);class o extends Phaser.Scene{constructor(){super(...arguments),this.ui=new n.UI(this)}getData(){return this.game.data}getSettings(){return this.game.settings}getQueryParam(e,t=!1){return a.getQueryParam(this.getSettings().queryParams,e,t)}setData(e,t){this.game.data[e]=t,i.IS_DEV&&console.log(`[${e}] was updated in global data:`,this.game.data)}getGameSize(){return{width:+this.game.config.width,height:+this.game.config.height}}getGameCenter(){const e=this.getGameSize();return{x:Math.round(e.width/2),y:Math.round(e.height/2)}}getLastUpdatedGameTime(){const{getText:e}=this.game.i18n,t=new Date(i.env.buildTime).toLocaleString();return`${e("lastUpdated")}: ${t}`}}t.Scene=o},,,function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Mode=void 0;t.Mode=class{constructor(e,t){this.scene=e,this.modeParams=t}spawn(){}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Enemy=void 0;const i=s(4),a=s(17),n=s(2);t.Enemy=class{constructor(e,t){this.isOutOfWorld=!1,this.angle=0,this.targetAngle=0,this.lastChangeTargetTime=0,this.lastFireTime=0,this.scene=e,this.name=t}act(e,t){}updateWorldCollisions(e,t){const s=this.scene.getGameSize(),{isOutOfWorld:a}=this;if(this.isOutsideScene(100)){if(!a){const e=250,t=150,a=s.width/2-e+Math.random()*(2*e),n=s.height/2-t+Math.random()*(2*t),o=new i.Vector(a,n);this.onOutOfWorld(o)}this.isOutOfWorld=!0}else this.isOutOfWorld=!1}damage(e){this.hp-=e,this.hp<=0&&this.destroy()}destroy(){const{scene:e,body:t,coinChance:s}=this;e.enemies=e.enemies.filter(e=>e!==this),t.destroy();const i=e.getStats();Math.random()>1-s&&e.utils.createBonus(t.x,t.y),i.kills[this.name]+=1,i.totalKills+=1,e.shakeScreen()}isOutsideScene(e=0){const{body:t}=this,s=this.scene.getGameSize();return t.x<e||t.x>s.width-e||t.y<e||t.y>s.height-e}onOutOfWorld(e){}setRandomTargetAngleWithInterval(){const{scene:e,changeTargetTimeInterval:t}=this;this.setTargetAngle(this.scene.utils.getRandomPos());const s=t[0]+Math.random()*t[1];this.lastChangeTargetTime=e.gameTime+s}setRandomTargetAngle(){this.setTargetAngle(this.scene.utils.getRandomPos())}setTargetAngle(e){const{body:t}=this;this.targetAngle=n.getAngleBetweenPointsInDegrees(e,t)}updateFire(){const{scene:e,body:t,angle:s,lastFireTime:o}=this,r=e.gameTime,c=n.angleToRadians(s+180);r>o&&(e.effects.push(new a.Fire(e,{pos:new i.Vector(t.x+45*Math.cos(c+.4),t.y+45*Math.sin(c+.4)),angle:c})),e.effects.push(new a.Fire(e,{pos:new i.Vector(t.x+45*Math.cos(c-.4),t.y+45*Math.sin(c-.4)),angle:c})),this.lastFireTime=r+75)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Level=void 0;const i=s(3),a=s(1),n=s(123),o={[a.EGameMode.totalKills]:n.TotalKillsMode,[a.EGameMode.enemyKills]:n.EnemyKillsMode,[a.EGameMode.time]:n.TimeMode,[a.EGameMode.waves]:n.WavesMode,[a.EGameMode.boss]:n.BossMode};t.Level=class{constructor(e,t){this.spawnTime=0,this.scene=e;const s=i.levelsConfig[t].mode;this.mode=new o[s.type](e,s)}update(){const{scene:e,spawnTime:t,spawnTimeInterval:s}=this,{gameTime:i}=e;i>t&&(this.spawn(),this.mode.spawn(),this.spawnTime=i+s),this.updateStatus()}updateStatus(){this.status=Math.max(this.mode.getStatus(),0)}getTextByMode(){return void 0===this.status?"":this.status.toString()}checkForWin(){const{status:e}=this;return void 0!==e&&e<=0}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Flyer=t.UFO=t.Hunter=t.Bot=t.Enemy=void 0;var i=s(14);Object.defineProperty(t,"Enemy",{enumerable:!0,get:function(){return i.Enemy}});var a=s(83);Object.defineProperty(t,"Bot",{enumerable:!0,get:function(){return a.Bot}});var n=s(87);Object.defineProperty(t,"Hunter",{enumerable:!0,get:function(){return n.Hunter}});var o=s(88);Object.defineProperty(t,"UFO",{enumerable:!0,get:function(){return o.UFO}});var r=s(89);Object.defineProperty(t,"Flyer",{enumerable:!0,get:function(){return r.Flyer}})},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Shadow=t.Fire=t.Explode=t.Effect=void 0;var i=s(18);Object.defineProperty(t,"Effect",{enumerable:!0,get:function(){return i.Effect}});var a=s(39);Object.defineProperty(t,"Explode",{enumerable:!0,get:function(){return a.Explode}});var n=s(40);Object.defineProperty(t,"Fire",{enumerable:!0,get:function(){return n.Fire}});var o=s(41);Object.defineProperty(t,"Shadow",{enumerable:!0,get:function(){return o.Shadow}})},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Effect=void 0;t.Effect=class{constructor(e){this.scene=e}act(){}destroy(){const{body:e}=this;this.scene.effects=this.scene.effects.filter(e=>e!==this),e.destroy()}}},,,,function(e,t,s){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Translations=t.I18n=t.LocalStorage=t.EventEmitter=t.Game=void 0;var a=s(33);Object.defineProperty(t,"Game",{enumerable:!0,get:function(){return a.Game}});var n=s(106);Object.defineProperty(t,"EventEmitter",{enumerable:!0,get:function(){return n.EventEmitter}});var o=s(107);Object.defineProperty(t,"LocalStorage",{enumerable:!0,get:function(){return i(o).default}});var r=s(108);Object.defineProperty(t,"I18n",{enumerable:!0,get:function(){return i(r).default}});var c=s(109);Object.defineProperty(t,"Translations",{enumerable:!0,get:function(){return c.Translations}})},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Bonus=void 0;t.Bonus=class{constructor(e){this.scene=e}act(){}destroy(){const{body:e}=this;this.scene.bonuses=this.scene.bonuses.filter(e=>e!==this),e.destroy()}}},,function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.levelsConfig=t.levelsSchema=void 0;const i=s(16),a=s(1),n=s(90),o=s(91);t.levelsSchema=[{mode:{type:a.EGameMode.totalKills,target:10}},{mode:{type:a.EGameMode.enemyKills,target:{hunter:6}}},{mode:{type:a.EGameMode.time,target:90}},{mode:{type:a.EGameMode.waves,target:[{maxEnemies:3,enemies:n.getEnemiesArray([i.Bot,5],i.Hunter,i.Bot)},{maxEnemies:3,enemies:n.getEnemiesArray(i.Hunter,[i.Bot,3],i.Hunter,[i.Bot,3],i.Hunter)},{maxEnemies:3,enemies:n.getEnemiesArray([i.Hunter,2],i.Bot,i.Hunter,[i.Bot,2],i.Hunter,[i.Bot,3])},{maxEnemies:3,enemies:n.getEnemiesArray(i.Bot,i.Hunter,i.UFO,[i.Bot,2],[i.Hunter,2],i.Bot,i.UFO,i.Hunter)},{maxEnemies:4,enemies:n.getEnemiesArray(i.UFO,i.Bot,[i.Hunter,2],[i.Bot,2],i.UFO,[i.Hunter,2],[i.UFO,2])}]}},{mode:{type:a.EGameMode.boss,target:o.Boss1}}],t.levelsConfig=t.levelsSchema.map((e,t)=>Object.assign(Object.assign({},e),{level:t}))},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.spreadRadians=t.spreadAngle=t.getAngleDiff=t.getOffsetByAngle=t.getOffsetByRadians=t.getNearestAngle=t.angleToRadians=t.angleToDegrees=t.getAngleBetweenPointsInDegrees=t.getAngleBetweenPointsInRadians=void 0;const i=s(4);function a(e,t){return Math.atan2(e.y-t.y,e.x-t.x)}function n(e){return e/Math.PI*180}function o(e){return e*Math.PI/180}t.getAngleBetweenPointsInRadians=a,t.getAngleBetweenPointsInDegrees=function(e,t){return n(a(e,t))},t.angleToDegrees=n,t.angleToRadians=o,t.getNearestAngle=function(e,t,s){if(Math.abs(e-t)<s)return t;Math.abs(e-t)<180?e<t?e+=s:e-=s:e<t?e-=s:e+=s;const i=(e%360+360)%360;return i>180?i-360:i};t.getOffsetByRadians=(e,t)=>new i.Vector(Math.cos(e)*t,Math.sin(e)*t);t.getOffsetByAngle=(e,s)=>t.getOffsetByRadians(o(e),s);t.getAngleDiff=(e,t)=>{const s=Math.abs(e-t);return Math.abs((s+180)%360-180)};t.spreadAngle=(e,t)=>e-t+Math.random()*(2*t);t.spreadRadians=(e,s)=>t.spreadAngle(e,o(s))},,,function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Boss=void 0;const i=s(4),a=s(2);t.Boss=class{constructor(e){this.angle=0,this.scale=1,this.scene=e}act(e,t){}damage(e){this.hp-=e,this.hp<=0&&this.destroy()}destroy(){const e=new i.Vector(this.body.x,this.body.y);for(let t=0;t<3;t++){const s=a.getOffsetByAngle(this.angle+120*t,70);this.scene.utils.createTripleExplode(e.x+s.x,e.y+s.y)}this.body.destroy(),this.scene.score+=this.rewardedScore}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.gameConfigs=t.baseConfig=void 0;const i=s(31),a=s(2),n=a.parseQuery(window.location.search);t.baseConfig={type:Phaser.AUTO,parent:"game-container",physics:{default:"arcade",arcade:{gravity:{y:0},debug:Boolean(a.getQueryParam(n,"debug"))}},scene:[i.PreloadScene,i.MenuScene,i.GameScene,i.PreviewScene,i.FailScene,i.WinScene,i.InfoScene]},t.gameConfigs={desktop:{width:1332,height:768,scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH}},mobile:{width:window.innerWidth,height:a.getFullWindowHeight(),scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH}}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InfoScene=t.PreloadScene=t.GameScene=t.FailScene=t.WinScene=t.PreviewScene=t.MenuScene=t.Scene=void 0;var i=s(10);Object.defineProperty(t,"Scene",{enumerable:!0,get:function(){return i.Scene}});var a=s(103);Object.defineProperty(t,"MenuScene",{enumerable:!0,get:function(){return a.MenuScene}});var n=s(104);Object.defineProperty(t,"PreviewScene",{enumerable:!0,get:function(){return n.PreviewScene}});var o=s(105);Object.defineProperty(t,"WinScene",{enumerable:!0,get:function(){return o.WinScene}});var r=s(110);Object.defineProperty(t,"FailScene",{enumerable:!0,get:function(){return r.FailScene}});var c=s(111);Object.defineProperty(t,"GameScene",{enumerable:!0,get:function(){return c.GameScene}});var l=s(144);Object.defineProperty(t,"PreloadScene",{enumerable:!0,get:function(){return l.PreloadScene}});var h=s(146);Object.defineProperty(t,"InfoScene",{enumerable:!0,get:function(){return h.InfoScene}})},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UIComponent=void 0;t.UIComponent=class{constructor(e){this.scene=e}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Game=void 0;const i=s(22);class a extends Phaser.Game{constructor(e,t){super(e),this.data=t.data,this.settings=t.settings,this.i18n=new i.I18n(this.settings.lang),this.translations=new i.Translations(this)}}t.Game=a},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Booster=t.boosters=void 0;const i=s(3),a=s(1),n=s(23);t.boosters={0:a.EBoosterType.speed,1:a.EBoosterType.damage,2:a.EBoosterType.shield,3:a.EBoosterType.regenerator};class o extends n.Bonus{constructor(e,t,s){super(e),this.creationTime=e.gameTime,this.type=s,this.body=this.scene.physics.add.image(t.x,t.y,this.type),this.init()}init(){this.body.setDepth(10),this.body.setSize(32,32),this.initCollisions()}initCollisions(){const{scene:e}=this;e.physics.add.collider(this.body,e.player.body,()=>{e.player.setBooster(this.type),this.destroy()})}act(){this.update()}update(){const{scene:e,body:t}=this,s=e.gameTime;t.scale=1.2+Math.sin(.004*s)/6,s>this.creationTime+i.boostersConfig.lifeTime&&this.destroy()}}t.Booster=o},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SphereBullet=t.Bullet=void 0;var i=s(141);Object.defineProperty(t,"Bullet",{enumerable:!0,get:function(){return i.Bullet}});var a=s(142);Object.defineProperty(t,"SphereBullet",{enumerable:!0,get:function(){return a.Sphere}})},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s(24);const i=s(3),a=s(147),n=s(22),o=s(2),r=s(6),c=s(1),l=s(33),h=o.parseQuery(window.location.search),d=n.LocalStorage.getGameData();function u(){const e=Number(o.getQueryParam(h,"level",!0))-1;return!isNaN(e)&&o.isLevelNumberValid(e)?e:0}function m(){const e=Number(null==d?void 0:d.score);return e||0}function g(){const e=o.getQueryParam(h,"lang");return o.isLangExists(e)?e:c.ELanguage.ru}let p;o.debugLog("ls data",d);let y=!1,f=null;function b(){y||(o.isLandscapeOrientation()||!o.isMobileDevice()?(!function(){const e={level:u(),score:m()},t={isMobile:o.isMobileDevice(),queryParams:h,lang:g()};p=new l.Game(a.getGameConfig(),{data:e,settings:t}),y=!0}(),i.IS_DEV?console.log("Game inited",p):console.log("Game inited")):console.log("Game could not be inited as it does not support portrait orientation"))}function v(e){!function e(t=120){setTimeout(()=>{const s=o.getCurrentOrientation();s!==f?(f=s,b(),o.isLandscapeOrientation()?o.hideOrientationWarning():o.isMobileDevice()&&(o.showOrientationWarning(),p&&o.showFullscreen(p.canvas,!1))):t>0&&window.requestAnimationFrame(()=>{e(t-1)})},r.ORIENTATION_UPDATE_TIMEOUT_DELAY)}()}window.addEventListener("load",v),window.addEventListener("orientationchange",v),o.isMobileDevice()},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mainConfig=void 0;const i=s(25),a=s(1);t.mainConfig={gameTitle:"Space Invaders",gameSubtitle:"The battle for the galaxy",totalLevelsCount:i.levelsConfig.length,touch:{pointerSize:32,areaSize:27,areaOffset:85},scene:{delta:16,minYPos:100,failTimeoutTime:2e3,winTimeoutTime:2e3},languages:[a.ELanguage.ru,a.ELanguage.en]}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Vector=void 0;t.Vector=class{constructor(e,t){this.x=e,this.y=t}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Explode=void 0;const i=s(18);class a extends i.Effect{constructor(e,t){super(e),this.body=e.ui.drawImage({x:t.pos.x,y:t.pos.y,texture:t.sprite}),this.params=t,this.startTime=e.gameTime,this.body.setScale(0),this.body.setDepth(115)}act(){this.update()}update(){const{scene:e,startTime:t}=this,s=e.gameTime-t,i=Math.sin(s/150),a=i;this.body.angle+=3,this.body.setScale(a,a),this.body.setAlpha(i),i<.06&&s>100&&this.destroy()}}t.Explode=a},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Fire=void 0;const i=s(26),a=s(18);class n extends a.Effect{constructor(e,t){super(e),this.speed=1.7,this.body=e.ui.drawImage({x:t.pos.x,y:t.pos.y,texture:"fire"}),this.params=t,this.body.setDepth(5),this.body.setAngle(i.angleToDegrees(t.angle)+90),this.startTime=e.gameTime,this.params=t}act(){this.update()}update(){const{scene:e,body:t,speed:s,startTime:i,params:a}=this,n=e.gameTime-i;t.alpha=1-n/150,t.x+=s*Math.cos(a.angle),t.y+=s*Math.sin(a.angle),t.alpha<=0&&this.destroy()}}t.Fire=n},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Shadow=void 0;const i=s(18);class a extends i.Effect{constructor(e,t){super(e),this.params=t,this.body=e.ui.drawImage({x:t.pos.x,y:t.pos.y,texture:t.sprite}),this.body.setScale(t.scale),this.body.setAngle(t.angle),this.body.setAlpha(t.alpha),this.body.setDepth(0),this.destroyTime=t.lifeTime+e.gameTime}act(){this.update()}update(){const{scene:e,body:t,destroyTime:s,params:i}=this,{gameTime:a}=e,n=(s-a)*i.alpha/i.lifeTime;t.setAlpha(n),a>this.destroyTime&&this.destroy()}}t.Shadow=a},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBodyPosWithOffset=void 0;const i=s(4);t.getBodyPosWithOffset=(e,t,s,a,n={x:0,y:0})=>{const o=e/s/2-a+n.x,r=t/s/2-a+n.y;return new i.Vector(o,r)}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDistanceBetweenPoints=t.getRandomInt=void 0;t.getRandomInt=(e,t)=>Math.round(e+Math.random()*(t-e));t.getDistanceBetweenPoints=(e,t)=>{const s=e.x-t.x,i=e.y-t.y;return Math.sqrt(s*s+i*i)}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluralize=void 0,t.pluralize=function(e,t,s){switch(function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2}(e)){case 0:return(null==s?void 0:s.isGenetiveForm)?t[3]:t[0];case 1:return t[1];default:return t[2]}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isMobileDevice=t.getCurrentOrientation=t.isLandscapeOrientation=void 0;t.isLandscapeOrientation=()=>t.isMobileDevice()&&window.innerHeight<window.innerWidth;t.getCurrentOrientation=()=>t.isLandscapeOrientation()?"horizontal":"vertical";t.isMobileDevice=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isFullScreenMode=t.getFullWindowHeight=t.showFullscreen=t.hideOrientationWarning=t.showOrientationWarning=void 0;const i=document.querySelector(".screen-height-detector");t.showOrientationWarning=()=>{document.body.classList.add("portrait-orientation-warning")};t.hideOrientationWarning=()=>{document.body.classList.remove("portrait-orientation-warning")};t.showFullscreen=(e,s=!0)=>{s&&!t.isFullScreenMode()?e.requestFullscreen?e.requestFullscreen({navigationUI:"hide"}):e.webkitRequestFullscreen?e.webkitRequestFullscreen({navigationUI:"hide"}):e.msRequestFullscreen&&e.msRequestFullscreen({navigationUI:"hide"}):!s&&t.isFullScreenMode()&&(document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen())};t.getFullWindowHeight=()=>{if(!i)throw new Error("root element for detecting height is null");return i.getBoundingClientRect().height};t.isFullScreenMode=()=>!!(document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement)},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getQueryParam=t.parseQuery=void 0;const i=s(3);t.parseQuery=e=>{const t={},s=("?"===e[0]?e.slice(1):e).split("&");for(let e=0;e<s.length;e++){const i=s[e].split("=");i[0]&&(t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]||""))}return t};t.getQueryParam=(e,t,s=!1)=>!(!i.IS_DEV&&s)&&e[t]},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isLevelNumberValid=void 0;const i=s(3);t.isLevelNumberValid=e=>!("number"!=typeof e||isNaN(e)||e<0||e>=i.mainConfig.totalLevelsCount)},function(e,t,s){"use strict";const i=r;!function(e,t){const s=r,i=e();for(;;)try{if(475800===-parseInt(s(497))/1*(parseInt(s(508))/2)+-parseInt(s(500))/3*(parseInt(s(507))/4)+parseInt(s(498))/5*(-parseInt(s(512))/6)+-parseInt(s(514))/7*(parseInt(s(516))/8)+parseInt(s(494))/9+-parseInt(s(493))/10+-parseInt(s(503))/11*(-parseInt(s(495))/12))break;i.push(i.shift())}catch(e){i.push(i.shift())}}(o),Object[i(501)](t,"__esModule",{value:!0}),t[i(517)]=t[i(496)]=t[i(511)]=void 0;const a=s(7)[i(513)](s(50)),n=s(3);t[i(511)]=()=>{const e=i;return n[e(490)][e(510)]("")[e(515)]()[e(491)]("")};function o(){const e=["AES","split","getCryptoKey","4574616SDlQsp","__importDefault","3541307egbvAa","reverse","8wsHZAW","decryptValue","toString","CRYPTO_TOKEN","join","decrypt","3556810NSYARW","4546800voKhdl","34945428qVqMXu","encryptValue","555433dyaloF","5IeWWOt","enc","3606edjkLl","defineProperty","error","11cCPNVr","Utf8","encrypt","default","2536KCNrew","2ZJFESq"];return(o=function(){return e})()}t.encryptValue=e=>{const s=i;try{return a[s(506)][s(509)][s(505)](e,t.getCryptoKey())[s(518)]()}catch(e){console[s(502)](e)}return null};function r(e,t){const s=o();return(r=function(e,t){return s[e-=490]})(e,t)}t[i(517)]=e=>{const s=i;if(!e)return null;try{return a[s(506)][s(509)][s(492)](e,t[s(511)]()).toString(a[s(506)][s(499)][s(504)])}catch(e){console[s(502)](e)}return null}},,,function(e,t){},,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debugLog=void 0;const i=s(3);t.debugLog=(e,t)=>{i.IS_DEV&&console.log(`[${e}]:`,t)}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRandomHexColor=void 0;t.getRandomHexColor=()=>{let e=65280,t=16711681;return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e)+e)}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isLangExists=void 0;const i=s(3);t.isLangExists=e=>!!i.mainConfig.languages.includes(e)},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.textTemplate=void 0;t.textTemplate=(e,t)=>{const s=e.matchAll(/{(.+?)}/g);for(const i of s)e=e.replace(`{${i[1]}}`,t[i[1]]);return e}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shuffleArray=t.flatten=t.chunk=void 0;t.chunk=(e,t)=>{const s=[];for(let i=0;i<e.length;i+=t)s.push(e.slice(i,i+t));return s};t.flatten=e=>{const t=[e],s=[];for(;t.length;){const e=t.pop();if(Array.isArray(e))for(;e.length;)t.push(e.pop());else s.push(e)}return s};t.shuffleArray=e=>{for(let t=e.length-1;t>0;t--){const s=Math.floor(Math.random()*(t+1)),i=e[t];e[t]=e[s],e[s]=i}return e}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.excludeUndefinedValues=void 0;t.excludeUndefinedValues=e=>(Object.keys(e).forEach(t=>{void 0===e[t]&&delete e[t]}),e)},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Bot=void 0;const i=s(4),a=s(2),n=s(1),o=s(14);class r extends o.Enemy{constructor(e,t){super(e,n.EEnemyName.bot),this.speed=1.5,this.rotateSpeed=2,this.changeTargetTimeInterval=[1e3,2e3],this.weaponDamage=10,this.shootInterval=1200,this.shootIntervalRange=200,this.bulletSpeed=7,this.hp=30,this.bodySize=32,this.depth=50,this.scale=.6,this.coinChance=.9,this.lastShootTime=0,this.body=e.physics.add.image(t.pos.x,t.pos.y,"enemy-bot-ship"),this.init(),this.setRandomTargetAngle()}init(){const{scale:e,depth:t,body:s,bodySize:i}=this;s.setScale(e),s.setImmovable(!0),s.setDepth(t);const n=this.speed+Math.random();this.speed=n,this.rotateSpeed=n;const o=a.getBodyPosWithOffset(s.displayWidth,s.displayHeight,e,i);s.setCircle(i,o.x,o.y)}act(e,t){this.update(e,t)}update(e,t){const{scene:s,lastShootTime:a}=this,n=s.gameTime;if(this.updateWorldCollisions(e,t),this.updateBase(e,t),n>this.lastChangeTargetTime&&this.setRandomTargetAngleWithInterval(),n>a){const e=s.player.body;this.shoot(new i.Vector(e.x,e.y))}}updateBase(e,t){const{scene:s,body:i,angle:n,targetAngle:o,rotateSpeed:r}=this,{deltaTime:c}=s,l=a.angleToRadians(n);i.x+=this.speed*Math.cos(l)*c,i.y+=this.speed*Math.sin(l)*c,this.angle=a.getNearestAngle(n,o,r),this.body.angle=n-90}shoot(e){const{body:t,bulletSpeed:s,shootInterval:o,shootIntervalRange:r,weaponDamage:c}=this,l=a.getAngleBetweenPointsInRadians(e,new i.Vector(t.x,t.y));this.scene.utils.createSphereBullet({pos:new i.Vector(t.x,t.y),owner:n.EOwner.enemy,speed:a.getOffsetByRadians(l,s),angle:a.angleToDegrees(l),sprite:"laser-red",explodeSprite:"red-explode",damage:c}),this.lastShootTime=this.scene.gameTime+o+Math.random()*r}onOutOfWorld(e){this.setTargetAngle(e)}destroy(){const{scene:e,body:t}=this;e.utils.createTripleExplode(t.x,t.y),super.destroy()}}t.Bot=r},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EBoosterType=t.ESceneName=t.EEnemyName=t.EGameMode=t.EOwner=t.ELanguage=void 0,function(e){e.ru="ru",e.en="en"}(t.ELanguage||(t.ELanguage={})),function(e){e.player="player",e.enemy="enemy"}(t.EOwner||(t.EOwner={})),function(e){e.totalKills="totalKills",e.enemyKills="enemyKill",e.time="time",e.waves="waves",e.boss="boss"}(t.EGameMode||(t.EGameMode={})),function(e){e.bot="bot",e.ufo="ufo",e.hunter="hunter",e.flyer="flyer"}(t.EEnemyName||(t.EEnemyName={})),function(e){e.menu="MenuScene",e.preview="PreviewScene",e.game="GameScene",e.fail="FailScene",e.win="WinScene",e.info="InfoScene",e.preload="PreloadScene"}(t.ESceneName||(t.ESceneName={})),function(e){e.speed="bonus-speed",e.damage="bonus-damage",e.shield="bonus-shield",e.regenerator="bonus-regenerator"}(t.EBoosterType||(t.EBoosterType={}))},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Hunter=void 0;const i=s(4),a=s(2),n=s(1),o=s(14);var r;!function(e){e.moving="moving",e.stop="stop",e.rotate="rotate",e.attack="attack"}(r||(r={}));class c extends o.Enemy{constructor(e,t){super(e,n.EEnemyName.hunter),this.weaponDamage=10,this.chanceToShoot=.25,this.lastShootTime=0,this.shootIntervalTime=1200,this.attackEndTime=0,this.attackIntervalTime=3e3,this.attackShootIntervalTime=325,this.attackSpreadRange=10,this.attackHunting=!0,this.lastChangeTargetTime=0,this.changeTargetTimeInterval=[1e3,2e3],this.rotateSpeed=2,this.currentRotateSpeed=this.rotateSpeed,this.rotateTimer=0,this.rotateIntervalTimer=3e3,this.maxSpeed=2,this.speed=2,this.speedIncrease=.05,this.stopEndTime=0,this.stopIntervalTime=3e3,this.stopIntervalRangeTime=1e3,this.coinChance=.9,this.bodySize=36,this.depth=50,this.scale=.7,this.hp=70,this.bulletSpeed=7,this.behavior=r.moving,this.body=e.physics.add.image(t.pos.x,t.pos.y,"enemy-hunter-ship"),this.init(),this.setRandomTargetAngle()}init(){const{scale:e,depth:t,body:s,bodySize:i}=this;s.setScale(e),s.setImmovable(!0),s.setDepth(t);const n=a.getBodyPosWithOffset(s.displayWidth,s.displayHeight,e,i);s.setCircle(i,n.x,n.y),this.setStopEndTime(!0)}act(e,t){this.update(e,t)}update(e,t){const{scene:s,body:n,lastShootTime:o,chanceToShoot:c,behavior:l,speedIncrease:h,stopEndTime:d,attackHunting:u,attackIntervalTime:m}=this,g=s.player.body,p=s.gameTime;switch(this.updateWorldCollisions(p,t),this.updateBase(p,t),l){case r.moving:if(this.speed<this.maxSpeed&&(this.speed+=h),p>o){if(Math.random()>1-c){const e=a.getAngleBetweenPointsInDegrees(new i.Vector(g.x,g.y),new i.Vector(n.x,n.y));this.shoot(e)}this.lastShootTime=p+this.shootIntervalTime}p>this.lastChangeTargetTime&&this.setRandomTargetAngleWithInterval(),p>d&&(this.behavior=r.stop);break;case r.stop:this.speed>0?this.speed-=h:this.setRotateBehavior();break;case r.rotate:this.setTargetAngle(new i.Vector(g.x,g.y)),p>o&&(this.shoot(this.angle,this.attackSpreadRange),this.lastShootTime=p+this.attackShootIntervalTime),a.getAngleDiff(this.targetAngle,this.angle)<=4?this.setAttackBehavior():p>this.rotateTimer&&this.setMovingBehavior();break;case r.attack:(u||p>this.attackEndTime-m/3)&&this.setTargetAngle(new i.Vector(g.x,g.y)),this.speed<this.maxSpeed&&(this.speed+=h),p>o&&(this.shoot(this.angle,this.attackSpreadRange),this.lastShootTime=p+this.attackShootIntervalTime),p>this.attackEndTime&&this.setMovingBehavior()}}updateBase(e,t){const{scene:s,body:i,angle:n,targetAngle:o,currentRotateSpeed:r}=this,{deltaTime:c}=s,l=a.angleToRadians(n);i.x+=this.speed*Math.cos(l)*c,i.y+=this.speed*Math.sin(l)*c,this.angle=a.getNearestAngle(n,o,r),this.body.angle=n-90}setAttackBehavior(){const{scene:e,rotateSpeed:t}=this,s=e.gameTime;this.attackEndTime=s+this.attackIntervalTime,this.currentRotateSpeed=t,this.attackHunting=!0,this.behavior=r.attack}setStopEndTime(e=!1){const{scene:t,stopIntervalTime:s,stopIntervalRangeTime:i}=this,n=t.gameTime;this.stopEndTime=e?n+1e3+a.getRandomInt(0,s):n+s+a.getRandomInt(0,i)}setMovingBehavior(){const{scene:e,changeTargetTimeInterval:t,shootIntervalTime:s}=this,i=e.gameTime;this.setStopEndTime(),this.lastChangeTargetTime=i+t[0],this.lastShootTime=i+s,this.behavior=r.moving}setRotateBehavior(){const{scene:e,rotateIntervalTimer:t,rotateSpeed:s}=this,i=e.gameTime;this.speed=0,this.rotateTimer=i+t,this.currentRotateSpeed=s+1,this.behavior=r.rotate}shoot(e,t=0){const{body:s,bulletSpeed:o,weaponDamage:r}=this,c=a.spreadRadians(a.angleToRadians(e),t);this.scene.utils.createSphereBullet({pos:new i.Vector(s.x,s.y),owner:n.EOwner.enemy,speed:a.getOffsetByRadians(c,o),angle:a.angleToDegrees(c),sprite:"laser-red",explodeSprite:"red-explode",damage:r})}onOutOfWorld(e){this.setTargetAngle(e)}destroy(){const{scene:e,body:t}=this;e.utils.createTripleExplode(t.x,t.y),super.destroy()}}t.Hunter=c},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UFO=void 0;const i=s(4),a=s(2),n=s(1),o=s(14);var r;!function(e){e.moving="moving",e.stop="stop",e.attack="attack"}(r||(r={}));class c extends o.Enemy{constructor(e,t){super(e,n.EEnemyName.ufo),this.weaponDamage=10,this.chanceToShoot=.25,this.lastShootTime=0,this.shootIntervalTime=1200,this.attackEndTime=0,this.attackIntervalTime=1e3,this.lastChangeTargetTime=0,this.changeTargetTimeInterval=[1e3,2e3],this.rotateSpeed=.5,this.maxSpeed=1,this.speed=1,this.speedIncrease=.02,this.stopEndTime=0,this.stopIntervalTime=1500,this.stopIntervalRangeTime=2500,this.coinChance=.9,this.bodySize=36,this.depth=50,this.scale=.7,this.hp=70,this.bulletSpeed=7,this.behavior=r.moving,this.body=e.physics.add.image(t.pos.x,t.pos.y,"enemy-ufo"),this.init(),this.setRandomTargetAngle()}init(){const{scale:e,depth:t,body:s,bodySize:i}=this;s.setScale(e),s.setImmovable(!0),s.setDepth(t);const n=a.getBodyPosWithOffset(s.displayWidth,s.displayHeight,e,i);s.setCircle(i,n.x,n.y),this.setStopEndTime(!0)}act(e,t){this.update(e,t)}update(e,t){const{scene:s,body:n,lastShootTime:o,shootIntervalTime:c,chanceToShoot:l,behavior:h,speedIncrease:d,stopEndTime:u}=this,m=s.player.body,g=s.gameTime;switch(this.updateWorldCollisions(g,t),this.updateBase(g,t),h){case r.moving:if(this.speed<this.maxSpeed&&(this.speed+=d),g>o){if(Math.random()>1-l){const e=a.getAngleBetweenPointsInDegrees(new i.Vector(m.x,m.y),new i.Vector(n.x,n.y));this.shoot(e,!1)}this.lastShootTime=g+c}g>this.lastChangeTargetTime&&this.setRandomTargetAngleWithInterval(),g>u&&!this.isOutsideScene()&&(this.behavior=r.stop);break;case r.stop:this.speed>0?this.speed-=d:(this.attackEndTime=g+this.attackIntervalTime,this.behavior=r.attack);break;case r.attack:g>this.attackEndTime&&(this.makeCircleAttack(),this.setMovingBehavior())}}updateBase(e,t){const{scene:s,body:i,angle:n,targetAngle:o,rotateSpeed:r}=this,{deltaTime:c}=s,l=a.angleToRadians(n);i.x+=this.speed*Math.cos(l)*c,i.y+=this.speed*Math.sin(l)*c,this.angle=a.getNearestAngle(n,o,r),this.body.angle+=this.speed}setStopEndTime(e=!1){const{scene:t,stopIntervalTime:s,stopIntervalRangeTime:i}=this,n=t.gameTime;this.stopEndTime=n+s+a.getRandomInt(0,i)}setMovingBehavior(){const{scene:e,changeTargetTimeInterval:t,shootIntervalTime:s}=this,i=e.gameTime;this.setStopEndTime(),this.lastChangeTargetTime=i+t[0],this.lastShootTime=i+s,this.behavior=r.moving}makeCircleAttack(){const e=45*Math.random();for(let t=0;t<8;t++)this.shoot(e+45*t,!0)}shoot(e,t=!0){const{body:s,bulletSpeed:o,weaponDamage:r}=this;this.scene.utils.createSphereBullet({pos:new i.Vector(s.x,s.y),owner:n.EOwner.enemy,speed:a.getOffsetByRadians(a.angleToRadians(e),o),angle:e,sprite:t?"sphere-bullet":"laser-red",explodeSprite:"red-explode",damage:r,scale:t?.35:1,bodySize:t?32:12})}onOutOfWorld(e){this.setTargetAngle(e)}destroy(){const{scene:e,body:t}=this;e.utils.createTripleExplode(t.x,t.y),this.makeCircleAttack(),super.destroy()}}t.UFO=c},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Flyer=void 0;const i=s(4),a=s(2),n=s(17),o=s(1),r=s(14);class c extends r.Enemy{constructor(e,t){super(e,o.EEnemyName.flyer),this.maxSpeed=4,this.minSpeed=1,this.speed=2,this.speedChange=.1,this.rotateSpeed=2,this.bulletSpeed=7,this.lastShootTime=0,this.shootTime=1200,this.shootTimeInterval=200,this.weaponDamage=10,this.lastShadowTime=0,this.shadowTime=50,this.hp=50,this.coinChance=.9,this.bodySize=32,this.depth=50,this.scale=.6,this.changeTargetTimeInterval=[0,0],this.body=e.physics.add.image(t.pos.x,t.pos.y,"enemy-flyer"),this.init(),this.setRandomTargetAngle()}init(){const{scale:e,depth:t,body:s,bodySize:i}=this;s.setScale(e),s.setImmovable(!0),s.setDepth(t);const n=a.getBodyPosWithOffset(s.displayWidth,s.displayHeight,e,i);s.setCircle(i,n.x,n.y)}act(e,t){this.update(e,t)}update(e,t){this.updateWorldCollisions(e,t),this.updateBase(e,t),this.updateMovement(e,t),this.updateAttack(e,t),this.updateShadows()}updateBase(e,t){const{scene:s,body:i,angle:n,targetAngle:o,rotateSpeed:r}=this,{deltaTime:c}=s,l=a.angleToRadians(n);i.x+=this.speed*Math.cos(l)*c,i.y+=this.speed*Math.sin(l)*c,this.angle=a.getNearestAngle(n,o,r),this.body.angle=n-90}updateMovement(e,t){const{speedChange:s,angle:i,targetAngle:n}=this;a.getAngleDiff(i,n)<3?this.speed<this.maxSpeed&&(this.speed+=s):this.speed>this.minSpeed&&(this.speed-=s)}updateAttack(e,t){const{scene:s,body:n,shootTime:o,shootTimeInterval:r}=this,c=s.gameTime;if(c>this.lastShootTime){const e=s.player.body,t=new i.Vector(e.x,e.y),l=a.getAngleBetweenPointsInDegrees(t,new i.Vector(n.x,n.y));if(Math.random()>.1){const e=a.angleToDegrees(.25+.3*Math.random());this.shoot(l+e),this.shoot(l-e)}else this.shoot(l);this.lastShootTime=c+o+Math.random()*r}}updateShadows(){const{scene:e,lastShadowTime:t,shadowTime:s}=this,i=e.gameTime;i>t&&(this.lastShadowTime=i+s,this.createShadow())}createShadow(){const{scene:e,body:t,scale:s,angle:a}=this,o=.25*Math.max(this.maxSpeed-this.speed,0);e.effects.push(new n.Shadow(e,{pos:new i.Vector(t.x,t.y),sprite:"enemy-flyer",lifeTime:250,scale:s,angle:a-90,alpha:.4-o}))}shoot(e){const{body:t,bulletSpeed:s,weaponDamage:n}=this;this.scene.utils.createSphereBullet({pos:new i.Vector(t.x,t.y),owner:o.EOwner.enemy,speed:a.getOffsetByRadians(a.angleToRadians(e),s),angle:e,sprite:"laser-red",explodeSprite:"red-explode",damage:n})}onOutOfWorld(e){this.setTargetAngle(e)}destroy(){const{scene:e,body:t}=this;e.utils.createTripleExplode(t.x,t.y),super.destroy()}}t.Flyer=c},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEnemiesArray=t.repeatEnemy=void 0;t.repeatEnemy=(e,t)=>new Array(t).fill(e);t.getEnemiesArray=(...e)=>e.reduce((e,s)=>Array.isArray(s)?[...e,...t.repeatEnemy(s[0],s[1])]:[...e,s],[])},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Boss1=t.Boss=void 0;var i=s(29);Object.defineProperty(t,"Boss",{enumerable:!0,get:function(){return i.Boss}});var a=s(92);Object.defineProperty(t,"Boss1",{enumerable:!0,get:function(){return a.Boss1}})},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Boss1=void 0;const i=s(2),a=s(4),n=s(1),o=s(29);class r extends o.Boss{constructor(e){super(e),this.maxHp=1500,this.hp=this.maxHp,this.rewardedScore=200,this.scale=.45,this.alpha=1,this.bodySize=100,this.maxSpeed=2,this.speed=this.maxSpeed,this.changeSpeed=.02,this.rotateSpeed=1.25,this.moveAngle=0,this.maxEnergy=1e3,this.energy=this.maxEnergy,this.bulletDamage=10,this.mainState="init",this.states={move:{active:!0,stopNearTarget:!0,targetPoint:new a.Vector(680,400),isNearTarget:!1,timeoutTime:0,methods:{activate:this.activateMoveState.bind(this),deactivate:this.deactivateMoveState.bind(this),update:this.updateMoveState.bind(this)}},focusOnPlayer:{active:!1,methods:{activate:this.activateFocusOnPlayerState.bind(this),deactivate:this.deactivateFocusOnPlayerState.bind(this),update:this.updateFocusOnPlayerState.bind(this)}},circleAttack:{active:!1,bulletsOrder:[],nextBulletTime:0,reloadTime:50,methods:{activate:this.activateCircleAttackState.bind(this),deactivate:this.deactivateCircleAttackState.bind(this),update:this.updateCircleAttackState.bind(this)}},laserAttack:{active:!1,bullets:0,nextBulletTime:0,reloadTime:400,methods:{activate:this.activateLaserAttackState.bind(this),deactivate:this.deactivateLaserAttackState.bind(this),update:this.updateLaserAttackState.bind(this)}},laserDoubleAttack:{active:!1,bullets:0,sideIndex:1,nextBulletTime:0,reloadTime:250,methods:{activate:this.activateLaserDoubleAttackState.bind(this),deactivate:this.deactivateLaserDoubleAttackState.bind(this),update:this.updateLaserDoubleAttackState.bind(this)}},splashAttack:{active:!1,shots:0,nextShotTime:0,reloadTime:400,methods:{activate:this.activateSplashAttackState.bind(this),deactivate:this.deactivateSplashAttackState.bind(this),update:this.updateSplashAttackState.bind(this)}},explodeAttack:{active:!1,bullets:0,nextBulletTime:0,reloadTime:400,methods:{activate:this.activateExplodeAttackState.bind(this),deactivate:this.deactivateExplodeAttackState.bind(this),update:this.updateExplodeAttackState.bind(this)}},visibility:{active:!1,isVisible:!0,nextChangeTime:0,reloadTime:5e3,methods:{activate:this.activateVisibilityState.bind(this),deactivate:this.deactivateVisibilityState.bind(this),update:this.updateVisibilityState.bind(this)}},bombs:{active:!1,bombs:0,nextBombTime:0,reloadTime:2e3,methods:{activate:this.activateBombsState.bind(this),deactivate:this.deactivateBombsState.bind(this),update:this.updateBombsState.bind(this)}},centerAttack:{active:!1,shots:0,nextShotTime:0,lastOffset:0,reloadTime:700,methods:{activate:this.activateCenterAttackState.bind(this),deactivate:this.deactivateCenterAttackState.bind(this),update:this.updateCenterAttackState.bind(this)}}};const t=this.scene.utils.getRandomPointOutside({distance:200});this.body=e.physics.add.image(t.x,t.y,"boss-1-ship"),this.body.setImmovable(!0),this.body.setCircle(20),this.body.setScale(this.scale),this.body.setDepth(101),this.centerBody(),this.activateVisibilityState()}centerBody(){const{scale:e,bodySize:t}=this,s=i.getOffsetByAngle(this.angle,0),a=i.getBodyPosWithOffset(this.body.displayWidth,this.body.displayHeight,e,t,s);this.body.setCircle(t,a.x,a.y)}act(e,t){const{angle:s}=this;this.body.active&&(this.updateMainState(),this.updateStates(),this.body.setAlpha(this.alpha),this.body.angle=s+90)}updateMainState(){const{mainState:e}=this,{isNearTarget:t}=this.states.move;switch(e){case"init":t&&this.setAttackState();break;case"attack":t?(this.activateCircleAttackState(),this.activateMoveState(),this.activateLaserAttackState()):this.energy<200?this.setMoveToCenterState():this.isAttackExisted()||this.setRandomAttack();break;case"moveToCenter":t&&this.setCenterAttackState();break;case"centerAttack":this.isAttackExisted()||this.setAttackState()}}setAttackState(){this.deactivateAllStates(),this.activateLaserAttackState(),this.activateMoveState(),this.activateFocusOnPlayerState(),this.energy=Math.max(this.energy+Math.random()*this.maxEnergy,this.maxEnergy),this.mainState="attack"}setMoveToCenterState(){const e=this.scene.getGameCenter();this.deactivateAllStates(),this.activateMoveState({targetPos:new a.Vector(e.x,e.y),noStopNearTarget:!0}),this.activateBombsState(),this.mainState="moveToCenter"}setCenterAttackState(){this.deactivateAllStates(),this.activateCenterAttackState(),this.speed=0,this.mainState="centerAttack"}updateStates(){Object.keys(this.states).forEach(e=>{this.states[e].active&&this.states[e].methods.update()})}deactivateAllStates(){Object.keys(this.states).forEach(e=>{"visibility"!==e&&this.states[e].methods.deactivate()})}activateMoveState(e={}){var t;const s=this.states.move,i=null!==(t=e.targetPos)&&void 0!==t?t:this.scene.utils.getRandomPos();s.active=!0,s.targetPoint=i,s.timeoutTime=0,e.noStopNearTarget?s.stopNearTarget=!1:s.stopNearTarget=!0}deactivateMoveState(){this.states.move.active=!1,this.states.move.timeoutTime=0}activateFocusOnPlayerState(){this.states.focusOnPlayer.active=!0}deactivateFocusOnPlayerState(){this.states.focusOnPlayer.active=!1,this.moveAngle=this.angle}activateCircleAttackState(){const e=i.shuffleArray([1,2,3,4,5,6,7,8]);this.states.circleAttack.active=!0,this.states.circleAttack.bulletsOrder=e}deactivateCircleAttackState(){this.states.circleAttack.active=!1,this.states.circleAttack.bulletsOrder=[]}activateLaserAttackState(){this.states.laserAttack.active=!0,this.states.laserAttack.bullets=6}deactivateLaserAttackState(){this.states.laserAttack.active=!1,this.states.laserAttack.bullets=0}activateLaserDoubleAttackState(){this.states.laserDoubleAttack.active=!0,this.states.laserDoubleAttack.bullets=12,this.energy-=100}deactivateLaserDoubleAttackState(){this.states.laserDoubleAttack.active=!1,this.states.laserDoubleAttack.bullets=0}activateSplashAttackState(){this.states.splashAttack.active=!0,this.states.splashAttack.shots=3,this.energy-=100}deactivateSplashAttackState(){this.states.splashAttack.active=!1,this.states.splashAttack.shots=0}activateExplodeAttackState(){this.states.explodeAttack.active=!0,this.states.explodeAttack.bullets=5,this.energy-=100}deactivateExplodeAttackState(){this.states.explodeAttack.active=!1,this.states.explodeAttack.bullets=0}activateVisibilityState(){const{scene:e,states:t}=this;t.visibility.active=!0,t.visibility.nextChangeTime=e.gameTime+t.visibility.reloadTime}deactivateVisibilityState(){this.states.visibility.active=!1}activateBombsState(){this.states.bombs.active=!0,this.states.bombs.bombs=10}deactivateBombsState(){this.states.bombs.active=!1,this.states.bombs.bombs=0}activateCenterAttackState(){this.states.centerAttack.active=!0,this.states.centerAttack.shots=5}deactivateCenterAttackState(){this.states.centerAttack.active=!1,this.states.centerAttack.shots=0}updateMoveState(){const{scene:e,body:t,moveAngle:s,rotateSpeed:n}=this,{deltaTime:o}=e,r=this.states.move,{targetPoint:c}=r,l=new a.Vector(t.x,t.y),h=new a.Vector(c.x,c.y),d=i.getAngleBetweenPointsInDegrees(h,l),u=i.angleToRadians(s);t.x+=this.speed*Math.cos(u)*o,t.y+=this.speed*Math.sin(u)*o;const m=i.getDistanceBetweenPoints(l,h);if(this.moveAngle=i.getNearestAngle(s,d,n),this.states.focusOnPlayer.active||(this.angle=this.moveAngle),r.isNearTarget=m<15,m<150&&(r.timeoutTime<120?r.timeoutTime+=1:r.isNearTarget=!0),this.states.move.stopNearTarget)if(m<200){this.activateFocusOnPlayerState();const e=Math.max(m/(200/this.maxSpeed));this.speed=Math.max(e,.5)}else this.speed=Math.min(this.changeSpeed+this.speed,this.maxSpeed);else this.speed=Math.min(this.changeSpeed+this.speed,this.maxSpeed)}updateFocusOnPlayerState(){const{scene:e,body:t,angle:s,rotateSpeed:n}=this,o=e.utils.getAngleToPlayer(new a.Vector(t.x,t.y));this.angle=i.getNearestAngle(s,o,n)}updateCircleAttackState(){const{scene:e,body:t}=this,s=this.states.circleAttack;if(e.gameTime<s.nextBulletTime)return;const n=s.bulletsOrder.shift();if(n){const o=new a.Vector(t.x,t.y),r=45*n,c=i.getOffsetByAngle(r,150),l=new a.Vector(o.x+c.x,o.y+c.y);this.shootBullet({bulletPos:l,speed:0,angle:0,sprite:"sphere-bullet",scale:.15,bodySize:32,states:[{name:"changeSize",time:50,scaleFn:e=>e+.01},{name:"changeSpeed",time:0,speedFn:()=>{const t=e.utils.getAngleToPlayer(l);return i.getOffsetByRadians(i.angleToRadians(i.spreadAngle(t,20)),2+Math.random())}}]}),s.nextBulletTime=e.gameTime+s.reloadTime}else this.deactivateCircleAttackState()}updateLaserAttackState(){const{scene:e,body:t}=this,s=this.states.laserAttack;if(s.bullets<=0)this.deactivateLaserAttackState();else if(e.gameTime>s.nextBulletTime){const i=new a.Vector(t.x,t.y);this.shootBullet({bulletPos:i,angle:this.scene.utils.getAngleToPlayer(new a.Vector(t.x,t.y)),speed:3,sprite:"laser-red"}),s.nextBulletTime=e.gameTime+s.reloadTime,s.bullets-=1}}updateLaserDoubleAttackState(){const{scene:e,body:t}=this,s=this.states.laserDoubleAttack;if(s.bullets<=0)this.deactivateLaserDoubleAttackState();else if(e.gameTime>s.nextBulletTime){const i=this.angle+110*s.sideIndex,n=this.getAttackPos(i);this.shootBullet({bulletPos:n,angle:this.scene.utils.getAngleToPlayer(new a.Vector(t.x,t.y)),speed:5,sprite:"laser-red"}),s.nextBulletTime=e.gameTime+s.reloadTime,s.bullets-=1,s.sideIndex=0-s.sideIndex}}updateSplashAttackState(){const{scene:e}=this,t=this.states.splashAttack;if(t.shots<=0)this.deactivateSplashAttackState();else if(e.gameTime>t.nextShotTime){const s=7,i=20;for(let e=0;e<s;e++){const t=this.angle+e*i-Math.floor(s/2)*i,a=this.getAttackPos(t);this.shootBullet({bulletPos:a,angle:t,speed:4,sprite:"sphere-bullet",scale:.25})}t.nextShotTime=e.gameTime+t.reloadTime,t.shots-=1}}updateExplodeAttackState(){const{scene:e,body:t}=this,s=this.states.explodeAttack;if(s.bullets<=0)this.deactivateExplodeAttackState();else if(e.gameTime>s.nextBulletTime){const i={bulletPos:new a.Vector(t.x,t.y),angle:this.angle,speed:5,sprite:"sphere-bullet",scale:.1};this.shootBullet(Object.assign(Object.assign({},i),{states:[{name:"changeSize",time:60,scaleFn:e=>e+.007},{name:"changeSpeedCoef",time:40+40*Math.random(),speedFn:e=>e-.01},{name:"explode",bulletFn:(e,t)=>{this.shootBullet(Object.assign(Object.assign({},i),{bulletPos:new a.Vector(e.body.x,e.body.y),angle:45*t,scale:.2}))}}]})),s.nextBulletTime=e.gameTime+s.reloadTime,s.bullets-=1}}updateVisibilityState(){const{scene:e}=this,t=this.states.visibility;t.isVisible&&this.alpha<1?this.alpha=Math.max(this.alpha+=.01,0):this.alpha>0&&(this.alpha=Math.max(this.alpha-=.01,0)),e.gameTime>t.nextChangeTime&&(t.isVisible=!t.isVisible,t.nextChangeTime=e.gameTime+t.reloadTime)}updateBombsState(){const{scene:e,body:t}=this,s=this.states.bombs;if(s.bombs<=0)this.deactivateBombsState();else if(e.gameTime>s.nextBombTime){const i={bulletPos:new a.Vector(t.x,t.y),angle:0,speed:0,sprite:"sphere-bullet",scale:.1};this.shootBullet(Object.assign(Object.assign({},i),{states:[{name:"changeSize",time:60,scaleFn:e=>e+.007},{name:"explode",bulletFn:(e,t)=>{this.shootBullet(Object.assign(Object.assign({},i),{bulletPos:new a.Vector(e.body.x,e.body.y),angle:45*t,scale:.25,speed:5}))}}]})),s.nextBombTime=e.gameTime+s.reloadTime,s.bombs-=1}}updateCenterAttackState(){const{scene:e,body:t}=this,s=this.states.centerAttack;if(s.shots<=0)this.deactivateCenterAttackState();else if(e.gameTime>s.nextShotTime){const o=12,r=360/o;for(let e=0;e<o;e++){const o=new a.Vector(t.x,t.y),c=s.lastOffset+r*e,l=i.getOffsetByAngle(c,150),h=new a.Vector(o.x+l.x,o.y+l.y);this.scene.utils.createSphereBullet({pos:h,owner:n.EOwner.enemy,speed:new a.Vector(0,0),angle:0,sprite:"sphere-bullet",explodeSprite:"red-explode",damage:10,scale:.15,bodySize:32,states:[{name:"changeSize",time:50,scaleFn:e=>e+.01},{name:"changeSpeed",time:0,speedFn:()=>i.getOffsetByRadians(i.angleToRadians(i.spreadAngle(c,20)),2)}]})}s.nextShotTime=e.gameTime+s.reloadTime,s.shots-=1,s.lastOffset+=5+Math.random()*(r-10)}}shootBullet(e){this.scene.utils.createSphereBullet({pos:e.bulletPos,owner:n.EOwner.enemy,speed:i.getOffsetByRadians(i.angleToRadians(e.angle),e.speed),angle:e.angle,sprite:e.sprite,explodeSprite:"red-explode",damage:this.bulletDamage,scale:e.scale,bodySize:e.bodySize,states:e.states})}setRandomAttack(){const e=Math.random();e>.66?this.activateLaserDoubleAttackState():e>.33?this.activateSplashAttackState():this.activateExplodeAttackState()}getAttackPos(e){const{body:t}=this,s=new a.Vector(t.x,t.y),n=i.getOffsetByAngle(e,80);return new a.Vector(s.x+n.x,s.y+n.y)}isAttackExisted(){const{explodeAttack:e,laserDoubleAttack:t,splashAttack:s,centerAttack:i}=this.states;return e.bullets>0||t.bullets>0||s.shots>0||i.shots>0}}t.Boss1=r},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enemiesConfig=void 0,t.enemiesConfig={bot:{pluralName:"bots.plural"},hunter:{pluralName:"hunters.plural"},ufo:{pluralName:"ufo.plural"},flyer:{pluralName:"flyers.plural"}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.boostersConfig=void 0,t.boostersConfig={spawnIntervalTime:12e3,spawnIntervalRangeTime:1e4,lifeTime:7e3,actionTime:1e4,types:{speed:{additionalSpeed:1},damage:{additionalXDamage:2},regenerator:{hpPerSecond:5}}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UI=void 0;const i=s(7),a=s(4),n=s(6),o=s(97);t.UI=class{constructor(e){this.scene=e}drawOriginalText(e){const{scene:t}=this,{x:s,y:i,text:a,fontSize:o,origin:r,color:c,align:l,maxWidth:h,depth:d,alpha:u}=e,m={fontFamily:n.DEFAULT_FONT,fontSize:1.5*o+"px",lineSpacing:5,color:"#fff"};l&&(m.align=l);const g=t.add.text(s,i,a,m);return g.setScale(.65),r&&g.setOrigin(r[0],r[1]),u&&g.setAlpha(u),c&&g.setTint(c),g}drawBitmapText(e){const{scene:t}=this,{x:s,y:i,text:a,fontSize:o,origin:r,alignCenter:c,maxWidth:l,tint:h,depth:d,isDynamic:u,alpha:m}=e,g=u?t.add.dynamicBitmapText(s,i,n.SECONDARY_FONT,a,o):t.add.bitmapText(s,i,n.SECONDARY_FONT,a,o);return r&&g.setOrigin(r[0],r[1]),c&&g.setCenterAlign(),l&&g.setMaxWidth(l),h&&g.setTint(h),d&&g.setDepth(d),m&&g.setAlpha(m),g}drawDynamicBitmapText(e){return this.drawBitmapText(Object.assign(Object.assign({},e),{isDynamic:!0}))}drawImage(e){const{scene:t}=this,{x:s,y:i,texture:a,scale:n,depth:o,origin:r}=e,c=t.add.image(s,i,a);return n&&c.setScale(n),o&&c.setDepth(o),r&&c.setOrigin(r[0],r[1]),c}drawRainbowText(e){const{scene:t}=this,{x:s,y:r}=e,c=i.__rest(e,["x","y"]);return new o.UIRainbowText(t,Object.assign({pos:new a.Vector(s,r),fontSize:23,color:n.colors.green},c))}drawButton(e){const{scene:t}=this,{x:s,y:r}=e,c=i.__rest(e,["x","y"]);return new o.UIRectButton(t,Object.assign({pos:new a.Vector(s,r),width:n.defaultButtonSize.width,height:n.defaultButtonSize.height},c))}drawArcButton(e){const{scene:t}=this,{x:s,y:n}=e,r=i.__rest(e,["x","y"]);return new o.UIArcButton(t,Object.assign({pos:new a.Vector(s,n)},r))}drawCosmons(e){const{scene:t}=this,{x:s,y:n}=e,r=i.__rest(e,["x","y"]);return new o.UICosmons(t,Object.assign({pos:new a.Vector(s,n)},r))}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hexColors=t.colors=void 0,t.colors={white:16777215,green:65280,red:16711680,gray:14540253,yellow:16548895,blue:3327,aqua:36863},t.hexColors={white:"#ffffff",green:"#00ff00"}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UIRainbowText=t.UICosmons=void 0;s(7).__exportStar(s(98),t);var i=s(101);Object.defineProperty(t,"UICosmons",{enumerable:!0,get:function(){return i.UICosmons}});var a=s(102);Object.defineProperty(t,"UIRainbowText",{enumerable:!0,get:function(){return a.UIRainbowText}})},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UIRectButton=t.UIArcButton=void 0;var i=s(99);Object.defineProperty(t,"UIArcButton",{enumerable:!0,get:function(){return i.UIArcButton}});var a=s(100);Object.defineProperty(t,"UIRectButton",{enumerable:!0,get:function(){return a.UIRectButton}})},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UIArcButton=void 0;const i=s(6);t.UIArcButton=class{constructor(e,t){this.scene=e,this.params=t,this.init()}init(){const{scene:e,params:t}=this,s=new Phaser.Geom.Circle(t.pos.x,t.pos.y,t.arc),a=e.add.graphics({lineStyle:{width:2,color:i.colors.white},fillStyle:{color:i.colors.white}}).setInteractive(s,Phaser.Geom.Circle.Contains);a.on("pointerdown",()=>{var e,s;null===(s=null===(e=t.callbacks)||void 0===e?void 0:e.onPointerDown)||void 0===s||s.call(e)}),a.strokeCircleShape(s),t.render()}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UIRectButton=void 0;const i=s(6);t.UIRectButton=class{constructor(e,t){this.scene=e,this.params=t,this.init()}init(){const{scene:e,params:t}=this,s=t.pos.x-t.width/2,a=t.pos.y-t.height/2,n=new Phaser.Geom.Rectangle(s,a,t.width,t.height),o=t.isDisabled?.5:1;this.graphics=e.add.graphics({lineStyle:{width:2,color:i.colors.white},fillStyle:{color:i.colors.white}}).setInteractive(n,Phaser.Geom.Rectangle.Contains).setAlpha(o),this.graphics.strokeRectShape(n),this.text=this.scene.ui.drawOriginalText({x:t.pos.x,y:t.pos.y,fontSize:16,origin:[.5,.5],align:"center",alpha:o,text:t.text}),this.initListeners(n)}initListeners(e){const{graphics:t,params:s,text:a}=this;t.on("pointerdown",()=>{var e,t;s.isDisabled||null===(t=null===(e=s.callbacks)||void 0===e?void 0:e.onPointerDown)||void 0===t||t.call(e)}),t.on("pointerover",()=>{s.isDisabled||(t.lineStyle(2,i.colors.green),a.tint=i.colors.green,document.body.style.cursor="pointer",t.strokeRectShape(e))}),t.on("pointerout",()=>{s.isDisabled||(t.lineStyle(2,i.colors.white),a.tint=i.colors.white,document.body.style.cursor="default",t.strokeRectShape(e))}),t.on("pointerdown",()=>{document.body.style.cursor="default"})}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UICosmons=void 0;const i=s(4),a=s(32);class n extends a.UIComponent{constructor(e,t){super(e),this.params=t,this.init()}init(){const{scene:e,params:t}=this,{pos:s,value:i,depth:a,prefix:n}=t,o=this.getTextOffset();this.starImage=e.ui.drawImage({x:s.x,y:s.y,texture:"coin-gold",origin:[0,.5],depth:a}),n&&(this.prefixBitmapText=e.ui.drawBitmapText({x:s.x+this.starImage.width+12-4,y:s.y+4+1,text:n,fontSize:22,origin:[0,.5],depth:a})),this.valueText=e.ui.drawBitmapText({x:s.x+this.starImage.width+12+o,y:s.y+4,text:i.toString(),fontSize:22,origin:[0,.5],depth:a}),this.updatePosition(s)}getTextOffset(){return this.params.prefix?12:0}getHalfWidth(){const e=this.getTextOffset();return(this.starImage.width+12+this.valueText.width+e)/2}updatePosition(e){const{params:t}=this,{isCentered:s,prefix:a}=t,n=a?12:0,o=s?e.x-this.getHalfWidth():e.x,r=new i.Vector(o,e.y);this.starImage.x===r.x&&this.starImage.y===r.y||(this.starImage.x=r.x,this.starImage.y=r.y,this.prefixBitmapText&&(this.prefixBitmapText.x=r.x+this.starImage.width+12-4,this.prefixBitmapText.y=r.y+4+1),this.valueText.x=r.x+this.starImage.width+12+n,this.valueText.y=r.y+4)}updateValue(e){this.valueText.setText(e.toString())}}t.UICosmons=n},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UIRainbowText=void 0;const i=s(32);class a extends i.UIComponent{constructor(e,t){super(e),this.rainbowColorIdx=0,this.rainbowColorOffset=0,this.delay=0,this.rainbowWave=0,this.params=t,this.init()}init(){const{scene:e}=this,{text:t,pos:s,color:i,fontSize:a}=this.params;this.rainbowCallback=this.rainbowCallback.bind(this);e.ui.drawDynamicBitmapText({x:s.x,y:s.y,text:t,fontSize:a,origin:[.5,.5],alignCenter:!0,tint:i}).setDisplayCallback(this.rainbowCallback)}update(){this.updateRainbow()}updateRainbow(){this.rainbowColorIdx=0,6==this.delay++&&(this.rainbowColorOffset=(this.rainbowColorOffset+1)%4,this.delay=0)}rainbowCallback(e){return this.rainbowColorIdx=(this.rainbowColorIdx+1)%4,e.y=2*Math.cos(this.rainbowWave+this.rainbowColorIdx),this.rainbowWave+=.005,e}}t.UIRainbowText=a},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MenuScene=void 0;const i=s(3),a=s(6),n=s(1),o=s(2),r=s(10);let c=!1;class l extends r.Scene{constructor(){super({key:n.ESceneName.menu})}preload(){this.load.image("coin-gold","assets/images/bonus/star-gold.png"),this.load.image("question-mark","assets/images/interface/question-mark.png"),c||(this.load.bitmapFont(a.SECONDARY_FONT,"assets/fonts/atari/bitmap/gem.png","assets/fonts/atari/bitmap/gem.xml"),c=!0)}create(){const e=this.getGameSize(),t=this.getGameCenter(),s=[45,50,70,60];let i=t.y-125;this.drawTitle(t.x,i),i+=s[0],this.drawSubtitle(t.x,i),i+=s[1],this.ui.drawCosmons({x:t.x,y:i,value:this.getData().score,isCentered:!0,depth:100}),i+=s[2],this.drawLevelText(t.x,i),i+=s[3],this.drawStartButton(t.x,i),this.getSettings().isMobile?this.drawInfoButton(e.width-50,e.height-50):this.drawLastUpdatedText(t.x,e.height-35)}update(){this.rainbowText.update()}drawTitle(e,t){this.ui.drawBitmapText({x:e,y:t,text:i.mainConfig.gameTitle,fontSize:32,origin:[.5,.5]})}drawSubtitle(e,t){this.rainbowText=this.ui.drawRainbowText({x:e,y:t,text:i.mainConfig.gameSubtitle})}drawLevelText(e,t){const{getText:s}=this.game.i18n,i=this.getData().level+1;this.ui.drawOriginalText({x:e,y:t,text:`${s("nextLevel")}: ${i}. ${s(`level${i}Title`)}`,fontSize:19,origin:[.5,.5]})}drawStartButton(e,t){this.ui.drawButton({x:e,y:t,width:a.defaultButtonSize.width,height:a.defaultButtonSize.height,text:this.game.i18n.getText("gameStart"),callbacks:{onPointerDown:()=>{this.scene.start(n.ESceneName.preview,{level:this.getData().level}),this.getSettings().isMobile&&setTimeout(()=>{o.showFullscreen(this.game.canvas)},a.FULLSCREEN_TIMEOUT_DELAY)}}})}drawLastUpdatedText(e,t){const{getText:s}=this.game.i18n;this.ui.drawOriginalText({x:e,y:t,text:`${s("lastUpdated")}: ${new Date(i.env.buildTime).toLocaleString()}`,fontSize:16,origin:[.5,.5]})}drawInfoButton(e,t){this.ui.drawArcButton({x:e,y:t,arc:20,render:()=>{this.add.text(e,t,"?",{font:"22px Arial",fill:"#fff"}).setOrigin(.5)},callbacks:{onPointerDown:()=>{this.scene.start(n.ESceneName.info,{})}}})}}t.MenuScene=l},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PreviewScene=void 0;const i=s(6),a=s(3),n=s(1),o=s(10);class r extends o.Scene{constructor(){super({key:n.ESceneName.preview})}init(e){this.params=e}create(){const{params:e}=this,{level:t}=e,s=this.getGameSize(),n=this.getGameCenter(),o=s.width/2,r=n.y;this.titleText=this.ui.drawOriginalText({x:o,y:0,text:`${t+1}. ${this.game.i18n.getText(`level${t+1}Title`)}`,fontSize:32,origin:[.5,.5],align:"center"}),this.missionText=this.ui.drawOriginalText({x:o,y:0,text:this.game.translations.getMissionText(a.levelsConfig[this.params.level].mode),fontSize:18,align:"center",origin:[.5,.5],maxWidth:450,color:i.colors.green});const c=r-(this.titleText.height+this.missionText.height)/2;this.titleText.y=c-25,this.missionText.y=this.titleText.y+this.titleText.height,this.drawGoButton(this.missionText.y+this.missionText.height+30)}drawGoButton(e){const t=this.getGameSize();this.ui.drawButton({x:t.width/2,y:e,width:120,height:i.defaultButtonSize.height,text:this.game.i18n.getText("go"),callbacks:{onPointerDown:()=>{this.scene.start(n.ESceneName.game,s)}}});const s={level:this.params.level}}}t.PreviewScene=r},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WinScene=void 0;const i=s(3),a=s(22),n=s(6),o=s(1),r=s(10);class c extends r.Scene{constructor(){super({key:o.ESceneName.win})}preload(){}init(e){this.params=e}create(){const e=this.getData(),{score:t,isFlawlessVictory:s}=this.params,i=s?Math.ceil(.25*t):0,a=t+i,o=this.getGameCenter(),r=o.x;let c=o.y-120;const l=[35,180],h={currentLevel:e.level,score:t,totalScore:a,flawlessVictoryScores:i};this.drawTitle(r,c),c+=l[0],this.drawScores(r,c,h),c+=l[1],this.drawNextButton(r+Math.floor(n.defaultButtonSize.width/2)+n.DEFAULT_BUTTON_SPACE/2,c),this.drawMenuButton(r-Math.floor(n.defaultButtonSize.width/2)-n.DEFAULT_BUTTON_SPACE/2,c),this.updateGlobalData({totalScore:a})}drawTitle(e,t){const{getText:s}=this.game.i18n;this.ui.drawOriginalText({x:e,y:t,text:s("winTitle"),origin:[.5,.5],fontSize:28,color:n.colors.green})}drawScores(e,t,s){const{getText:i}=this.game.i18n,a=`${i("score")}: ${s.score}\n${i("flawlessVictory")}: ${s.flawlessVictoryScores}\n${i("totalScore")}: ${s.totalScore}`;this.ui.drawOriginalText({x:e,y:t,text:a,fontSize:18,origin:[.5,0],align:"center"}),this.ui.drawCosmons({x:e,y:t+105,isCentered:!0,value:s.totalScore,prefix:"+",depth:100})}drawNextButton(e,t){const{getText:s}=this.game.i18n,a=this.getData();this.ui.drawButton({x:e,y:t,text:s("next"),isDisabled:i.mainConfig.totalLevelsCount<=a.level+1,callbacks:{onPointerDown:()=>{this.scene.start(o.ESceneName.preview,{level:a.level})}}})}drawMenuButton(e,t){const{getText:s}=this.game.i18n;this.ui.drawButton({x:e,y:t,text:s("goToMenu"),callbacks:{onPointerDown:()=>{this.scene.start(o.ESceneName.menu)}}})}updateGlobalData(e){const t=this.getData(),{level:s}=t;s+1<i.mainConfig.totalLevelsCount&&this.setData("level",s+1),this.setData("score",t.score+e.totalScore),a.LocalStorage.setGameData({score:t.score})}}t.WinScene=c},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventEmitter=t.Emitter=void 0;class i{constructor(){this.listeners=[]}subscribe(e,t){this.listeners.push({type:e,cb:t})}unsubscribe(e,t){this.listeners=this.listeners.filter(s=>s.cb!==t&&s.type!==e)}dispatch(e){this.listeners.forEach(t=>{t.type===e.type&&(console.log("=== dispatch action ===",e),t.cb(e.payload))})}}t.Emitter=i;const a=new i;t.EventEmitter=a},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(2);t.default=new class{constructor(){this.setItem=(e,t)=>{try{window.localStorage.setItem(e,t)}catch(e){console.error(e)}},this.getItem=e=>{try{return window.localStorage.getItem(e)}catch(e){console.error(e)}return null}}getGameData(){const e=i.decryptValue(this.getItem("data"));if(e)try{return JSON.parse(e)}catch(e){console.error(e)}return null}setGameData(e){const t=i.encryptValue(JSON.stringify(e));t?(this.setItem("data",t),i.debugLog("save",e)):console.error("Failed to save data!")}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(2);t.default=class{constructor(e){this.dictionary={},this.currentLang=e,this.getText=this.getText.bind(this),this.getPluralText=this.getPluralText.bind(this),this.getTemplateText=this.getTemplateText.bind(this)}loadLang(e){return new Promise((t,s)=>{if(this.dictionary[e])return t(void 0);i.debugLog("i18n","load dictionary"),fetch(`assets/i18n/${e}.json`).then(e=>e.json()).then(s=>{this.dictionary[e]=s,t(void 0)}).catch(e=>{console.error(e),s(e)})})}getKeyValue(e){var t;return null===(t=this.dictionary[this.currentLang])||void 0===t?void 0:t[e]}getText(e){const t=this.getKeyValue(e);return t||this.throwNoKeyError(e),t}getPluralText(e,t){const s=this.getKeyValue(e);return s||this.throwNoKeyError(e),i.pluralize(t.plularNumber,s,{isGenetiveForm:t.isGenetiveForm})}getTemplateText(e,t){const s=this.getKeyValue(e);return s||this.throwNoKeyError(e),i.textTemplate(s,t.args)}throwNoKeyError(e){throw new Error(`Key "${e}" does not exist in "${this.currentLang}" language`)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Translations=void 0;const i=s(3),a=s(1);t.Translations=class{constructor(e){this.getMissionText=e=>{const{getText:t,getPluralText:s,getTemplateText:n}=this.game.i18n;switch(e.type){case a.EGameMode.totalKills:{const i=e.target;return`${t("mission")}: ${t("destroy")} ${i} ${s("invaders.plural",{plularNumber:i,isGenetiveForm:!0})}`}case a.EGameMode.enemyKills:{const a=e.target,n=Object.keys(a).map(e=>{const t=a[e],n=i.enemiesConfig[e].pluralName;return`${t} ${s(n,{plularNumber:t})}`}).join(" / ");return`${t("mission")}: ${t("destroy")} ${n}`}case a.EGameMode.time:{const i=e.target;return`${t("mission")}: ${t("stayAliveFor")} ${i} ${s("seconds.plural",{plularNumber:i})}`}case a.EGameMode.waves:{const i=e.target.length,a=s("wave.plural",{plularNumber:i,isGenetiveForm:!0});return`${t("mission")}: ${n("defeatWavesCount.template",{args:{count:i,wave:a}})}`}case a.EGameMode.boss:return t("winBoss")}},this.game=e}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FailScene=void 0;const i=s(6),a=s(1),n=s(10);class o extends n.Scene{constructor(){super({key:a.ESceneName.fail})}preload(){}init(e){this.params=e}create(){this.setData("level",0);const e=this.getGameCenter(),{getText:t}=this.game.i18n;let s=e.y-60;const a=e.x,n=[40,67];this.ui.drawOriginalText({x:a,y:s,text:t("failTitle"),origin:[.5,.5],fontSize:28,color:i.colors.red}),s+=n[0],this.ui.drawOriginalText({x:a,y:s,text:t("failSubtitle"),fontSize:19,origin:[.5,.5],align:"center",color:i.colors.white}),s+=n[1],this.drawMenuButton(a,s)}drawMenuButton(e,t){const{getText:s}=this.game.i18n;this.ui.drawButton({x:e,y:t,width:i.defaultButtonSize.width,height:i.defaultButtonSize.height,text:s("goToMenu"),callbacks:{onPointerDown:()=>{this.scene.start(a.ESceneName.menu)}}})}}t.FailScene=o},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GameScene=void 0;var i=s(112);Object.defineProperty(t,"GameScene",{enumerable:!0,get:function(){return i.GameScene}})},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GameScene=void 0;const i=s(3),a=s(2),n=s(113),o=s(10),r=s(137),c=s(1),l=s(138),h=s(139),d=s(143);let u,m=!1;class g extends o.Scene{constructor(){super({key:c.ESceneName.game}),this.enemies=[],this.bullets=[],this.effects=[],this.bonuses=[],this.boss=null,this.score=0,this.stats=d.getInitialGameStats(),this.isWon=!1,this.isFail=!1,this.gameTime=0,this.deltaTime=0}preload(){}init(e){this.params=e}create(){this.resetState();const e=this.getGameSize(),t=Math.random()>.5?"background-1":"background-2";this.physics.world.setBounds(0,0,e.width,e.height),this.background=this.add.image(0,0,t).setOrigin(0,0).setAlpha(.2),this.updateBackgroundColor(),u=this.add.graphics({lineStyle:{width:2,color:65280},fillStyle:{color:16711680}}),this.player=new r.Player(this),this.utils=new h.Utils(this),this.initListeners(),this.initServices(),this.initTimer(),this.getSettings().isMobile&&this.initPointers(),this.shakeCamera=this.cameras.add(0,0,e.width,e.height),m=!0}initListeners(){this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.M).on("down",()=>{this.player.body.active&&this.scene.start(c.ESceneName.menu)})}initServices(){this.services={stars:new n.StarsService(this,{count:20}),meteors:new n.MeteorsService(this,{}),interface:new n.InterfaceService(this,{}),level:new n.LevelService(this,{}),comets:new n.CometsService(this,{}),bonuses:new n.BonusesService(this,{}),logger:new n.LoggerService(this,{})}}initTimer(){}initPointers(){const e=this.getGameSize();m||this.input.addPointer(1),this.input.on("pointerdown",t=>{const s=new Phaser.Geom.Circle(i.mainConfig.touch.areaOffset,e.height-i.mainConfig.touch.areaOffset,i.mainConfig.touch.areaSize),a=new Phaser.Geom.Circle(e.width-i.mainConfig.touch.areaOffset,e.height-i.mainConfig.touch.areaOffset,i.mainConfig.touch.areaSize),n=new Phaser.Geom.Circle(t.x,t.y,i.mainConfig.touch.pointerSize);Phaser.Geom.Intersects.CircleToCircle(s,n)&&this.player.setPointer("left",t),Phaser.Geom.Intersects.CircleToCircle(a,n)&&this.player.setPointer("right",t)},this),this.input.on("pointerup",e=>{this.player.pointers.left===e&&(this.player.pointers.left=null),this.player.pointers.right===e&&(this.player.pointers.right=null)},this)}onClockEvent(){}update(e,t){var s;u.clear(),this.deltaTime=t/i.mainConfig.scene.delta,this.gameTime+=15*this.deltaTime,this.enemies.forEach(s=>{s.act(e,t)}),this.bullets.forEach(s=>{s.act(e,t)}),this.effects.forEach(e=>{e.act()}),Object.keys(this.services).forEach(s=>{this.services[s].act(e,t)}),this.bonuses.forEach(e=>{e.act()}),null===(s=this.boss)||void 0===s||s.act(e,t),this.player.act(e,t)}resetState(){this.bullets=[],this.enemies=[],this.effects=[],this.bonuses=[],this.boss=null,this.score=0,this.text="",this.stats=d.getInitialGameStats(),this.isWon=!1,this.isFail=!1,this.gameTime=0}onFail(){this.isFail=!0,setTimeout(()=>{this.scene.start(c.ESceneName.fail)},i.mainConfig.scene.failTimeoutTime)}onWin(){this.isWon||this.isFail||(this.isWon=!0,setTimeout(()=>{this.isFail||this.scene.start(c.ESceneName.win,{score:this.score,isFlawlessVictory:this.player.hp===this.player.maxHp})},i.mainConfig.scene.winTimeoutTime))}shakeScreen(){this.shakeCamera.shake(500,.003)}updateBackgroundColor(){this.background.setTint(a.getRandomHexColor(),a.getRandomHexColor(),a.getRandomHexColor(),a.getRandomHexColor())}isBoosterActive(){return null!==this.player.currentBooster}getActiveBooster(){return this.player.currentBooster}getStats(){return this.stats}}t.GameScene=g,g.prototype.preload=l.preload},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Service=t.BonusesService=t.CometsService=t.LevelService=t.InterfaceService=t.LoggerService=t.MeteorsService=t.StarsService=void 0;var i=s(114);Object.defineProperty(t,"StarsService",{enumerable:!0,get:function(){return i.StarsService}});var a=s(116);Object.defineProperty(t,"MeteorsService",{enumerable:!0,get:function(){return a.MeteorsService}});var n=s(118);Object.defineProperty(t,"LoggerService",{enumerable:!0,get:function(){return n.LoggerService}});var o=s(119);Object.defineProperty(t,"InterfaceService",{enumerable:!0,get:function(){return o.InterfaceService}});var r=s(120);Object.defineProperty(t,"LevelService",{enumerable:!0,get:function(){return r.LevelService}});var c=s(133);Object.defineProperty(t,"CometsService",{enumerable:!0,get:function(){return c.CometsService}});var l=s(135);Object.defineProperty(t,"BonusesService",{enumerable:!0,get:function(){return l.BonusesService}});var h=s(8);Object.defineProperty(t,"Service",{enumerable:!0,get:function(){return h.Service}})},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StarsService=void 0;const i=s(115),a=s(8);class n extends a.Service{constructor(e,t){super(e),this.stars=[],this.params=t,this.init()}init(){const{scene:e}=this,{count:t}=this.params;for(let s=0;s<t;s++)this.stars.push(new i.Star(e,{initialAlphaCoef:500*s}))}act(e,t){this.update(e,t)}update(e,t){this.stars.forEach(s=>{s.act(e,t)})}}t.StarsService=n},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Star=void 0;t.Star=class{constructor(e,t){const s=e.getGameSize();this.scene=e,this.body=e.ui.drawImage({x:Math.random()*s.width,y:Math.random()*s.height,texture:"star"}),this.initialCoef=t.initialAlphaCoef,this.body.setDepth(0),this.body.setScale(.25+.25*Math.random())}act(e,t){this.update(e,t)}update(e,t){const{scene:s,body:i,initialCoef:a,lastRelocationTime:n}=this,o=s.gameTime;i.angle+=4,i.alpha=Math.sin((o+a)/1500);const r=this.scene.getGameSize();o>n&&i.alpha<=.5&&(i.x=Math.random()*r.width,i.y=Math.random()*r.height,this.lastRelocationTime=o+1e3)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MeteorsService=void 0;const i=s(4),a=s(117),n=s(2),o=s(8);class r extends o.Service{constructor(e,t){super(e),this.meteors=[],this.meteorIntervalTime=1e3,this.meteorIntervalTimeRange=1e3,this.lastMeteorTime=0,this.maxCount=25,this.params=t,this.init()}init(){for(let e=0;e<n.getRandomInt(5,8);e++)this.spawnMeteor({outside:!1});for(let e=0;e<n.getRandomInt(3,5);e++)this.spawnMeteor({outside:!0})}act(e,t){this.update(e,t)}update(e,t){const s=this.scene.getGameSize(),{scene:i,maxCount:a}=this,{deltaTime:n,gameTime:o}=i;o>this.lastMeteorTime&&this.meteors.length<a&&this.spawnMeteor({outside:!0}),this.meteors.forEach(e=>{const{body:t,speed:i}=e;t.angle+=.5*i.x*n,t.x+=i.x*n,t.y+=i.y*n,(t.x>s.width+200||t.y>s.height+200)&&(this.meteors=this.meteors.filter(t=>t!==e),t.destroy())})}spawnMeteor({outside:e}){const{scene:t,meteorIntervalTime:s,meteorIntervalTimeRange:o}=this,r=t.gameTime,c=.5+1*Math.random(),l=this.scene.getGameSize(),h=n.angleToRadians(45),d=.25+2.5*Math.random(),u=new i.Vector(d*Math.cos(h),d*Math.sin(h)),m=Math.random()>.5?"x":"y",g=e?{x:"x"===m?Math.random()*(.75*l.width)-200:-200,y:"y"===m?Math.random()*(.75*l.height)-200:-200}:{x:l.width*Math.random(),y:l.height*Math.random()};this.meteors.push(new a.Meteor(t,g,u,{spriteIndex:1+Math.floor(4*Math.random()),alpha:.25+.4*Math.random(),scale:c})),this.lastMeteorTime=Math.random()*o+r+s*c}}t.MeteorsService=r},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Meteor=void 0;t.Meteor=class{constructor(e,t,s,i){this.scene=e,this.body=e.ui.drawImage({x:t.x,y:t.y,texture:"meteor-"+i.spriteIndex}),this.speed=s,this.body.setAlpha(i.alpha),this.body.setDepth(5),this.body.setScale(i.scale,i.scale)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoggerService=void 0;const i=s(3),a=s(8);class n extends a.Service{constructor(e,t){super(e),this.lastLogTime=0,this.params=t,this.init()}init(){}act(){this.update()}update(){const e=this.scene,t=e.gameTime;t>this.lastLogTime&&i.IS_DEV&&(console.group("Stats"),console.log("effects: "+e.effects.length),console.log("enemies: "+e.enemies.length),console.log("bullets: "+e.bullets.length),console.groupEnd(),this.lastLogTime=t+2e3)}}t.LoggerService=n},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InterfaceService=void 0;const i=s(3),a=s(6),n=s(4),o=s(1),r=s(8),c={[o.EBoosterType.damage]:a.colors.red,[o.EBoosterType.speed]:a.colors.yellow,[o.EBoosterType.regenerator]:a.colors.green,[o.EBoosterType.shield]:a.colors.aqua};class l extends r.Service{constructor(e,t){super(e),this.backgroundParams={initialAlpha:0,changeTime:15e3,canChangeColor:!1},this.params=t,this.init()}init(){const{scene:e}=this,t=this.scene.getGameSize();this.graphics=e.add.graphics({lineStyle:{width:2,color:65280},fillStyle:{color:16775926}}),this.counterText=this.scene.ui.drawBitmapText({x:t.width-17,y:30,text:"0",fontSize:24,origin:[1,.5],depth:500}),this.debugText=this.scene.ui.drawBitmapText({x:20,y:62,text:"",fontSize:16,origin:[0,.5],depth:500}),this.cosmonsText=this.scene.ui.drawCosmons({x:243,y:30,value:0,isCentered:!1,depth:100}),this.playerHealthbar=new Phaser.Geom.Rectangle(20,27,t.width,11),this.bossHealthbar=new Phaser.Geom.Rectangle(t.width-200-20,27,t.width,11),this.graphics.setDepth(500),this.initBooster(),this.backgroundParams.initialAlpha=Math.random()*(5*this.backgroundParams.changeTime),e.getSettings().isMobile&&this.initTouchAreas()}initBooster(){const e=this.scene.add.graphics({lineStyle:{width:2,color:16763904}}).setDepth(500),t=this.scene.ui.drawImage({x:261,y:32,texture:"bonus-speed",scale:.6,depth:500}),s=new Phaser.Geom.Circle(400,300,50);this.booster={graphics:e,image:t,progressCircle:s}}initTouchAreas(){const e=this.scene.getGameSize();this.scene.ui.drawImage({x:i.mainConfig.touch.areaOffset,y:e.height-i.mainConfig.touch.areaOffset,texture:"touch-area",scale:.022*i.mainConfig.touch.areaSize}),this.scene.ui.drawImage({x:e.width-i.mainConfig.touch.areaOffset,y:e.height-i.mainConfig.touch.areaOffset,texture:"touch-area",scale:.022*i.mainConfig.touch.areaSize})}act(){this.draw(),this.update()}draw(){const{scene:e,graphics:t}=this,{player:s,boss:i}=e;t.clear(),this.booster.graphics.clear(),this.drawStatus(),this.drawHealthbar({firstColor:a.colors.green,secondColor:a.colors.red,healthbarRect:this.playerHealthbar,hp:s.hp,maxHp:s.maxHp}),i&&this.drawHealthbar({firstColor:a.colors.white,secondColor:a.colors.red,healthbarRect:this.bossHealthbar,hp:i.hp,maxHp:i.maxHp,fromLeft:!0}),this.drawCosmons(),this.drawBoosters(),e.getSettings().isMobile&&this.drawPointers(),this.drawDebugPanel()}update(){this.updateBackground()}updateBackground(){const{scene:e,backgroundParams:t}=this,s=.25*(1+Math.sin((t.initialAlpha+e.gameTime)/t.changeTime));s>.4?this.backgroundParams.canChangeColor=!0:this.backgroundParams.canChangeColor&&s<.01&&(this.backgroundParams.canChangeColor=!1,e.updateBackgroundColor()),e.background.setAlpha(s)}drawStatus(){const{scene:e,counterText:t}=this;i.levelsConfig[e.getData().level].mode.type!==o.EGameMode.boss?t.setText(e.text):t.setText("")}drawHealthbar(e){const{graphics:t}=this,{healthbarRect:s,firstColor:i,secondColor:n,hp:o,maxHp:r}=e;let c=o/r;e.fromLeft&&(c=1-c),t.fillStyle(n),s.width=200,t.fillRectShape(s),t.fillStyle(i),s.width=Math.max(200*c,0),t.fillRectShape(s),t.lineStyle(2,a.colors.white),s.width=200,t.strokeRectShape(s)}drawCosmons(){const{scene:e,cosmonsText:t}=this;t.updateValue(e.score),e.isBoosterActive()?t.updatePosition(new n.Vector(295,30)):t.updatePosition(new n.Vector(243,30))}drawBoosters(){const{scene:e,booster:t}=this,{gameTime:s,player:a}=e,{graphics:n}=t;if(e.isBoosterActive()){t.image.visible=!0;const o=e.getActiveBooster()||"";t.image.setTexture(o);const r=(a.boosterParams.endTime-s)/i.boostersConfig.actionTime,l=(270+Math.min(360-360*r,360))%360,h=270;n.lineStyle(2,c[o]),n.beginPath(),n.arc(261,32,20,Phaser.Math.DegToRad(l),Phaser.Math.DegToRad(h),!1),n.strokePath()}else t.image.visible=!1}drawPointers(){const{graphics:e,scene:t}=this,s=t.player.pointers,a=this.scene.input.pointer1,n=this.scene.input.pointer2;!a.isDown||s.left!==a&&s.right!==a||e.strokeCircle(a.x,a.y,i.mainConfig.touch.pointerSize),!n.isDown||s.left!==n&&s.right!==n||e.strokeCircle(n.x,n.y,i.mainConfig.touch.pointerSize)}drawDebugPanel(){const{scene:e}=this;e.getQueryParam("fps")&&this.debugText.setText("FPS: "+this.scene.game.loop.actualFps.toFixed(2))}}t.InterfaceService=l},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LevelService=void 0;const i=s(121),a=s(8);class n extends a.Service{constructor(e,t){super(e),this.params=t,this.init()}init(){const{scene:e}=this,t=e.params.level;this.currentLevel=new i.levels[t](e)}act(){this.update()}update(){const{scene:e,currentLevel:t}=this,s=t.checkForWin();e.text=t.getTextByMode(),t.update(),s&&e.onWin()}}t.LevelService=n},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.levels=void 0;const i=s(122),a=s(129),n=s(130),o=s(131),r=s(132);t.levels=[i.Level1,a.Level2,n.Level3,o.Level4,r.Level5]},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Level1=void 0;const i=s(16),a=s(15);class n extends a.Level{constructor(e){super(e,0),this.spawnTimeInterval=3e3}spawn(){const{scene:e}=this,{enemies:t}=e;t.length<3&&e.utils.createEnemy(i.Bot)}}t.Level1=n},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BossMode=t.WavesMode=t.TimeMode=t.EnemyKillsMode=t.TotalKillsMode=t.Mode=void 0;var i=s(13);Object.defineProperty(t,"Mode",{enumerable:!0,get:function(){return i.Mode}});var a=s(124);Object.defineProperty(t,"TotalKillsMode",{enumerable:!0,get:function(){return a.TotalKillsMode}});var n=s(125);Object.defineProperty(t,"EnemyKillsMode",{enumerable:!0,get:function(){return n.EnemyKillsMode}});var o=s(126);Object.defineProperty(t,"TimeMode",{enumerable:!0,get:function(){return o.TimeMode}});var r=s(127);Object.defineProperty(t,"WavesMode",{enumerable:!0,get:function(){return r.WavesMode}});var c=s(128);Object.defineProperty(t,"BossMode",{enumerable:!0,get:function(){return c.BossMode}})},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TotalKillsMode=void 0;const i=s(13);class a extends i.Mode{getStatus(){const e=this.scene.getStats();return Number(this.modeParams.target)-e.totalKills}}t.TotalKillsMode=a},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EnemyKillsMode=void 0;const i=s(13);class a extends i.Mode{getStatus(){const e=this.scene.getStats(),t=this.modeParams.target;return Object.values(t).reduce((e,t)=>e+t,0)-Object.keys(t).reduce((s,i)=>{const a=t[i];return s+Math.min(a,e.kills[i]||0)},0)}}t.EnemyKillsMode=a},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TimeMode=void 0;const i=s(13);class a extends i.Mode{getStatus(){return Math.ceil(Number(this.modeParams.target)-this.scene.gameTime/1e3)}}t.TimeMode=a},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WavesMode=void 0;const i=s(13);class a extends i.Mode{constructor(e,t){super(e,t),this.waveNumber=0,this.maxEnemies=0,this.setLevelState(0)}setLevelState(e){const t=this.modeParams;e>=t.target.length?(this.waveNumber=e,this.enemies=[],this.maxEnemies=0):(this.waveNumber=e,this.enemies=[...t.target[e].enemies],this.maxEnemies=t.target[e].maxEnemies)}getStatus(){return this.modeParams.target.length-this.waveNumber}spawn(){const{maxEnemies:e,enemies:t}=this,s=this.modeParams.target.length,i=this.scene.enemies.length;if(i<e){const e=t.shift();e?this.scene.utils.createEnemy(e):i<=0&&this.waveNumber<s&&this.setLevelState(this.waveNumber+1)}}}t.WavesMode=a},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BossMode=void 0;const i=s(13);class a extends i.Mode{constructor(e,t){super(e,t),this.spawnBoss()}spawnBoss(){const{scene:e}=this,t=new this.modeParams.target(e);e.boss=t}getStatus(){return this.scene.boss.hp}}t.BossMode=a},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Level2=void 0;const i=s(16),a=s(1),n=s(15);class o extends n.Level{constructor(e){super(e,1),this.spawnTimeInterval=3e3}spawn(){const{scene:e}=this,{enemies:t}=e;if(!this.mode.modeParams.target.hunter)throw new Error("No hunters in current mode");t.length<3&&this.spawnEnemy()}spawnEnemy(){const{scene:e}=this,t=e.enemies.filter(e=>e.name===a.EEnemyName.hunter).length;Math.random()>.35||t>=1?e.utils.createEnemy(i.Bot):e.utils.createEnemy(i.Hunter)}}t.Level2=o},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Level3=void 0;const i=s(16),a=s(1),n=s(15);class o extends n.Level{constructor(e){super(e,2),this.spawnTimeInterval=3e3}spawn(){const{scene:e}=this,{enemies:t}=e;t.length<3&&this.spawnEnemy()}spawnEnemy(){const{scene:e}=this,t=e.enemies.filter(e=>e.name===a.EEnemyName.ufo).length,s=e.enemies.filter(e=>e.name===a.EEnemyName.hunter).length;Math.random()>.65&&0===s?e.utils.createEnemy(i.Hunter):Math.random()>.65&&0===t?e.utils.createEnemy(i.UFO):e.utils.createEnemy(i.Bot)}}t.Level3=o},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Level4=void 0;const i=s(15);class a extends i.Level{constructor(e){super(e,3),this.spawnTimeInterval=3e3}update(){super.update()}spawn(){}}t.Level4=a},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Level5=void 0;const i=s(15);class a extends i.Level{constructor(e){super(e,4),this.spawnTimeInterval=3e3}spawn(){}}t.Level5=a},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CometsService=void 0;const i=s(134),a=s(8);class n extends a.Service{constructor(e,t){super(e),this.comets=[],this.count=15,this.params=t,this.init()}init(){const{scene:e,count:t}=this;for(let s=0;s<t;s++)this.comets.push(new i.Comet(e,{}))}act(e,t){this.update(e,t)}update(e,t){const s=this.scene.getGameSize(),{deltaTime:i}=this.scene;this.comets.forEach(e=>{const{body:t}=e;t.y+=e.speed*i,t.y>s.height+100&&(e.updateParams(),e.refreshPosition())})}}t.CometsService=n},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Comet=void 0;const i=s(2);t.Comet=class{constructor(e,t){this.speed=3;const s=e.getGameSize();this.scene=e,this.body=e.ui.drawImage({x:i.getRandomInt(0,s.width),y:i.getRandomInt(0,s.height),texture:"comet"}),this.updateParams()}updateParams(){const{body:e}=this;e.setAlpha(.03+.1*Math.random()),e.setScale(.2,.75+.5*Math.random()),this.speed=i.getRandomInt(3,7)}refreshPosition(){const{body:e}=this,t=this.scene.getGameSize();e.x=i.getRandomInt(0,t.width),e.y=-100}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BonusesService=void 0;const i=s(3),a=s(4),n=s(136),o=s(34),r=s(2),c=s(8);class l extends c.Service{constructor(e,t){super(e),this.params=t,this.init()}init(){this.updateNextSpawnTime()}act(e,t){this.update(e,t)}update(e,t){const{scene:s}=this,{gameTime:i}=s;i>=this.nextSpawnTime&&(this.spawnBonus(),this.updateNextSpawnTime())}spawnBonus(){const{scene:e}=this,t=e.getGameSize(),s=o.boosters[r.getRandomInt(0,3)];e.bonuses.push(new n.Booster(e,new a.Vector(r.getRandomInt(50,t.width-50),r.getRandomInt(100,t.height-50)),s))}updateNextSpawnTime(){const{scene:e}=this,{gameTime:t}=e,{spawnIntervalTime:s,spawnIntervalRangeTime:a}=i.boostersConfig;this.nextSpawnTime=t+s+Math.random()*a}}t.BonusesService=l},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Booster=t.Bonus=void 0;var i=s(23);Object.defineProperty(t,"Bonus",{enumerable:!0,get:function(){return i.Bonus}});var a=s(34);Object.defineProperty(t,"Booster",{enumerable:!0,get:function(){return a.Booster}})},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Player=void 0;const i=s(3),a=s(4),n=s(1),o=s(17),r=s(1),c=s(2);let l,h,d,u;t.Player=class{constructor(e){this.scale=.6,this.bodySize=26,this.hp=100,this.maxHp=100,this.speed=5,this.maxSpeed=5,this.bulletSpeed=10,this.shootTime=320,this.weaponDamage=10,this.lastFireTime=0,this.pointers={left:null,right:null},this.prevPointersPos={left:{x:0,y:0},right:{x:0,y:0}},this.pointerValues={isLeftTouched:!1,isRightTouched:!1,left:{x:0,y:0},right:{x:0,y:0}},this.lastShootTime=0,this.angle=0,this.targetAngle=0,this.rotateSpeed=5,this.currentBooster=null,this.boosterParams={endTime:0,nextShadowTime:0,nextRegenerationTime:0},this.shieldBodySize=80,this.touchSpeedValue=4,this.touchRotateValue=5,this.scene=e;const t=this.scene.getGameSize();this.body=this.scene.physics.add.image(t.width/2,t.height/2,"player-ship"),this.lastShootTime=e.gameTime+100,this.init()}init(){const{scene:e,scale:t}=this;this.body.setScale(t),this.body.setDepth(100),this.body.setImmovable(!0),this.initShield(),l=e.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.A),h=e.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.S),d=e.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.D),u=e.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.W)}initShield(){this.shieldBody=this.scene.physics.add.image(300,300,"shield"),this.shieldBody.setImmovable(!0)}act(e,t){this.update(e,t)}update(e,t){this.body.active&&(this.updateBody(e,t),this.updateShooting(e,t),this.updateMovement(e,t),this.updateAngle(e,t),this.updateBoosters(e,t))}updateBody(e,t){const{scale:s,bodySize:i}=this,a=c.getOffsetByAngle(this.angle,10),n=c.getBodyPosWithOffset(this.body.displayWidth,this.body.displayHeight,s,i,a);this.body.setCircle(i,n.x,n.y)}updateShooting(e,t){const{scene:s,lastShootTime:i,body:a}=this,{gameTime:n}=s;if(s.getSettings().isMobile)n>i&&this.shoot(this.angle);else{s.input.activePointer.isDown&&this.shoot(this.angle)}}updateMovement(e,t){const{scene:s,body:n,maxSpeed:o,pointerValues:r,prevPointersPos:m,touchSpeedValue:g}=this,{deltaTime:p}=s,y=this.scene.getGameSize();let f=this.speed*p;if(s.getSettings().isMobile){if(this.pointers.left&&this.pointers.left.isDown){const e=this.pointers.left,t=new a.Vector(i.mainConfig.touch.areaOffset,y.height-i.mainConfig.touch.areaOffset),s=(c.getAngleBetweenPointsInRadians(t,new a.Vector(e.x,e.y)),new a.Vector(e.x,e.y));r.isLeftTouched||(this.prevPointersPos.left={x:s.x,y:s.y},r.isLeftTouched=!0);const l=m.left;this.pointerValues.left.x=Math.max(Math.min(this.pointerValues.left.x+(e.x-l.x)/g,o),-o),this.pointerValues.left.y=Math.max(Math.min(this.pointerValues.left.y+(e.y-l.y)/g,o),-o),this.prevPointersPos.left={x:s.x,y:s.y},n.x+=this.pointerValues.left.x,n.y+=this.pointerValues.left.y}}else{const e=s.input.keyboard.createCursorKeys(),t=e.down.isDown||h.isDown,i=e.up.isDown||u.isDown,a=e.left.isDown||l.isDown,o=e.right.isDown||d.isDown;(i||t)&&(o||a)&&(f*=.8),i?n.y-=f:t&&(n.y+=f),o?n.x+=f:a&&(n.x-=f)}n.x<0&&(n.x=0),n.y<i.mainConfig.scene.minYPos&&(n.y=i.mainConfig.scene.minYPos),n.x>y.width&&(n.x=y.width),n.y>y.height&&(n.y=y.height)}updateAngle(e,t){const{scene:s,body:n,rotateSpeed:o}=this,r=s.input.activePointer;if(s.getSettings().isMobile){const e=this.scene.getGameSize();if(this.pointers.right&&this.pointers.right.isDown){const t=this.pointers.right,s=new a.Vector(e.width-i.mainConfig.touch.areaOffset,e.height-i.mainConfig.touch.areaOffset);this.targetAngle=c.getAngleBetweenPointsInRadians(new a.Vector(t.x,t.y),s)}this.angle=c.angleToDegrees(c.getNearestAngle(c.angleToDegrees(this.angle),c.angleToDegrees(this.targetAngle),o))}else this.angle=c.angleToDegrees(c.getAngleBetweenPointsInRadians(new a.Vector(r.x,r.y),new a.Vector(n.x,n.y)));this.body.angle=this.angle+90}updateBoosters(e,t){const{scene:s,boosterParams:a}=this,{gameTime:n}=s;this.currentBooster===r.EBoosterType.speed&&n>a.nextShadowTime&&(this.createShadow(),this.boosterParams.nextShadowTime=n+50),this.currentBooster===r.EBoosterType.regenerator&&n>a.nextRegenerationTime&&(a.nextRegenerationTime=n+1e3,this.updateHp(i.boostersConfig.types.regenerator.hpPerSecond),this.hp>=this.maxHp&&this.destroyBooster()),this.updateShieldBooster(),n>a.endTime&&this.destroyBooster()}updateShieldBooster(){const{shieldBodySize:e}=this;this.shieldBody.x=this.body.x,this.shieldBody.y=this.body.y,this.shieldBody.angle=this.body.angle;const t=c.getOffsetByRadians(c.angleToRadians(this.angle)+Math.PI,25),s=c.getBodyPosWithOffset(this.shieldBody.displayWidth,this.shieldBody.displayHeight,1,e,t);this.shieldBody.setCircle(e,s.x,s.y),this.shieldBody.visible=this.currentBooster===r.EBoosterType.shield}shoot(e){const{scene:t,body:s,bulletSpeed:i,weaponDamage:o}=this,{gameTime:r}=t;r>this.lastShootTime&&(this.scene.utils.createSphereBullet({pos:new a.Vector(s.x,s.y),owner:n.EOwner.player,speed:c.getOffsetByAngle(e,i),angle:e,sprite:"laser-green",explodeSprite:"green-explode",damage:o}),this.lastShootTime=r+this.shootTime)}damage(e){const{scene:t}=this;this.updateHp(-e),this.hp<=0&&!t.getQueryParam("immortality",!0)&&this.destroy()}createShadow(){const{scene:e,body:t,scale:s}=this;e.effects.push(new o.Shadow(e,{pos:new a.Vector(t.x,t.y),sprite:"player-ship",lifeTime:250,scale:s,angle:this.angle+90,alpha:.4}))}setPointer(e,t){this.pointers[e]=t}setBooster(e){const{gameTime:t}=this.scene;switch(this.destroyBooster(),this.currentBooster=e,this.boosterParams.endTime=t+i.boostersConfig.actionTime,e){case r.EBoosterType.speed:this.speed+=i.boostersConfig.types.speed.additionalSpeed;break;case r.EBoosterType.damage:this.weaponDamage*=i.boostersConfig.types.damage.additionalXDamage;break;case r.EBoosterType.regenerator:this.boosterParams.nextRegenerationTime=t+1e3}}updateHp(e){this.hp=Math.max(Math.min(this.maxHp,this.hp+e),0)}hitShield(e){if(this.currentBooster===r.EBoosterType.shield){const t=new a.Vector(e.body.x,e.body.y),s=new a.Vector(this.body.x,this.body.y),i=c.getDistanceBetweenPoints(t,s),n=c.getAngleDiff(this.angle,e.getAngle());i>50&&i<70&&n>45&&e.explode()}}destroyBooster(){const{currentBooster:e}=this;switch(e){case r.EBoosterType.speed:this.speed-=i.boostersConfig.types.speed.additionalSpeed;break;case r.EBoosterType.damage:this.weaponDamage/=i.boostersConfig.types.damage.additionalXDamage}this.currentBooster=null}destroy(){const{scene:e,body:t}=this;e.utils.createTripleExplode(t.x,t.y),t.destroy(),e.onFail(),e.shakeScreen()}updateFire(){const{scene:e,body:t,angle:s,lastFireTime:i}=this,n=e.gameTime,r=c.angleToRadians(s+180);n>i&&(e.effects.push(new o.Fire(e,{pos:new a.Vector(t.x+45*Math.cos(r+.4),t.y+45*Math.sin(r+.4)),angle:r})),e.effects.push(new o.Fire(e,{pos:new a.Vector(t.x+45*Math.cos(r-.4),t.y+45*Math.sin(r-.4)),angle:r})),this.lastFireTime=n+75)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.preload=void 0,t.preload=function(){this.load.image("background-1","assets/images/background/bg-gray.jpg"),this.load.image("background-2","assets/images/background/bg-planet.jpg"),this.load.image("player-ship","assets/images/ships/player-ship.png"),this.load.image("enemy-bot-ship","assets/images/ships/enemy-ship-2.png"),this.load.image("enemy-hunter-ship","assets/images/ships/enemy-hunter.png"),this.load.image("enemy-ufo","assets/images/ships/enemy-ufo.png"),this.load.image("enemy-flyer","assets/images/ships/enemy-flyer.png"),this.load.image("boss-1-ship","assets/images/ships/boss-1-ship.png"),this.load.image("laser-green","assets/images/bullets/laser-green-3.png"),this.load.image("laser-red","assets/images/bullets/laser-red-2.png"),this.load.image("sphere-bullet","assets/images/bullets/sphere-bullet.png"),this.load.image("green-explode","assets/images/effects/green-explode.png"),this.load.image("red-explode","assets/images/effects/red-explode.png"),this.load.image("orange-explode","assets/images/effects/orange-explode.png"),this.load.image("star","assets/images/effects/star-4.png"),this.load.image("fire","assets/images/effects/fire-3.png"),this.load.image("comet","assets/images/effects/comet.png"),this.load.image("meteor-1","assets/images/effects/meteor-gray-1.png"),this.load.image("meteor-2","assets/images/effects/meteor-gray-2.png"),this.load.image("meteor-3","assets/images/effects/meteor-gray-3.png"),this.load.image("meteor-4","assets/images/effects/meteor-gray-4.png"),this.load.image("shield","assets/images/effects/shield.png"),this.load.audio("laser-1",["assets/audio/sfx_laser1.ogg"]),this.load.audio("laser-2",["assets/audio/sfx_laser2.ogg"]),this.load.image("coin-bronze","assets/images/bonus/star-bronze.png"),this.load.image("coin-silver","assets/images/bonus/star-silver.png"),this.load.image("bonus-speed","assets/images/bonus/bonus-speed.png"),this.load.image("bonus-shield","assets/images/bonus/bonus-shield.png"),this.load.image("bonus-damage","assets/images/bonus/bonus-damage.png"),this.load.image("bonus-regenerator","assets/images/bonus/bonus-regenerator.png"),this.load.image("touch-area","assets/images/controls/touch-area.png")}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Utils=void 0;const i=s(4),a=s(140),n=s(2),o=s(17),r=s(35);t.Utils=class{constructor(e){this.createEnemy=e=>{const{scene:t}=this,s=this.getRandomPointOutside();t.enemies.push(new e(t,{pos:s}))},this.scene=e}getRandomPos(){const e=this.scene.getGameSize();return new i.Vector(Math.random()*e.width,Math.random()*e.height)}getAngleToPlayer(e){const{scene:t}=this,{player:s}=t,a=new i.Vector(s.body.x,s.body.y);return n.getAngleBetweenPointsInDegrees(a,new i.Vector(e.x,e.y))}getRandomPointOutside(e={}){const{scene:t}=this,s=t.getGameSize(),i=e.distance||50,a={x:s.width,y:s.height},n=Math.random()>.5?"y":"x",o=[-i,a[n]+i][Math.floor(2*Math.random())];return{x:"x"===n?o:Math.random()*s.width,y:"y"===n?o:Math.random()*s.height}}createExplode(e,t){const{scene:s}=this;s.effects.push(new o.Explode(s,{pos:new i.Vector(e,t),sprite:"orange-explode"}))}createTripleExplode(e,t){const s=360*Math.random()/3;for(let i=0;i<3;i++){const a=n.angleToRadians(120*i+s);this.createExplode(e+30*Math.cos(a),t+30*Math.sin(a))}}createBonus(e,t){const{scene:s}=this;s.bonuses.push(new a.Coin(s,{pos:new i.Vector(e,t)}))}createSphereBullet(e){const{scene:t}=this;t.bullets.push(new r.SphereBullet(t,e))}createExplodeEffect(e){const{scene:t}=this;t.effects.push(new o.Explode(t,e))}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Coin=void 0;const i=s(23),a={0:{sprite:"coin-bronze",cost:5},1:{sprite:"coin-silver",cost:7},2:{sprite:"coin-gold",cost:10}};class n extends i.Bonus{constructor(e,t){super(e),this.lifeTime=5e3;const s=a[(()=>{const e=Math.random();return e>.5?0:e>.2?1:2})()];this.cost=s.cost,this.body=this.scene.physics.add.image(t.pos.x,t.pos.y,s.sprite),this.creationTime=e.gameTime,this.init()}init(){this.body.setDepth(10),this.body.setCircle(16),this.initCollisions()}initCollisions(){const{scene:e}=this;e.physics.add.collider(this.body,e.player.body,()=>{e.score+=this.cost,this.destroy()})}act(){this.update()}update(){const{scene:e,body:t}=this,s=e.gameTime;t.angle+=3*Math.sin(.003*s),s>this.creationTime+this.lifeTime&&this.destroy()}}t.Coin=n},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Bullet=void 0;const i=s(1);t.Bullet=class{constructor(e,t){this.scene=e,this.pos=t.pos,this.owner=t.owner,this.damage=t.damage}act(e,t){}update(e,t){const{body:s}=this,i=this.scene.getGameSize();(s.x+s.width<0||s.x-s.width>i.width||s.y+s.height<0||s.y-s.height>i.height)&&this.destroy()}initCollisions(){const{scene:e,owner:t,damage:s}=this,{boss:a}=e;t===i.EOwner.player?(e.enemies.forEach(t=>{e.physics.add.collider(this.body,t.body,()=>{this.explode(),t.damage(s)})}),a&&e.physics.add.collider(this.body,a.body,()=>{this.explode(),a.damage(s)})):(e.physics.add.collider(this.body,e.player.body,()=>{this.explode(),e.player.damage(s)}),e.physics.add.overlap(this.body,e.player.shieldBody,()=>{e.player.hitShield(this)}))}getAngle(){return this.angle}explode(){}destroy(){const{body:e}=this;this.scene.bullets=this.scene.bullets.filter(e=>e!==this),e.destroy()}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sphere=void 0;const i=s(4),a=s(2),n=s(35),o={scale:1,bodySize:6,states:[]};class r extends n.Bullet{constructor(e,t){super(e,{pos:t.pos,owner:t.owner,damage:t.damage}),this.currentStateIndex=0,this.depth=10,this.speedCoef=1,this.body=e.physics.add.image(t.pos.x,t.pos.y,t.sprite),this.params=Object.assign(Object.assign({},o),a.excludeUndefinedValues(t)),this.currentState=this.params.states[0],this.speed=t.speed,this.scale=this.params.scale,this.init()}init(){const{body:e,params:t,depth:s}=this,{angle:n,scale:o}=t;e.setAngle(n+90),e.setDepth(s),e.setOrigin(.5,.5),e.setScale(o),this.updateBodyCenter(),this.initCollisions();const r=new i.Vector(this.body.x+this.speed.x,this.body.y+this.speed.y);this.angle=a.getAngleBetweenPointsInDegrees(r,new i.Vector(this.body.x,this.body.y))}updateBodyCenter(){const{params:e,scale:t}=this,{bodySize:s}=e,n=a.getBodyPosWithOffset(this.body.displayWidth,this.body.displayHeight,t,s,new i.Vector(0,0));this.body.setCircle(s,n.x,n.y)}act(e,t){this.body.setScale(this.scale),this.updateBodyCenter(),this.updateState(e,t),this.updateMovement(e,t),super.update(e,t)}updateState(e,t){const{body:s,currentState:i}=this;if(i)switch(i.name){case"wait":i.time-=1,i.time<=0&&this.setNextState();break;case"changeSize":i.time-=1,this.scale=i.scaleFn(this.scale),i.time<=0&&this.setNextState();break;case"changeAngle":s.setAngle(i.angleFn()),this.setNextState();break;case"changeSpeed":i.time-=1,this.speed=i.speedFn(this.speed),i.time<=0&&this.setNextState();break;case"changeSpeedCoef":i.time-=1,this.speedCoef=i.speedFn(this.speedCoef),i.time<=0&&this.setNextState();break;case"explode":for(let e=0;e<8;e++)i.bulletFn(this,e);this.destroy()}}setNextState(){this.currentStateIndex+=1,this.currentState=this.params.states[this.currentStateIndex]}updateMovement(e,t){const{scene:s,body:i,speed:a,speedCoef:n}=this,{deltaTime:o}=s;i.x+=a.x*n*o,i.y+=a.y*n*o}draw(){}explode(){const{body:e,params:t}=this;this.scene.utils.createExplodeEffect({pos:new i.Vector(e.x,e.y),sprite:t.explodeSprite}),this.destroy()}}t.Sphere=r},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getInitialGameStats=void 0;t.getInitialGameStats=()=>({totalKills:0,kills:{bot:0,hunter:0,flyer:0,ufo:0}})},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PreloadScene=void 0;const i=s(7).__importDefault(s(145)),a=s(1),n=s(6),o=s(10);class r extends o.Scene{constructor(){super({key:a.ESceneName.preload})}create(){i.default.load({google:{families:[n.DEFAULT_FONT]},active:()=>{this.startGame()},fontinactive:()=>{this.startGame()}})}startGame(){this.game.i18n.loadLang(this.game.settings.lang).then(()=>{this.ui.drawOriginalText({x:0,y:-100,text:this.game.i18n.getText("gameStart"),fontSize:1,origin:[.5,.5]}),setTimeout(()=>{this.scene.start(a.ESceneName.menu)},50)})}}t.PreloadScene=r},,function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InfoScene=void 0;const i=s(3),a=s(6),n=s(31),o=s(1);class r extends n.Scene{constructor(){super({key:o.ESceneName.info})}init(e){this.params=e}create(){const{getText:e}=this.game.i18n,t=this.getGameSize(),s=this.getLastUpdatedGameTime(),n=i.START_DEVELOPMENT_TIME.toLocaleDateString(),r=`${e("startOfDevelopment")}: ${n}\n${s}\n\n${e("totalLevels")}: ${i.levelsConfig.length}`;this.ui.drawOriginalText({x:30,y:30,text:r,fontSize:19}),this.ui.drawButton({x:t.width-a.defaultButtonSize.width/2-30,y:t.height-a.defaultButtonSize.height/2-30,text:e("back"),callbacks:{onPointerDown:()=>{this.scene.start(o.ESceneName.menu)}}})}}t.InfoScene=r},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getGameConfig=void 0;const i=s(30),a=s(2);t.getGameConfig=()=>{const e=a.isMobileDevice()?i.gameConfigs.mobile:i.gameConfigs.desktop;return Object.assign(Object.assign({},i.baseConfig),e)}}]);