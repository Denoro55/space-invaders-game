!function(e){function t(t){for(var i,a,r=t[0],h=t[1],c=t[2],l=0,u=[];l<r.length;l++)a=r[l],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&u.push(n[a][0]),n[a]=0;for(i in h)Object.prototype.hasOwnProperty.call(h,i)&&(e[i]=h[i]);for(d&&d(t);u.length;)u.shift()();return o.push.apply(o,c||[]),s()}function s(){for(var e,t=0;t<o.length;t++){for(var s=o[t],i=!0,r=1;r<s.length;r++){var h=s[r];0!==n[h]&&(i=!1)}i&&(o.splice(t--,1),e=a(a.s=s[0]))}return e}var i={},n={0:0},o=[];function a(t){if(i[t])return i[t].exports;var s=i[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=e,a.c=i,a.d=function(e,t,s){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(s,i,function(t){return e[t]}.bind(null,i));return s},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var r=window.webpackJsonp=window.webpackJsonp||[],h=r.push.bind(r);r.push=t,r=r.slice();for(var c=0;c<r.length;c++)t(r[c]);var d=h;o.push([20,1]),s()}([function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GAME_CONFIG=t.LEVELS_CONFIG=t.ENEMIES_CONFIG=t.CONFIG=void 0;var i=s(21);Object.defineProperty(t,"CONFIG",{enumerable:!0,get:function(){return i.CONFIG}});var n=s(22);Object.defineProperty(t,"ENEMIES_CONFIG",{enumerable:!0,get:function(){return n.ENEMIES_CONFIG}});var o=s(8);Object.defineProperty(t,"LEVELS_CONFIG",{enumerable:!0,get:function(){return o.LEVELS_CONFIG}});var a=s(15);Object.defineProperty(t,"GAME_CONFIG",{enumerable:!0,get:function(){return a.GAME_CONFIG}})},function(e,t,s){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,s,i){void 0===i&&(i=s),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,i){void 0===i&&(i=s),e[i]=t[s]}),n=this&&this.__exportStar||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||i(t,e,s)};Object.defineProperty(t,"__esModule",{value:!0}),n(s(23),t)},function(e,t,s){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,s,i){void 0===i&&(i=s),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,i){void 0===i&&(i=s),e[i]=t[s]}),n=this&&this.__exportStar||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||i(t,e,s)};Object.defineProperty(t,"__esModule",{value:!0}),n(s(25),t),n(s(9),t),n(s(16),t),n(s(27),t)},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Vector=void 0;var i=s(26);Object.defineProperty(t,"Vector",{enumerable:!0,get:function(){return i.Vector}})},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Service=void 0;t.Service=class{constructor(e){this.scene=e}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HEX_COLORS=t.COLORS=void 0,t.COLORS={white:16777215,green:65280,red:16711680,gray:14540253,yellow:16548895},t.HEX_COLORS={white:"#ffffff",green:"#00ff00"}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Scene=void 0;class i extends Phaser.Scene{getData(){return this.game.data}setData(e,t){this.game.data[e]=t}}t.Scene=i},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Button=void 0;var i=s(55);Object.defineProperty(t,"Button",{enumerable:!0,get:function(){return i.Button}})},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LEVELS_CONFIG=t.LEVEL_MODES=void 0;const i=s(1),n=s(24);t.LEVEL_MODES=[{type:i.GameMode.totalKills,target:30},{type:i.GameMode.enemyKills,target:{hunter:15}}],t.LEVELS_CONFIG=[n.getLevelConfig(0,"Red Alert","Space invaders have attacked our base. Come back and find out the reason for the invasion.\n  \nWarning! A lot of invaders have been detected on our way."),n.getLevelConfig(1,"Hunters","Hunters in sight. It's the most common units among the enemy ships. Be careful, they follow for their targets.")]},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.spreadRadians=t.spreadAngle=t.getAngleDiff=t.getOffsetToAngle=t.getNearestAngle=t.angleToRadians=t.angleToDegrees=t.getAngleBetween=void 0;const i=s(3);function n(e){return e*Math.PI/180}t.getAngleBetween=function(e,t){const s=e.x-t.x,i=e.y-t.y;let n=Math.atan2(i,s);return n<0&&(n+=2*Math.PI),n},t.angleToDegrees=function(e){return e/Math.PI*180},t.angleToRadians=n,t.getNearestAngle=function(e,t,s){return Math.abs(e-t)<2?e:(Math.abs(e-t)<180?e<t?e+=s:e-=s:e<t?e-=s:e+=s,(e%360+360)%360)};t.getOffsetToAngle=(e,t)=>new i.Vector(Math.cos(e)*t,Math.sin(e)*t);t.getAngleDiff=(e,t)=>{const s=Math.abs(e-t);return Math.abs((s+180)%360-180)};t.spreadAngle=(e,t)=>e-t+Math.random()*(2*t);t.spreadRadians=(e,s)=>t.spreadAngle(e,n(s))},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Enemy=void 0;t.Enemy=class{constructor(e,t){this.scene=e,this.name=t}act(e,t){}damage(e){this.hp-=e,this.hp<=0&&this.destroy()}destroy(){const{scene:e,body:t,coinChance:s}=this;e.enemies=e.enemies.filter(e=>e!==this),t.destroy();const i=e.getStats();Math.random()>1-s&&e.utils.createBonus(t.x,t.y),i.kills[this.name]+=1,i.totalKills+=1}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SphereBullet=t.LaserBullet=t.Bullet=void 0;var i=s(12);Object.defineProperty(t,"Bullet",{enumerable:!0,get:function(){return i.Bullet}});var n=s(41);Object.defineProperty(t,"LaserBullet",{enumerable:!0,get:function(){return n.Laser}});var o=s(44);Object.defineProperty(t,"SphereBullet",{enumerable:!0,get:function(){return o.Sphere}})},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Bullet=void 0;const i=s(0),n=s(1);t.Bullet=class{constructor(e,t,s,i){this.scene=e,this.pos=t,this.owner=s,this.damage=i}act(e,t){}update(e,t){const{body:s}=this;(s.x<0||s.x>i.CONFIG.width||s.y<0||s.y>i.CONFIG.height)&&this.destroy()}initCollisions(){const{scene:e,owner:t,damage:s}=this;t===n.Owner.player?e.enemies.forEach(t=>{e.physics.add.collider(this.body,t.body,()=>{this.explode(),t.damage(s)})}):e.physics.add.collider(this.body,e.player.body,()=>{this.explode(),e.player.damage(s)})}explode(){}destroy(){const{body:e}=this;this.scene.bullets=this.scene.bullets.filter(e=>e!==this),e.destroy()}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Effect=void 0;t.Effect=class{constructor(e){this.scene=e}act(){}destroy(){const{body:e}=this;this.scene.effects=this.scene.effects.filter(e=>e!==this),e.destroy()}}},,function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.INITIAL_GAME_DATA=t.GAME_CONFIG=t.isDev=void 0;const i=s(0),n=s(28),o=s(54),a=s(56),r=s(57),h=s(58);t.isDev=!1,t.GAME_CONFIG={type:Phaser.AUTO,width:i.CONFIG.width,height:i.CONFIG.height,physics:{default:"arcade",arcade:{gravity:{y:0},debug:!1}},scene:[o.MenuScene,n.GameScene,h.PreviewScene,a.FailScene,r.WinScene]},t.INITIAL_GAME_DATA={level:0}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRandomInt=void 0;t.getRandomInt=(e,t)=>Math.round(e+Math.random()*(t-e))},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Hunter=t.Bot=t.Enemy=void 0;var i=s(10);Object.defineProperty(t,"Enemy",{enumerable:!0,get:function(){return i.Enemy}});var n=s(40);Object.defineProperty(t,"Bot",{enumerable:!0,get:function(){return n.Bot}});var o=s(45);Object.defineProperty(t,"Hunter",{enumerable:!0,get:function(){return o.Hunter}})},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Fire=t.Explode=t.Effect=void 0;var i=s(13);Object.defineProperty(t,"Effect",{enumerable:!0,get:function(){return i.Effect}});var n=s(42);Object.defineProperty(t,"Explode",{enumerable:!0,get:function(){return n.Explode}});var o=s(43);Object.defineProperty(t,"Fire",{enumerable:!0,get:function(){return o.Fire}})},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Level=void 0;const i=s(1),n=s(0),o=s(8);t.Level=class{constructor(e,t){this.nextAttemptTime=0,this.scene=e,this.mode=o.LEVELS_CONFIG[t].mode}update(){const{scene:e,nextAttemptTime:t,nextAttemptTimeInterval:s}=this,i=e.time.now;i>t&&(this.makeAttempt(),this.nextAttemptTime=i+s),this.updateStatus()}updateStatus(){const{scene:e,mode:t}=this,s=e.getStats(),n=t.type;switch(n){case i.GameMode.totalKills:{const e=+t.target;this.status=e-s.totalKills;break}case i.GameMode.enemyKills:{const e=t.target,i=Object.values(e).reduce((e,t)=>e+t,0),n=Object.keys(e).reduce((t,i)=>{const n=e[i];return t+Math.min(n,s.kills[i]||0)},0);this.status=i-n;break}default:throw new Error(`Mode "${n}" is not set or not defined!`)}this.status=Math.max(this.status,0)}getTextByMode(){return void 0===this.status?"":this.status.toString()}checkForWin(){const{mode:e,status:t}=this;if(void 0===t)return!1;const s=e.type;switch(s){case i.GameMode.totalKills:case i.GameMode.enemyKills:return t<=0;default:throw new Error(`Mode "${s}" is not set or not defined!`)}}createEnemy(e){const{scene:t}=this,s={x:n.CONFIG.width,y:n.CONFIG.height},i=Math.random()>.5?"y":"x",o=[-100,s[i]+100][Math.floor(2*Math.random())],a={x:"x"===i?o:Math.random()*n.CONFIG.width,y:"y"===i?o:Math.random()*n.CONFIG.height};t.enemies.push(new e(t,a))}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Game=void 0,s(14);const i=s(15);class n extends Phaser.Game{constructor(e){super(e),this.data=i.INITIAL_GAME_DATA}}t.Game=n,window.addEventListener("load",()=>{const e=new n(i.GAME_CONFIG);i.isDev&&console.log("game",e)})},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CONFIG=void 0,t.CONFIG={title:"Space Invaders",subtitle:"The battle for the galaxy",width:800,height:600,levelsCount:2,scene:{delta:16,minYPos:100,failTimeoutTime:2e3,winTimeoutTime:2e3,failTitleText:"The Mission failed!",failSubtitleText:"Your ship has been destroyed!",winTitleText:"Congratulations!",winSubtitleText:"You have completed the mission!"}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ENEMIES_CONFIG=void 0,t.ENEMIES_CONFIG={bot:{pluralName:["bot","bots","bots"]},hunter:{pluralName:["hunter","hunters","hunters"]}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SceneName=t.EnemyName=t.GameMode=t.Owner=void 0,function(e){e.player="player",e.enemy="enemy"}(t.Owner||(t.Owner={})),function(e){e.totalKills="totalKills",e.enemyKills="enemyKill"}(t.GameMode||(t.GameMode={})),function(e){e.bot="bot",e.hunter="hunter"}(t.EnemyName||(t.EnemyName={})),function(e){e.menu="MenuScene",e.preview="PreviewScene",e.game="GameScene",e.fail="FailScene",e.win="WinScene"}(t.SceneName||(t.SceneName={}))},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLevelConfig=void 0;const i=s(0),n=s(1),o=s(2),a=s(8),r=e=>{const t=a.LEVEL_MODES[e];switch(t.type){case n.GameMode.totalKills:{const e=t.target;return`Mission: kill ${e} ${o.pluralize(e,["invader","invaders","invaders"])}`}case n.GameMode.enemyKills:{const e=t.target;return"Mission: kill "+Object.keys(e).map(t=>{const s=e[t];return`${s} ${o.pluralize(s,i.ENEMIES_CONFIG[t].pluralName)}`}).join(" / ")}}};t.getLevelConfig=(e,t,s)=>({title:t,text:s,mission:r(e),mode:a.LEVEL_MODES[e]})},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCenterBody=void 0;const i=s(3);t.getCenterBody=(e,t,s,n,o={x:0,y:0})=>{const a=e/s/2-n+o.x,r=t/s/2-n+o.y;return new i.Vector(a,r)}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Vector=void 0;t.Vector=class{constructor(e,t){this.x=e,this.y=t}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluralize=void 0,t.pluralize=function(e,t){if(!e)return t[0];switch(function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2}(e)){case 0:return t[0];case 1:return t[1];default:return t[2]}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GameScene=void 0;var i=s(29);Object.defineProperty(t,"GameScene",{enumerable:!0,get:function(){return i.GameScene}})},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GameScene=void 0;const i=s(0),n=s(30),o=s(6),a=s(49),r=s(1),h=s(50),c=s(53);let d;class l extends o.Scene{constructor(){super({key:r.SceneName.game}),this.enemies=[],this.bullets=[],this.effects=[],this.bonuses=[],this.money=0,this.services=[],this.stats=JSON.parse(JSON.stringify(c.INITIAL_STATS)),this.isWon=!1,this.isFail=!1,this.inited=!1,this.startTime=0,this.sceneTime=0}preload(){this.load.image("background-black","assets/images/background/black.png"),this.load.image("player-ship","assets/images/ships/player-ship.png"),this.load.image("enemy-bot-ship","assets/images/ships/enemy-ship.png"),this.load.image("enemy-hunter-ship","assets/images/ships/enemy-hunter.png"),this.load.image("laser-green","assets/images/bullets/laser-green.png"),this.load.image("laser-red","assets/images/bullets/laser-red.png"),this.load.image("green-explode","assets/images/effects/green-explode.png"),this.load.image("red-explode","assets/images/effects/red-explode.png"),this.load.image("orange-explode","assets/images/effects/orange-explode.png"),this.load.image("star","assets/images/effects/star-4.png"),this.load.image("fire","assets/images/effects/fire-3.png"),this.load.image("comet","assets/images/effects/comet.png"),this.load.image("meteor-1","assets/images/effects/meteor-1.png"),this.load.image("meteor-2","assets/images/effects/meteor-2.png"),this.load.image("meteor-3","assets/images/effects/meteor-3.png"),this.load.image("meteor-4","assets/images/effects/meteor-4.png"),this.load.audio("laser-1",["assets/audio/sfx_laser1.ogg"]),this.load.audio("laser-2",["assets/audio/sfx_laser2.ogg"]),this.load.image("coin-bronze","assets/images/bonus/star-bronze.png"),this.load.image("coin-silver","assets/images/bonus/star-silver.png"),this.load.image("coin-gold","assets/images/bonus/star-gold.png")}init(e){this.params=e}create(){this.resetState(),this.physics.world.setBounds(0,0,i.CONFIG.width,i.CONFIG.height),this.add.tileSprite(i.CONFIG.width/2,i.CONFIG.height/2,i.CONFIG.width,i.CONFIG.height,"background-black"),d=this.add.graphics({lineStyle:{width:2,color:65280},fillStyle:{color:16711680}}),this.player=new a.Player(this),this.utils=new h.Utils(this),this.initListeners(),this.initServices()}initListeners(){this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.M).on("down",()=>{this.player.body.active&&this.scene.start(r.SceneName.menu)})}initServices(){this.addService(n.StarsService,{count:20}),this.addService(n.MeteorsService,{}),this.addService(n.InterfaceService,{}),this.addService(n.LevelService,{}),this.addService(n.CometsService,{})}addService(e,t){this.services.push(new e(this,t))}update(e,t){const{inited:s}=this;s||(this.inited=!0,this.player.lastShootTime=e+100,this.startTime=e),this.sceneTime=e-this.startTime,d.clear(),this.enemies.forEach(s=>{s.act(e,t)}),this.bullets.forEach(s=>{s.act(e,t)}),this.effects.forEach(e=>{e.act()}),this.services.forEach(s=>{s.act(e,t)}),this.bonuses.forEach(e=>{e.act()}),this.player.act(e,t)}resetState(){this.bullets=[],this.enemies=[],this.effects=[],this.bonuses=[],this.money=0,this.services=[],this.stats=JSON.parse(JSON.stringify(c.INITIAL_STATS)),this.isWon=!1,this.isFail=!1,this.inited=!1}onFail(){this.isFail=!0,setTimeout(()=>{this.scene.start(r.SceneName.fail)},i.CONFIG.scene.failTimeoutTime)}onWin(){this.isWon||this.isFail||(this.isWon=!0,setTimeout(()=>{this.isFail||this.scene.start(r.SceneName.win)},i.CONFIG.scene.winTimeoutTime))}getStats(){return this.stats}}t.GameScene=l},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Service=t.CometsService=t.LevelService=t.InterfaceService=t.LoggerService=t.MeteorsService=t.StarsService=void 0;var i=s(31);Object.defineProperty(t,"StarsService",{enumerable:!0,get:function(){return i.StarsService}});var n=s(33);Object.defineProperty(t,"MeteorsService",{enumerable:!0,get:function(){return n.MeteorsService}});var o=s(35);Object.defineProperty(t,"LoggerService",{enumerable:!0,get:function(){return o.LoggerService}});var a=s(36);Object.defineProperty(t,"InterfaceService",{enumerable:!0,get:function(){return a.InterfaceService}});var r=s(37);Object.defineProperty(t,"LevelService",{enumerable:!0,get:function(){return r.LevelService}});var h=s(47);Object.defineProperty(t,"CometsService",{enumerable:!0,get:function(){return h.CometsService}});var c=s(4);Object.defineProperty(t,"Service",{enumerable:!0,get:function(){return c.Service}})},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StarsService=void 0;const i=s(32),n=s(4);class o extends n.Service{constructor(e,t){super(e),this.stars=[],this.params=t,this.init()}init(){const{scene:e}=this,{count:t}=this.params;for(let s=0;s<t;s++)this.stars.push(new i.Star(e,{initialAlphaCoef:500*s}))}act(e,t){this.update(e,t)}update(e,t){this.stars.forEach(s=>{s.act(e,t)})}}t.StarsService=o},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Star=void 0;const i=s(0);t.Star=class{constructor(e,t){this.scene=e,this.body=e.add.sprite(Math.random()*i.CONFIG.width,Math.random()*i.CONFIG.height,"star"),this.initialCoef=t.initialAlphaCoef,this.body.setDepth(0),this.body.setScale(.25+.25*Math.random())}act(e,t){this.update(e,t)}update(e,t){const{scene:s,body:n,initialCoef:o,lastRelocationTime:a}=this;n.angle+=4,n.alpha=Math.sin((s.time.now+o)/1500),s.time.now>a&&n.alpha<=.5&&(n.x=Math.random()*i.CONFIG.width,n.y=Math.random()*i.CONFIG.height,this.lastRelocationTime=s.time.now+1e3)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MeteorsService=void 0;const i=s(0),n=s(3),o=s(34),a=s(9),r=s(2),h=s(4);class c extends h.Service{constructor(e,t){super(e),this.meteors=[],this.meteorIntervalTime=1e3,this.meteorIntervalTimeRange=1e3,this.lastMeteorTime=0,this.maxCount=25,this.params=t,this.init()}init(){for(let e=0;e<r.getRandomInt(5,8);e++)this.spawnMeteor({outside:!1});for(let e=0;e<r.getRandomInt(3,5);e++)this.spawnMeteor({outside:!0})}act(e,t){this.update(e,t)}update(e,t){const{maxCount:s}=this,n=t/i.CONFIG.scene.delta;e>this.lastMeteorTime&&this.meteors.length<s&&this.spawnMeteor({outside:!0}),this.meteors.forEach(e=>{const{body:t,speed:s}=e;t.angle+=.5*s.x*n,t.x+=s.x*n,t.y+=s.y*n,(t.x>i.CONFIG.width+200||t.y>i.CONFIG.height+200)&&(this.meteors=this.meteors.filter(t=>t!==e),t.destroy())})}spawnMeteor({outside:e}){const{scene:t}=this,s=t.time.now,{meteorIntervalTime:r,meteorIntervalTimeRange:h}=this,c=.5+1*Math.random(),d=a.angleToRadians(45),l=.25+2.5*Math.random(),u=new n.Vector(l*Math.cos(d),l*Math.sin(d)),p=Math.random()>.5?"x":"y",g=e?{x:"x"===p?Math.random()*(.75*i.CONFIG.width)-200:-200,y:"y"===p?Math.random()*(.75*i.CONFIG.height)-200:-200}:{x:i.CONFIG.width*Math.random(),y:i.CONFIG.height*Math.random()};this.meteors.push(new o.Meteor(t,g,u,{spriteIndex:1+Math.floor(4*Math.random()),alpha:.25+.6*Math.random(),scale:c})),this.lastMeteorTime=Math.random()*h+s+r*c}}t.MeteorsService=c},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Meteor=void 0;t.Meteor=class{constructor(e,t,s,i){this.scene=e,this.body=e.add.sprite(t.x,t.y,"meteor-"+i.spriteIndex),this.speed=s,this.body.setAlpha(i.alpha),this.body.setDepth(5),this.body.setScale(i.scale,i.scale)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoggerService=void 0;const i=s(4);class n extends i.Service{constructor(e,t){super(e),this.lastLogTime=0,this.params=t,this.init()}init(){}act(){this.update()}update(){const e=this.scene,t=e.time.now;t>this.lastLogTime&&(console.group("Stats"),console.log("effects: "+e.effects.length),console.log("enemies: "+e.enemies.length),console.log("bullets: "+e.bullets.length),console.groupEnd(),this.lastLogTime=t+2e3)}}t.LoggerService=n},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InterfaceService=void 0;const i=s(0),n=s(5),o=s(4);class a extends o.Service{constructor(e,t){super(e),this.params=t,this.init()}init(){const{scene:e}=this;this.graphics=e.add.graphics({lineStyle:{width:2,color:65280},fillStyle:{color:16711680}}),this.counterText=e.add.bitmapText(i.CONFIG.width-17,27,"atari","0",24).setOrigin(1,.5).setDepth(500),this.moneyText=e.add.bitmapText(283,27,"atari","0",24).setOrigin(0,.5).setDepth(500),this.playerHealthbar=new Phaser.Geom.Rectangle(20,22,i.CONFIG.width,11),this.graphics.setDepth(500),e.add.image(255,25,"coin-gold").setDepth(100)}act(){this.draw(),this.update()}draw(){this.drawHealthbar(),this.drawScore()}update(){}drawHealthbar(){const{graphics:e,scene:t,playerHealthbar:s}=this,{player:i}=t;e.clear(),e.fillStyle(n.COLORS.red),s.width=200,e.fillRectShape(s),e.fillStyle(n.COLORS.green),s.width=Math.max(i.hp/i.maxHp*200,0),e.fillRectShape(s),e.lineStyle(2,n.COLORS.white),s.width=200,e.strokeRectShape(s)}drawScore(){const{scene:e,counterText:t,moneyText:s}=this;t.setText(e.text),s.setText(e.money.toString())}}t.InterfaceService=a},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LevelService=void 0;const i=s(38),n=s(4);class o extends n.Service{constructor(e,t){super(e),this.params=t,this.init()}init(){const{scene:e}=this;this.currentLevel=new i.levels[e.params.level](e)}act(){this.update()}update(){const{scene:e,currentLevel:t}=this,s=t.checkForWin();e.text=t.getTextByMode(),t.update(),s&&e.onWin()}}t.LevelService=o},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.levels=void 0;const i=s(39),n=s(46);t.levels=[i.Level1,n.Level2]},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Level1=void 0;const i=s(17),n=s(19);class o extends n.Level{constructor(e){super(e,0),this.nextAttemptTimeInterval=2e3}makeAttempt(){const{scene:e}=this,{enemies:t}=e,s=e.getStats().totalKills>18?4:3;(t.length<2||t.length<s&&Math.random()>.5)&&this.createEnemy(i.Bot)}}t.Level1=o},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Bot=void 0;const i=s(0),n=s(3),o=s(2),a=s(1),r=s(10),h=s(11);class c extends r.Enemy{constructor(e,t){super(e,a.EnemyName.bot),this.angle=0,this.coinChance=.9,this.weaponDamage=10,this.bodySize=32,this.depth=50,this.scale=.6,this.speed=2,this.rotateSpeed=2,this.hp=50,this.bulletSpeed=7,this.lastShoot=0,this.shootTime=1200,this.shootTimeRange=200,this.changeTargetInterval=1e3,this.changeTargetIntervalRange=2e3,this.body=e.physics.add.image(t.x,t.y,"enemy-bot-ship"),this.init(),this.defineTarget=this.defineTarget.bind(this),this.defineTarget()}init(){const{scale:e,depth:t,body:s,bodySize:i}=this;s.setScale(e),s.setImmovable(!0),s.setDepth(t);const n=o.getCenterBody(s.displayWidth,s.displayHeight,e,i);s.setCircle(i,n.x,n.y)}act(e,t){this.update(e,t)}update(e,t){const{scene:s,body:a,angle:r,targetAngle:h,rotateSpeed:c}=this;this.body.angle=r-90;const d=o.angleToRadians(r),l=t/i.CONFIG.scene.delta;if(a.x+=this.speed*Math.cos(d)*l,a.y+=this.speed*Math.sin(d)*l,this.angle=o.getNearestAngle(r,h,c),(a.x<100||a.y<100||a.x>i.CONFIG.width-100||a.y>i.CONFIG.height-100)&&this.setTarget(new n.Vector(i.CONFIG.width/2,i.CONFIG.height/2)),this.scene.time.now>this.lastShoot){const e=s.player.body;this.shoot(new n.Vector(e.x,e.y))}}defineTarget(){const{changeTargetInterval:e,changeTargetIntervalRange:t}=this,s=new n.Vector(Math.random()*i.CONFIG.width,Math.random()*i.CONFIG.height);this.setTarget(s);const o=e+Math.random()*t;this.timeout=setTimeout(this.defineTarget,o)}setTarget(e){const{body:t}=this;this.targetPos=e,this.targetAngle=o.angleToDegrees(o.getAngleBetween(this.targetPos,t))}shoot(e){const{body:t,bulletSpeed:s,shootTimeRange:i,shootTime:r,weaponDamage:c}=this,d=o.getAngleBetween(e,new n.Vector(t.x,t.y));this.scene.bullets.push(new h.LaserBullet(this.scene,new n.Vector(t.x,t.y),a.Owner.enemy,{speed:o.getOffsetToAngle(d,s),angle:d,sprite:"laser-red",explodeSprite:"red-explode",damage:c})),this.lastShoot=this.scene.time.now+r+Math.random()*i}destroy(){const{scene:e,body:t}=this;e.utils.tripleExplode(t.x,t.y),clearTimeout(this.timeout),super.destroy()}}t.Bot=c},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Laser=void 0;const i=s(3),n=s(0),o=s(2),a=s(18),r=s(12);class h extends r.Bullet{constructor(e,t,s,i){super(e,t,s,i.damage),this.scale=.5,this.depth=10,this.bodySize=12,this.body=e.physics.add.image(t.x,t.y,i.sprite),this.params=i,this.init()}init(){const{body:e,scene:t,params:s,scale:i,depth:n}=this,{angle:a}=s;e.setAngle(o.angleToDegrees(a)+90),e.setDepth(n),e.setOrigin(.5,.5),e.setScale(i),this.initBody(),this.initCollisions(),t.add.existing(this.body)}initBody(){const{params:e,scale:t,bodySize:s}=this,{angle:i}=e,n=o.getOffsetToAngle(i,this.body.displayHeight/t/3),a=o.getCenterBody(this.body.displayWidth,this.body.displayHeight,t,s,n);this.body.setCircle(s,a.x,a.y)}act(e,t){this.update(e,t)}draw(){}explode(){const{body:e,scene:t,params:s}=this;t.effects.push(new a.Explode(t,new i.Vector(e.x,e.y),{sprite:s.explodeSprite})),this.destroy()}update(e,t){const{body:s}=this,{speed:i}=this.params;s.x+=i.x*(t/n.CONFIG.scene.delta),s.y+=i.y*(t/n.CONFIG.scene.delta),super.update(e,t)}}t.Laser=h},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Explode=void 0;const i=s(13);class n extends i.Effect{constructor(e,t,s){super(e),this.body=new Phaser.GameObjects.Sprite(e,t.x,t.y,s.sprite),this.params=s,this.startTime=e.time.now,this.body.setScale(0),this.body.setDepth(115),e.add.existing(this.body)}act(){this.update()}update(){const{scene:e,startTime:t}=this,s=e.time.now-t,i=Math.sin(s/150),n=i;this.body.angle+=3,this.body.setScale(n,n),this.body.setAlpha(i),i<.06&&s>100&&this.destroy()}}t.Explode=n},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Fire=void 0;const i=s(9),n=s(13);class o extends n.Effect{constructor(e,t,s){super(e),this.speed=1.7,this.body=new Phaser.GameObjects.Sprite(e,t.x,t.y,"fire"),this.params=s,this.body.setDepth(5),this.body.setAngle(i.angleToDegrees(s.angle)+90),this.startTime=e.time.now,this.params=s,e.add.existing(this.body)}act(){this.update()}update(){const{scene:e,body:t,speed:s,startTime:i,params:n}=this,o=e.time.now-i;t.alpha=1-o/150,t.x+=s*Math.cos(n.angle),t.y+=s*Math.sin(n.angle),t.alpha<=0&&this.destroy()}}t.Fire=o},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sphere=void 0;const i=s(12);class n extends i.Bullet{constructor(e,t,s,i){super(e,t,s,5),this.params=i}act(){this.draw(),this.update()}draw(){}update(){}}t.Sphere=n},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Hunter=void 0;const i=s(16),n=s(0),o=s(3),a=s(2),r=s(1),h=s(10),c=s(11);var d;!function(e){e.moving="moving",e.stop="stop",e.rotate="rotate",e.attack="attack"}(d||(d={}));class l extends h.Enemy{constructor(e,t){super(e,r.EnemyName.hunter),this.angle=0,this.weaponDamage=10,this.chanceToShoot=.25,this.lastShootTime=0,this.shootIntervalTime=1200,this.attackEndTime=0,this.attackIntervalTime=3e3,this.attackShootIntervalTime=300,this.attackSpreadRange=15,this.lastChangeTargetTime=0,this.changeTargetInterval=1e3,this.changeTargetIntervalRange=2e3,this.rotateSpeed=2,this.rotateTimer=0,this.rotateIntervalTimer=3e3,this.maxSpeed=2,this.speed=2,this.speedIncrease=.05,this.stopEndTime=0,this.stopIntervalTime=3e3,this.stopIntervalRangeTime=1e3,this.coinChance=.9,this.bodySize=36,this.depth=50,this.scale=.7,this.hp=70,this.bulletSpeed=7,this.behavior=d.moving,this.body=e.physics.add.image(t.x,t.y,"enemy-hunter-ship"),this.init(),this.defineTarget=this.defineTarget.bind(this),this.defineTarget()}init(){const{scale:e,depth:t,body:s,bodySize:i}=this;s.setScale(e),s.setImmovable(!0),s.setDepth(t);const n=a.getCenterBody(s.displayWidth,s.displayHeight,e,i);s.setCircle(i,n.x,n.y),this.setStopEndTime(!0)}act(e,t){this.update(e,t)}update(e,t){const{scene:s,body:i,lastShootTime:n,shootIntervalTime:r,chanceToShoot:h,behavior:c,speedIncrease:l,changeTargetInterval:u,changeTargetIntervalRange:p,stopEndTime:g,rotateIntervalTimer:m}=this,y=s.player.body;switch(this.updateBase(e,t),c){case d.moving:if(this.speed<this.maxSpeed&&(this.speed+=l),e>n&&(Math.random()>1-h&&this.shoot(a.getAngleBetween(new o.Vector(y.x,y.y),new o.Vector(i.x,i.y))),this.lastShootTime=e+r),e>this.lastChangeTargetTime){this.defineTarget();const t=u+Math.random()*p;this.lastChangeTargetTime=e+t}e>g&&(this.behavior=d.stop);break;case d.stop:this.speed>0?this.speed-=l:this.setRotateBehavior();break;case d.rotate:this.setTarget(new o.Vector(y.x,y.y)),a.getAngleDiff(this.targetAngle,this.angle)<=4?(this.attackEndTime=e+this.attackIntervalTime,this.behavior=d.attack):e>this.rotateTimer&&this.setMovingBehavior();break;case d.attack:this.setTarget(new o.Vector(y.x,y.y)),this.speed<this.maxSpeed&&(this.speed+=l),e>n&&(this.shoot(a.angleToRadians(this.angle),this.attackSpreadRange),this.lastShootTime=e+this.attackShootIntervalTime),e>this.attackEndTime&&this.setMovingBehavior()}}updateBase(e,t){const{body:s,angle:i,targetAngle:r,rotateSpeed:h}=this;this.body.angle=i-90;const c=a.angleToRadians(i),d=t/n.CONFIG.scene.delta;s.x+=this.speed*Math.cos(c)*d,s.y+=this.speed*Math.sin(c)*d,this.angle=a.getNearestAngle(i,r,h),(s.x<100||s.y<100||s.x>n.CONFIG.width-100||s.y>n.CONFIG.height-100)&&this.setTarget(new o.Vector(n.CONFIG.width/2,n.CONFIG.height/2))}defineTarget(){const e=new o.Vector(Math.random()*n.CONFIG.width,Math.random()*n.CONFIG.height);this.setTarget(e)}setTarget(e){const{body:t}=this;this.targetPos=e,this.targetAngle=a.angleToDegrees(a.getAngleBetween(this.targetPos,t))}setStopEndTime(e=!1){const{scene:t,stopIntervalTime:s,stopIntervalRangeTime:n}=this,o=t.time.now;this.stopEndTime=e?o+1e3+i.getRandomInt(0,s):o+s+i.getRandomInt(0,n)}setMovingBehavior(){const{scene:e,changeTargetInterval:t}=this,s=e.time.now;this.setStopEndTime(),this.lastChangeTargetTime=s+t,this.behavior=d.moving}setRotateBehavior(){const{scene:e,rotateIntervalTimer:t}=this,s=e.time.now;this.speed=0,this.rotateTimer=s+t,this.behavior=d.rotate}shoot(e,t=0){const{body:s,bulletSpeed:i,weaponDamage:n}=this,h=a.spreadRadians(e,t);this.scene.bullets.push(new c.LaserBullet(this.scene,new o.Vector(s.x,s.y),r.Owner.enemy,{speed:a.getOffsetToAngle(h,i),angle:h,sprite:"laser-red",explodeSprite:"red-explode",damage:n}))}destroy(){const{scene:e,body:t}=this;e.utils.tripleExplode(t.x,t.y),super.destroy()}}t.Hunter=l},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Level2=void 0;const i=s(17),n=s(19);class o extends n.Level{constructor(e){super(e,1),this.nextAttemptTimeInterval=1750}makeAttempt(){const{scene:e}=this,{enemies:t}=e,s=e.getStats().kills.hunter>10?.65:0;t.length<4&&(t.length<3||Math.random()>.75-s)&&this.spawnEnemy()}spawnEnemy(){const{scene:e}=this,t=e.sceneTime>6e4?.2:0;Math.random()>.3+t?this.createEnemy(i.Bot):this.createEnemy(i.Hunter)}}t.Level2=o},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CometsService=void 0;const i=s(0),n=s(48),o=s(4);class a extends o.Service{constructor(e,t){super(e),this.comets=[],this.count=15,this.params=t,this.init()}init(){const{scene:e,count:t}=this;for(let s=0;s<t;s++)this.comets.push(new n.Comet(e,{}))}act(e,t){this.update(e,t)}update(e,t){const s=t/i.CONFIG.scene.delta;this.comets.forEach(e=>{const{body:t}=e;t.y+=e.speed*s,t.y>i.CONFIG.height+100&&(e.updateParams(),e.refreshPosition())})}}t.CometsService=a},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Comet=void 0;const i=s(0),n=s(2);t.Comet=class{constructor(e,t){this.speed=3,this.scene=e,this.body=this.scene.add.image(n.getRandomInt(0,i.CONFIG.width),n.getRandomInt(0,i.CONFIG.height),"comet"),this.updateParams()}updateParams(){const{body:e}=this;e.setAlpha(.03+.1*Math.random()),e.setScale(.2,.75+.5*Math.random()),this.speed=n.getRandomInt(3,7)}refreshPosition(){const{body:e}=this;e.x=n.getRandomInt(0,i.CONFIG.width),e.y=-100}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Player=void 0;const i=s(0),n=s(3),o=s(1),a=s(2),r=s(11);t.Player=class{constructor(e){this.scale=.6,this.bodySize=26,this.speed=5,this.bulletSpeed=10,this.lastShootTime=0,this.shootTime=320,this.hp=100,this.maxHp=100,this.weaponDamage=10,this.angle=0,this.scene=e,this.body=this.scene.physics.add.image(300,300,"player-ship"),this.init()}init(){const{scene:e,scale:t}=this;this.body.setScale(t),this.body.setDepth(100),this.body.setImmovable(!0),e.add.existing(this.body)}act(e,t){this.update(e,t)}update(e,t){this.body.active&&(this.updateBody(e,t),this.updateShooting(e,t),this.updateMovement(e,t),this.updateAngle(e,t))}updateBody(e,t){const{scale:s,bodySize:i}=this,n=a.getOffsetToAngle(this.angle+Math.PI,10),o=a.getCenterBody(this.body.displayWidth,this.body.displayHeight,s,i,n);this.body.setCircle(i,o.x,o.y)}updateShooting(e,t){const{scene:s}=this,i=s.input.activePointer;i.isDown&&this.shoot(new n.Vector(i.x,i.y))}updateMovement(e,t){const{scene:s,body:n}=this,o=s.input.keyboard.createCursorKeys(),a=t/i.CONFIG.scene.delta;let r=this.speed*a;(o.up.isDown||o.down.isDown)&&(o.right.isDown||o.left.isDown)&&(r*=.8),o.up.isDown?n.y-=r:o.down.isDown&&(n.y+=r),o.right.isDown?n.x+=r:o.left.isDown&&(n.x-=r),n.x<0&&(n.x=0),n.y<i.CONFIG.scene.minYPos&&(n.y=i.CONFIG.scene.minYPos),n.x>i.CONFIG.width&&(n.x=i.CONFIG.width),n.y>i.CONFIG.height&&(n.y=i.CONFIG.height)}updateAngle(e,t){const{scene:s,body:i}=this,o=s.input.activePointer;this.angle=a.getAngleBetween(new n.Vector(o.x,o.y),new n.Vector(i.x,i.y)),this.body.angle=a.angleToDegrees(this.angle)+90}shoot(e){const{body:t,bulletSpeed:s,weaponDamage:i}=this;if(this.scene.time.now>this.lastShootTime){const h=a.getAngleBetween(e,new n.Vector(t.x,t.y));this.scene.bullets.push(new r.LaserBullet(this.scene,new n.Vector(t.x,t.y),o.Owner.player,{speed:a.getOffsetToAngle(h,s),angle:h,sprite:"laser-green",explodeSprite:"green-explode",damage:i})),this.lastShootTime=this.scene.time.now+this.shootTime}}damage(e){this.hp-=e,this.hp<=0&&this.destroy()}destroy(){const{scene:e,body:t}=this;e.utils.tripleExplode(t.x,t.y),t.destroy(),e.onFail()}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Utils=void 0;const i=s(3),n=s(51),o=s(2),a=s(18);t.Utils=class{constructor(e){this.scene=e}explode(e,t){const{scene:s}=this;s.effects.push(new a.Explode(s,new i.Vector(e,t),{sprite:"orange-explode"}))}tripleExplode(e,t){const s=360*Math.random()/3;for(let i=0;i<3;i++){const n=o.angleToRadians(120*i+s);this.explode(e+30*Math.cos(n),t+30*Math.sin(n))}}createBonus(e,t){const{scene:s}=this;s.bonuses.push(new n.Coin(s,new i.Vector(e,t)))}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Coin=void 0;const i=s(52),n={0:{sprite:"coin-bronze",cost:5},1:{sprite:"coin-silver",cost:7},2:{sprite:"coin-gold",cost:10}};class o extends i.Bonus{constructor(e,t){super(e),this.lifeTime=5e3;const s=n[(()=>{const e=Math.random();return e>.5?0:e>.2?1:2})()];this.cost=s.cost,this.body=this.scene.physics.add.image(t.x,t.y,s.sprite),this.creationTime=e.time.now,this.init()}init(){this.body.setDepth(10),this.body.setCircle(16),this.initCollisions()}initCollisions(){const{scene:e}=this;e.physics.add.collider(this.body,e.player.body,()=>{e.money+=this.cost,this.destroy()})}act(){this.update()}update(){const{scene:e,body:t}=this,s=e.time.now;t.angle+=3*Math.sin(.003*s),e.time.now>this.creationTime+this.lifeTime&&this.destroy()}}t.Coin=o},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Bonus=void 0;t.Bonus=class{constructor(e){this.scene=e}act(){}destroy(){const{body:e}=this;this.scene.bonuses=this.scene.bonuses.filter(e=>e!==this),e.destroy()}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.INITIAL_STATS=void 0,t.INITIAL_STATS={totalKills:0,kills:{bot:0,hunter:0}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MenuScene=void 0;const i=s(5),n=s(0),o=s(7),a=s(1),r=s(6);let h=0,c=0,d=0,l=0,u=!1;class p extends r.Scene{constructor(){super({key:a.SceneName.menu})}preload(){u||(this.load.bitmapFont("atari","assets/fonts/atari/bitmap/gem.png","assets/fonts/atari/bitmap/gem.xml"),u=!0)}create(){this.graphics=this.add.graphics({lineStyle:{width:2,color:i.COLORS.white},fillStyle:{color:i.COLORS.white}}),this.drawTitle(200),this.drawStartButton(300),this.drawLabButton(365)}update(){this.updateRainbow()}drawTitle(e){this.add.bitmapText(n.CONFIG.width/2,e,"atari",n.CONFIG.title,32).setOrigin(.5).setCenterAlign();const t=this.add.dynamicBitmapText(n.CONFIG.width/2,e+45,"atari",n.CONFIG.subtitle,23).setOrigin(.5).setCenterAlign();t.setDisplayCallback(this.rainbowCallback),t.tint=i.COLORS.green}drawStartButton(e){new o.Button(this,n.CONFIG.width/2,e,"",{width:180,height:46,text:"Start game"}).on("pointerdown",()=>{this.scene.start(a.SceneName.preview,{level:this.getData().level})})}drawLabButton(e){new o.Button(this,n.CONFIG.width/2,e,"",{width:180,height:46,text:"Lab",disabled:!0}).on("pointerdown",()=>{console.log("lab")})}updateRainbow(){h=0,6==d++&&(c=(c+1)%4,d=0)}rainbowCallback(e){return e.color=i.COLORS.green,h=(h+1)%4,e.y=2*Math.cos(l+h),l+=.005,e}}t.MenuScene=p},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Button=void 0;const i=s(5);class n extends Phaser.GameObjects.Image{constructor(e,t,s,n,o){super(e,t,s,n),this.graphics=e.add.graphics({lineStyle:{width:2,color:i.COLORS.white},fillStyle:{color:i.COLORS.white}}),this.params=o,this.init()}init(){const{scene:e,graphics:t,x:s,y:n}=this,{width:o,height:a,text:r,disabled:h}=this.params;this.width=o,this.height=a,this.setOrigin(.5,0);const c=h?.5:1;h?t.alpha=c:this.setInteractive({cursor:"pointer"});const d=new Phaser.Geom.Rectangle(s-o/2,n,o,a);t.strokeRectShape(d);const l=e.add.bitmapText(s,n+Math.floor(a/2),"atari","",16).setOrigin(.5).setAlpha(c).setCenterAlign();l.setText(r),this.on("pointerover",()=>{t.alpha=c,t.lineStyle(2,i.COLORS.green),l.tint=i.COLORS.green,document.body.style.cursor="pointer",t.strokeRectShape(d)}),this.on("pointerout",()=>{t.alpha=c,t.lineStyle(2,i.COLORS.white),l.tint=i.COLORS.white,document.body.style.cursor="default",t.strokeRectShape(d)}),this.on("pointerdown",()=>{document.body.style.cursor="default"})}}t.Button=n},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FailScene=void 0;const i=s(5),n=s(0),o=s(7),a=s(1),r=s(6);class h extends r.Scene{constructor(){super({key:a.SceneName.fail})}preload(){}init(e){this.params=e}create(){const e=n.CONFIG.height/2-105,t=new Phaser.GameObjects.BitmapText(this,n.CONFIG.width/2,e,"atari",n.CONFIG.scene.failTitleText,28),s=new Phaser.GameObjects.BitmapText(this,n.CONFIG.width/2,e+37,"atari",n.CONFIG.scene.failSubtitleText,21);t.setOrigin(.5,0).setCenterAlign().setTint(i.COLORS.red),this.add.existing(t),s.setOrigin(.5,0).setCenterAlign().setTint(i.COLORS.white),this.add.existing(s),this.drawTryAgainButton(e+103),this.drawMenuButton(e+103+65)}drawMenuButton(e){new o.Button(this,n.CONFIG.width/2,e,"",{width:160,height:46,text:"Go to menu"}).on("pointerdown",()=>{this.scene.start(a.SceneName.menu)})}drawTryAgainButton(e){const t=new o.Button(this,n.CONFIG.width/2,e,"",{width:160,height:46,text:"Try again"}),s={level:this.getData().level};t.on("pointerdown",()=>{this.scene.start(a.SceneName.game,s)})}}t.FailScene=h},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WinScene=void 0;const i=s(5),n=s(0),o=s(7),a=s(1),r=s(6);class h extends r.Scene{constructor(){super({key:a.SceneName.win})}preload(){}init(e){this.params=e}create(){const e=n.CONFIG.height/2-135,t=new Phaser.GameObjects.BitmapText(this,n.CONFIG.width/2,e,"atari",n.CONFIG.scene.winTitleText,28),s=new Phaser.GameObjects.BitmapText(this,n.CONFIG.width/2,e+37,"atari",n.CONFIG.scene.winSubtitleText,21);t.setOrigin(.5,0).setCenterAlign().setTint(i.COLORS.green),this.add.existing(t),s.setOrigin(.5,0).setCenterAlign().setTint(i.COLORS.white),this.add.existing(s),this.drawNextButton(e+103),this.drawTryAgainButton(e+103+65),this.drawMenuButton(e+103+130)}drawNextButton(e){const t=this.getData().level;new o.Button(this,n.CONFIG.width/2,e,"",{width:160,height:46,text:"Next level",disabled:n.CONFIG.levelsCount<=t+1}).on("pointerdown",()=>{this.setData("level",t+1);const e={level:this.getData().level};this.scene.start(a.SceneName.preview,e)})}drawTryAgainButton(e){const t=new o.Button(this,n.CONFIG.width/2,e,"",{width:160,height:46,text:"Try again"}),s={level:this.getData().level};t.on("pointerdown",()=>{this.scene.start(a.SceneName.game,s)})}drawMenuButton(e){const t=this.getData().level;new o.Button(this,n.CONFIG.width/2,e,"",{width:160,height:46,text:"Go to menu"}).on("pointerdown",()=>{t+1<n.CONFIG.levelsCount&&this.setData("level",t+1),this.scene.start(a.SceneName.menu)})}}t.WinScene=h},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PreviewScene=void 0;const i=s(5),n=s(0),o=s(7),a=s(1),r=s(6);class h extends r.Scene{constructor(){super({key:a.SceneName.preview})}init(e){this.params=e}create(){const{params:e}=this,{level:t}=e,{title:s,text:o,mission:a}=n.LEVELS_CONFIG[t],r=n.CONFIG.height/2,h=new Phaser.GameObjects.BitmapText(this,n.CONFIG.width/2,0,"atari",`${t+1}. ${s}`,32);h.setOrigin(.5,0).setCenterAlign();const c=new Phaser.GameObjects.BitmapText(this,n.CONFIG.width/2,0,"atari",o,18);c.setMaxWidth(400).setOrigin(.5,0).setCenterAlign();const d=new Phaser.GameObjects.BitmapText(this,n.CONFIG.width/2,0,"atari",a,18);d.setMaxWidth(400).setOrigin(.5,0).setCenterAlign().setTint(i.COLORS.green);const l=r-(h.height+c.height+d.height+100)/2;h.y=l-25,c.y=h.y+65,d.y=c.y+c.height+25,this.add.existing(h),this.add.existing(c),this.add.existing(d),this.drawButton(d.y+d.height+45)}drawButton(e){const t=new o.Button(this,n.CONFIG.width/2,e,"",{width:120,height:46,text:"Go"}),s={level:this.params.level};t.on("pointerdown",()=>{this.scene.start(a.SceneName.game,s)})}}t.PreviewScene=h}]);